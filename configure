#! /bin/sh

#### Configuration script for XEmacs.  Largely divergent from FSF.
#### Guess values for system-dependent variables and create Makefiles.
#### Generated automatically using autoconf version 2.12 
#### Copyright (C) 1992, 93, 94, 95, 96 Free Software Foundation, Inc.
#### Copyright (C) 1993-1995 Board of Trustees, University of Illinois.
#### Copyright (C) 1996, 1997 Sun Microsystems, Inc.
#### Copyright (C) 1995, 1996 Ben Wing.
#### Copyright (C) 1998, 1999 J. Kean Johnston.

### Don't edit this script!
### This script was automatically generated by the `autoconf' program
### from the file `./configure.in'.
### To rebuild it, execute the command
###	autoconf
### in the this directory.  You must have autoconf version 2.12 or later.

### This file is part of XEmacs.

### XEmacs is free software; you can redistribute it and/or modify it
### under the terms of the GNU General Public License as published by
### the Free Software Foundation; either version 2, or (at your
### option) any later version.

### XEmacs is distributed in the hope that it will be useful, but
### WITHOUT ANY WARRANTY; without even the implied warranty of
### MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
### General Public License for more details.

### You should have received a copy of the GNU General Public License
### along with XEmacs; see the file COPYING.  If not, write to the Free
### Software Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
### 02111-1307, USA.

### For usage, run `./configure --help'
### For more detailed information on building and installing XEmacs,
### read the file `INSTALL'.
###
### If configure succeeds, it leaves its status in config.status.
### A log of configuration tests can be found in config.log.
### If configure fails after disturbing the status quo,
### 	config.status is removed.

ac_help="$ac_help
  --with-x                use the X Window System"



if test -n "$ZSH_VERSION"; then
    setopt NO_BAD_PATTERN NO_BANG_HIST NO_BG_NICE NO_EQUALS NO_FUNCTION_ARGZERO
  setopt GLOB_SUBST NO_HUP INTERACTIVE_COMMENTS KSH_ARRAYS NO_MULTIOS NO_NOMATCH
  setopt RM_STAR_SILENT POSIX_BUILTINS SH_FILE_EXPANSION SH_GLOB SH_OPTION_LETTERS
  setopt SH_WORD_SPLIT BSD_ECHO IGNORE_BRACES
      if test -n "$CDPATH"; then CDPATH="."; export CDPATH; fi
elif test -n "$BASH_VERSION"; then
    set -o posix
  unset CDPATH
else
  if test -n "$CDPATH"; then CDPATH="."; export CDPATH; fi
fi

exec_prefix=NONE
host=NONE
no_create=
nonopt=NONE
no_recursion=
prefix=NONE
program_prefix=NONE
program_suffix=NONE
program_transform_name=s,x,x,
silent=
site=
srcdir=
target=NONE
verbose=
x_includes=NONE
x_libraries=NONE

bindir='${exec_prefix}/bin'
sbindir='${exec_prefix}/sbin'
libexecdir='${exec_prefix}/libexec'
datadir='${prefix}/share'
sysconfdir='${prefix}/etc'
sharedstatedir='${prefix}/com'
localstatedir='${prefix}/var'
libdir='${{exec_prefix}}/lib'
includedir='${prefix}/include'
oldincludedir='/usr/include'
infodir='${prefix}/info'
mandir='${prefix}/man'

subdirs=
MFLAGS= MAKEFLAGS=
ac_max_here_lines=12

trap 'rm -fr conftest* confdefs* core core.* *.core $ac_clean_files; exit 1' 1 2 15

# File descriptor usage:
# 0 standard input
# 1 file creation
# 2 errors and warnings
# 3 some systems may open it to /dev/tty
# 4 used on the Kubota Titan
# 6 checking for... messages and results
# 5 compiler messages saved in config.log
if test "$silent" = yes; then
  exec 6>/dev/null
else
  exec 6>&1
fi
exec 5>./config.log

echo "\
This file contains any messages produced by compilers while
running configure, to aid debugging if configure makes a mistake.
" 1>&5

# Strip out --no-create and --no-recursion so they do not pile up.
# Also quote any args containing shell metacharacters.
ac_configure_args=
for ac_arg
do
  case "$ac_arg" in
  -no-create | --no-create | --no-creat | --no-crea | --no-cre \
  | --no-cr | --no-c) ;;
  -no-recursion | --no-recursion | --no-recursio | --no-recursi \
  | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r) ;;
  *" "*|*"	"*|*[\[\]\~\#\$\^\&\*\(\)\{\}\\\|\;\<\>\?]*)
  ac_configure_args="$ac_configure_args '$ac_arg'" ;;
  *) ac_configure_args="$ac_configure_args $ac_arg" ;;
  esac
done

# NLS nuisances.
# Only set these to C if already set.  These must not be set unconditionally
# because not all systems understand e.g. LANG=C (notably SCO).
# Fixing LC_MESSAGES prevents Solaris sh from translating var values in `set'!
# Non-C LC_CTYPE values break the ctype check.
if test "${LANG+set}"   = set; then LANG=C;   export LANG;   fi
if test "${LC_ALL+set}" = set; then LC_ALL=C; export LC_ALL; fi
if test "${LC_MESSAGES+set}" = set; then LC_MESSAGES=C; export LC_MESSAGES; fi
if test "${LC_CTYPE+set}"    = set; then LC_CTYPE=C;    export LC_CTYPE;    fi

# confdefs.h avoids OS command line length limits that DEFS can exceed.
rm -rf conftest* confdefs.h
# AIX cpp loses on an empty file, so make sure it contains at least a newline.
echo > confdefs.h

# A filename unique to this package, relative to the directory that
# configure is in, which we can look for to find out if srcdir is correct.
ac_unique_file=src/lisp.h

# Find the source files, if location was not specified.
if test -z "$srcdir"; then
  ac_srcdir_defaulted=yes
  # Try the directory containing this script, then its parent.
  ac_prog=$0
  ac_confdir=`echo $ac_prog|sed 's%/[^/][^/]*$%%'`
  test "x$ac_confdir" = "x$ac_prog" && ac_confdir=.
  srcdir=$ac_confdir
  if test ! -r $srcdir/$ac_unique_file; then
    srcdir=..
  fi
else
  ac_srcdir_defaulted=no
fi
if test ! -r $srcdir/$ac_unique_file; then
  if test "$ac_srcdir_defaulted" = yes; then
    { echo "configure: error: can not find sources in $ac_confdir or .." 1>&2; exit 1; }
  else
    { echo "configure: error: can not find sources in $srcdir" 1>&2; exit 1; }
  fi
fi
srcdir=`echo "${srcdir}" | sed 's%\([^/]\)/*$%\1%'`

# Prefer explicitly selected file to automatically selected ones.
if test -z "$CONFIG_SITE"; then
  if test "x$prefix" != xNONE; then
    CONFIG_SITE="$prefix/share/config.site $prefix/etc/config.site"
  else
    CONFIG_SITE="$ac_default_prefix/share/config.site $ac_default_prefix/etc/config.site"
  fi
fi
for ac_site_file in $CONFIG_SITE; do
  if test -r "$ac_site_file"; then
    echo "loading site script $ac_site_file"
    . "$ac_site_file"
  fi
done


ac_ext=c
xe_cppflags='$CPPFLAGS $c_switch_site $c_switch_machine $c_switch_system $c_switch_x_site $X_CFLAGS'
xe_ldflags='$LDFLAGS $ld_switch_site $ld_switch_machine $ld_switch_system $ld_switch_x_site $ld_switch_run'
xe_libs='$ld_call_shared $xe_check_libs $X_EXTRA_LIBS $libs_x $X_PRE_LIBS $LIBS $libs_machine $libs_system $libs_standard'
ac_cpp='$CPP '"$xe_cppflags"
ac_compile='${CC-cc} -c $CFLAGS '"$xe_cppflags"' conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest $CFLAGS '"$xe_cppflags $xe_ldflags"' conftest.$ac_ext '"$xe_libs"' 1>&5'
cross_compiling=no

if (echo "testing\c"; echo 1,2,3) | grep c >/dev/null; then
  # Stardent Vistra SVR4 grep lacks -e, says ghazi@caip.rutgers.edu.
  if (echo -n testing; echo 1,2,3) | sed s/-n/xn/ | grep xn >/dev/null; then
    ac_n= ac_c='
' ac_t='	'
  else
    ac_n=-n ac_c= ac_t=
  fi
else
  ac_n= ac_c='\c' ac_t=
fi


progname="`echo $0 | sed 's:^\./\./:\./:'`"


MAKE_SUBDIR="$MAKE_SUBDIR lib-src" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"lib-src\" to \$MAKE_SUBDIR"; fi
INSTALL_ARCH_DEP_SUBDIR="$INSTALL_ARCH_DEP_SUBDIR lib-src" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"lib-src\" to \$INSTALL_ARCH_DEP_SUBDIR"; fi

prefix='/usr/local'
exec_prefix='${prefix}'
bindir='${exec_prefix}/bin'
datadir='${prefix}/lib'
statedir='${prefix}/lib'
libdir='${exec_prefix}/lib'
mandir='${prefix}/man/man1'
infodir='${datadir}/${PROGNAME}-${version}/info'
infopath=''
install_pp=''
lispdir='${datadir}/${PROGNAME}-${version}/lisp'
moduledir='${datadir}/${PROGNAME}-${version}/${configuration}/modules'
sitelispdir='${datadir}/xemacs/site-lisp'
sitemoduledir='${datadir}/xemacs/site-modules'
pkgdir='${datadir}/${PROGNAME}-${version}/lisp'
package_path=''
etcdir='${datadir}/${PROGNAME}-${version}/etc'
lockdir='${statedir}/${PROGNAME}/lock'
archlibdir='${datadir}/${PROGNAME}-${version}/${configuration}'
with_site_lisp='no'
with_site_modules='yes'
with_menubars=''
with_scrollbars=''
with_dialogs=''
with_file_coding=''
puresize=''
cpp='' cppflags='' libs='' ldflags=''
dynamic=''
with_x11=''
with_msw=''
rel_alloc='default'
with_system_malloc='default'
with_dlmalloc='default'
native_sound_lib=''
use_assertions="yes"
with_toolbars=""
with_tty=""
use_union_type="no"
with_dnet=""




arguments="$@"

quoted_sed_magic=s/"'"/"'"'"'"'"'"'"'"/g
quoted_arguments=
for i in "$@"; do
   case "$i" in
   -no-create | --no-create | --no-creat | --no-crea | --no-cre \
   | --no-cr | --no-c) ;;
   -no-recursion | --no-recursion | --no-recursio | --no-recursi \
   | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r) ;;
   *)
   quoted_i="`echo '' $i | sed -e 's:^ ::' -e $quoted_sed_magic`"
   quoted_arguments="$quoted_arguments '$quoted_i'" ;;
   esac
done

while test $# != 0; do
  arg="$1"; shift
  case "$arg" in
    --no-create|--no-recursion) ;;
        -* )
            case "$arg" in
        -*=*)
	  opt=`echo '' $arg | sed -e 's:^ ::' -e 's:^-*\([^=]*\)=.*$:\1:'`
	  val=`echo '' $arg | sed -e 's:^ ::' -e 's:^-*[^=]*=\(.*\)$:\1:'`
	  valomitted=no
	;;
                                                                          -*)
                                 	  opt=`echo '' $arg | sed -e 's:^ ::' -e 's:^-*\(.*\)$:\1:'`
          val="yes" valomitted=yes
        ;;
      esac

            optname="$opt"
      opt="`echo '' $opt | sed -e 's:^ ::' | tr - _`"

            case "${valomitted}-${opt}" in yes-without_* )
	opt=`echo $opt | sed 's/without/with/'`
	valomitted="no" val="no" ;;
      esac

            case "$opt" in

      	with_site_lisp	| \
    with_site_modules | \
	with_x		| \
	with_x11	| \
	with_msw	| \
	with_gcc	| \
	dynamic		| \
	with_ncurses	| \
	with_dnet	| \
	with_socks	| \
	with_dragndrop	| \
	with_cde	| \
	with_offix	| \
	with_gpm	| \
	with_xpm	| \
	with_xface	| \
	with_gif	| \
	with_jpeg	| \
	with_png	| \
	with_tiff	| \
	with_session	| \
	with_xmu	| \
	with_purify	| \
	with_quantify	| \
	with_toolbars	| \
	with_tty	| \
	with_xfs	| \
	with_i18n3	| \
	with_mule	| \
	with_file_coding| \
	with_canna	| \
	with_wnn	| \
	with_wnn6	| \
	with_workshop	| \
	with_sparcworks | \
	with_tooltalk	| \
	with_ldap	| \
	with_pop	| \
	with_kerberos	| \
	with_hesiod	| \
	with_dnet	| \
	with_infodock	| \
	external_widget | \
	verbose		| \
	extra_verbose	| \
	const_is_losing | \
	usage_tracking	| \
	use_union_type	| \
	debug		| \
	use_assertions	| \
	gung_ho		| \
	use_minimal_tagbits			| \
	use_indexed_lrecord_implementation	| \
	memory_usage_stats | \
	with_clash_detection | \
	with_shlib | \
	no_doc_file )
	  	  case "$val" in
	    y | ye | yes )	val=yes ;;
	    n | no )		val=no	;;
	    * ) (echo "$progname: Usage error:"
echo " " "The \`--$optname' option requires a boolean value: \`yes' or \`no'."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1 ;;
	  esac
	  eval "$opt=\"$val\"" ;;


			srcdir		| \
	compiler	| \
	cflags		| \
	cpp		| \
	cppflags	| \
	libs		| \
	ldflags		| \
	puresize	| \
	cache_file	| \
	native_sound_lib| \
	site_lisp	| \
	x_includes	| \
	x_libraries	| \
	site_includes	| \
	site_libraries	| \
	site_prefixes   | \
	site_runtime_libraries )
	  	  if test "$valomitted" = "yes" ; then
	    	    if test "$#" = 0 ; then
	      (echo "$progname: Usage error:"
echo " " "The \`--$optname' option requires a value."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1;
	    fi
	    val="$1"; shift
	  fi
          eval "$opt=\"$val\""
	;;

		rel_alloc | \
	with_dlmalloc | \
	with_debug_malloc  | use_debug_malloc | \
	with_system_malloc | use_system_malloc )
	  case "$val" in
	    y | ye | yes )	val=yes ;;
	    n | no )		val=no  ;;
	    d | de | def | defa | defau | defaul | default ) val=default ;;
	    * ) (echo "$progname: Usage error:"
echo " " "The \`--$optname' option requires one of these values:
  \`yes', \`no', or \`default'."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1 ;;
	  esac
	  case "$opt" in use_* ) opt="`echo $opt | sed s/use/with/`" ;; esac
          eval "$opt=\"$val\""
        ;;

                "with_database" )
	  with_database_berkdb=no
	  with_database_dbm=no
	  with_database_gnudbm=no
	  for x in `echo "$val" | sed -e 's/,/ /g'` ; do
	    case "$x" in
		no ) ;;
		b | be | ber | berk | berkd | berkdb )  with_database_berkdb=yes ;;
		d | db | dbm )				with_database_dbm=yes    ;;
		g | gn | gnu | gnud | gnudb | gnudbm )  with_database_gnudbm=yes ;;
		* ) (echo "$progname: Usage error:"
echo " " "The \`--$optname' option value
  must be either \`no' or a comma-separated list
  of one or more of \`berkdb' and either \`dbm' or \`gnudbm'."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1 ;;
            esac
	  done
	  if test "$with_database_dbm"    = "yes" -a \
	          "$with_database_gnudbm" = "yes"; then
	  (echo "$progname: Usage error:"
echo " " "Only one of \`dbm' and \`gnudbm' may be specified
  with the \`--$optname' option."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1
	  fi
        ;;

        	"with_sound" )
	  	  	  case "$val" in
	    y | ye | yes )			val=native ;;
	    n | no | non | none )		val=no;;
	    na | nat | nati | nativ | native )	val=native  ;;
	    ne | net | neta | netau | netaud | netaudi | netaudio | nas ) val=nas  ;;
	    b | bo | bot | both )		val=both;;
	    * ) (echo "$progname: Usage error:"
echo " " "The \`--$optname' option must have one of these values:
  \`native', \`nas', \`both', or \`none'."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1 ;;
	  esac
          eval "$opt=\"$val\""
        ;;

        	"with_xim" )
	  case "$val" in
	    y | ye | yes )		  val=yes   ;;
	    n | no | non | none )	  val=no    ;;
	    x | xl | xli | xlib )	  val=xlib  ;;
	    m | mo | mot | moti | motif ) val=motif ;;
	    * ) (echo "$progname: Usage error:"
echo " " "The \`--$optname' option must have one of these values:
  \`motif', \`xlib', \`yes', or \`no'."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1 ;;
	  esac
          eval "$opt=\"$val\""
        ;;

        	"mail_locking" )
	  case "$val" in
	    lockf )	val=lockf ;;
	    flock )	val=flock ;;
	    file )	val=file  ;;
	    * ) (echo "$progname: Usage error:"
echo " " "The \`--$optname' option must have one of these values:
  \`lockf', \`flock', or \`file'."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1 ;;
	  esac
          eval "$opt=\"$val\""
        ;;

        	"error_checking" )
	  	  	  
	  for x in `echo "$val" | sed -e 's/,/ /g'` ; do
	    case "$x" in
	      	      n | no | non | none ) new_default=no ;;
	      a | al | all )	    new_default=yes ;;

	      extents )       error_check_extents=yes ;;
	      noextents )     error_check_extents=no ;;

	      typecheck )     error_check_typecheck=yes ;;
	      notypecheck )   error_check_typecheck=no ;;

	      bufpos )	      error_check_bufpos=yes ;;
	      nobufpos )      error_check_bufpos=no ;;

	      gc )	      error_check_gc=yes ;;
	      nogc )          error_check_gc=no ;;

	      malloc )	      error_check_malloc=yes ;;
	      nomalloc )      error_check_malloc=no ;;

	      * ) bogus_error_check=yes ;;
	    esac
	    if test "$bogus_error_check" -o \
	         \( -n "$new_default" -a -n "$echeck_notfirst" \) ; then
		if test "$error_check_default" = yes ; then
		  types="\`all' (default), \`none', \`noextents', \`notypecheck', \`nobufpos', \`nogc', and \`nomalloc'."
		else
		  types="\`all', \`none' (default), \`extents', \`typecheck', \`bufpos', \`gc', and \`malloc'."
		fi
		(echo "$progname: Usage error:"
echo " " "Valid types for the \`--$optname' option are:
  $types."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1
	    elif test -n "$new_default" ; then
		error_check_extents=$new_default
		error_check_typecheck=$new_default
		error_check_bufpos=$new_default
		error_check_gc=$new_default
		error_check_malloc=$new_default
		new_default=	# reset this
	    fi
	    echeck_notfirst=true
	  done
	;;

				
		prefix | exec_prefix | bindir | datadir | statedir | libdir | \
	mandir | infodir | infopath | lispdir | etcdir | lockdir | pkgdir | \
	archlibdir | docdir | package_path )
	   	   if test "$valomitted" = "yes"; then
	     if test "$#" = 0; then
		 (echo "$progname: Usage error:"
echo " " "The \`--$optname' option requires a value."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1;
	     fi
	     val="$1"; shift
	   fi
	   eval "$opt=\"$val\""

                      	   case "$opt" in
             lispdir ) { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LISPDIR_USER_DEFINED
EOF
cat >> confdefs.h <<\EOF
#define LISPDIR_USER_DEFINED 1
EOF
}
 ;;
             sitelispdir ) { test "$extra_verbose" = "yes" && cat << \EOF
    Defining SITELISPDIR_USER_DEFINED
EOF
cat >> confdefs.h <<\EOF
#define SITELISPDIR_USER_DEFINED 1
EOF
}
 ;;
             moduledir ) { test "$extra_verbose" = "yes" && cat << \EOF
    Defining MODULEDIR_USER_DEFINED
EOF
cat >> confdefs.h <<\EOF
#define MODULEDIR_USER_DEFINED 1
EOF
}
 ;;
             etcdir  )  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining ETCDIR_USER_DEFINED
EOF
cat >> confdefs.h <<\EOF
#define ETCDIR_USER_DEFINED 1
EOF
}
 ;;
             infodir ) { test "$extra_verbose" = "yes" && cat << \EOF
    Defining INFODIR_USER_DEFINED
EOF
cat >> confdefs.h <<\EOF
#define INFODIR_USER_DEFINED 1
EOF
}
 ;;
             infopath ) { test "$extra_verbose" = "yes" && cat << \EOF
    Defining INFOPATH_USER_DEFINED
EOF
cat >> confdefs.h <<\EOF
#define INFOPATH_USER_DEFINED 1
EOF
}
 ;;
             package_path ) { test "$extra_verbose" = "yes" && cat << \EOF
    Defining PACKAGE_PATH_USER_DEFINED
EOF
cat >> confdefs.h <<\EOF
#define PACKAGE_PATH_USER_DEFINED 1
EOF
}
 ;;
             datadir )
 	        { test "$extra_verbose" = "yes" && cat << \EOF
    Defining INFODIR_USER_DEFINED
EOF
cat >> confdefs.h <<\EOF
#define INFODIR_USER_DEFINED 1
EOF
}

 	        { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LISPDIR_USER_DEFINED
EOF
cat >> confdefs.h <<\EOF
#define LISPDIR_USER_DEFINED 1
EOF
}

            { test "$extra_verbose" = "yes" && cat << \EOF
    Defining MODULEDIR_USER_DEFINED
EOF
cat >> confdefs.h <<\EOF
#define MODULEDIR_USER_DEFINED 1
EOF
}

	        { test "$extra_verbose" = "yes" && cat << \EOF
    Defining ETCDIR_USER_DEFINED
EOF
cat >> confdefs.h <<\EOF
#define ETCDIR_USER_DEFINED 1
EOF
}
 ;;
             statedir | lockdir ) { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LOCKDIR_USER_DEFINED
EOF
cat >> confdefs.h <<\EOF
#define LOCKDIR_USER_DEFINED 1
EOF
}
 ;;
             exec_prefix | libdir | archlibdir ) { test "$extra_verbose" = "yes" && cat << \EOF
    Defining ARCHLIBDIR_USER_DEFINED
EOF
cat >> confdefs.h <<\EOF
#define ARCHLIBDIR_USER_DEFINED 1
EOF
}
 ;;
           esac
	;;

		"no_create" ) ;;

		"usage" | "help" ) ${PAGER-more} ${srcdir}/configure.usage; exit 0 ;;

		"with_menubars"   | \
	"with_scrollbars" | \
	"with_dialogs" )
	  case "$val" in
	    l | lu | luc | luci | lucid )		val=lucid  ;;
	    m | mo | mot | moti | motif )		val=motif  ;;
	    athena3d | athena-3d )			val=athena3d ;;
	    a | at | ath | athe | athen | athena )	val=athena ;;
	    n | no | non | none )			val=no ;;
	    * ) (echo "$progname: Usage error:"
echo " " "The \`--$optname' option must have one of these values:
  \`lucid', \`motif', \`athena', \`athena3d', or \`no'."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1 ;;
	  esac
	  eval "$opt=\"$val\""
	;;

		"run_in_place"	| \
	"with_gnu_make" )
	  echo "configure: warning: Obsolete option \`--$optname' ignored." 1>&2
	;;

        	* ) (echo "$progname: Usage error:"
echo " " "Unrecognized option: $arg"
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1 ;;

      esac
    ;;

        *-*-*) configuration="$arg" ;;

        *) (echo "$progname: Usage error:"
echo " " "Unrecognized argument: $arg"
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1 ;;

  esac
done


test -n "$cpp"      && CPP="$cpp"
test -n "$cppflags" && CPPFLAGS="$cppflags"
test -n "$libs"     && LIBS="$libs"
test -n "$ldflags"  && LDFLAGS="$ldflags"

eval set x "$quoted_arguments"; shift

test "$extra_verbose" = "yes" && verbose=yes

test -n "$with_x" && with_x11="$with_x"

if test "$with_purify" = "yes" -o "$with_quantify" = "yes"; then
  test "$with_system_malloc" = "default" && with_system_malloc=yes
fi

if test -n "$gung_ho"; then
  test -z "$use_minimal_tagbits" && use_minimal_tagbits="$gung_ho"
  test -z "$use_indexed_lrecord_implementation" && \
    use_indexed_lrecord_implementation="$gung_ho"
fi
if test "$use_minimal_tagbits" = "no"; then
  test "$with_dlmalloc" = "yes" && \
    (echo "$progname: Usage error:"
echo " " "--with-dlmalloc requires --use-minimal-tagbits"
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1
  with_dlmalloc=no
fi



if test "$with_cde $with_tooltalk" = "yes no"; then
  (echo "$progname: Usage error:"
echo " " "--with-cde requires --with-tooltalk"
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1
elif test "$with_tooltalk" = "no" ; then with_cde=no
elif test "$with_cde" = "yes"; then with_tooltalk=yes
fi


case "$srcdir" in

    "" )
    for dir in "`echo $0 | sed 's|//|/|' | sed 's|/[^/]*$||'`" "." ".." ; do
      if test -f "$dir/src/lisp.h" -a \
	      -f "$dir/lisp/version.el" ; then
        srcdir="$dir"
        break
      fi
    done
    if test -z "$srcdir" ; then
      (echo "$progname: Usage error:"
echo " " "Neither the current directory nor its parent seem to
  contain the XEmacs sources.  If you do not want to build XEmacs in its
  source tree, you should run \`$progname' in the directory in which
  you wish to build XEmacs, using the \`--srcdir' option to say where the
  sources may be found."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1
    fi
  ;;

    * )
    if test ! -f "$srcdir/src/lisp.h" -o \
	    ! -f "$srcdir/lisp/version.el" ; then
      (echo "$progname: Usage error:"
echo " " "The directory specified with the \`--srcdir' option,
  \`$srcdir', doesn't seem to contain the XEmacs sources.  You should
  either run the \`$progname' script at the top of the XEmacs source
  tree, or use the \`--srcdir' option to specify the XEmacs source directory."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1
    fi
  ;;
esac

if test -z "$configuration"; then
    configuration=`${CONFIG_SHELL-/bin/sh} $srcdir/config.guess`
  if test -z "$configuration"; then
    (echo "$progname: Usage error:"
echo " " "XEmacs has not been ported to this host type.
Try explicitly specifying the CONFIGURATION when rerunning configure."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1
  fi
fi

echo $ac_n "checking whether ln -s works""... $ac_c" 1>&6
echo "configure:785: checking whether ln -s works" >&5

rm -f conftestdata
if ln -s X conftestdata 2>/dev/null
then
  rm -f conftestdata
  ac_cv_prog_LN_S="ln -s"
else
  ac_cv_prog_LN_S=ln
fi
LN_S="$ac_cv_prog_LN_S"
if test "$ac_cv_prog_LN_S" = "ln -s"; then
  echo "$ac_t""yes" 1>&6
else
  echo "$ac_t""no" 1>&6
fi


for dir in lisp etc man info; do
  if test ! -d "$dir" ; then
    echo Making symbolic link to "$srcdir/$dir"
    ${LN_S} "$srcdir/$dir" "$dir"
  fi
done

absolute_pwd="`pwd`";
if test -n "$PWD" -a "`cd $PWD && pwd`" = "$absolute_pwd"
then blddir="$PWD"
else blddir="$absolute_pwd"
fi


case "$srcdir" in
  /* ) ;;
  .  ) srcdir="$blddir" ;;
  *  ) srcdir="`cd $srcdir && pwd`" ;;
esac

if test `pwd` != `sh -c cd $srcdir && pwd`  \
   && test -f "$srcdir/src/config.h"; then
  (echo "$progname: WARNING: The directory tree \`$srcdir' is being used"
   echo "   as a build directory right now; it has been configured in its own"
   echo "   right.  To configure in another directory as well, you MUST"
   echo "   use GNU make.  If you do not have GNU make, then you must"
   echo "   now do \`make distclean' in $srcdir,"
   echo "   and then run $progname again.") >&2
  extrasub='/^VPATH[	 ]*=/c\
vpath %.c $(srcdir)\
vpath %.h $(srcdir)\
vpath %.y $(srcdir)\
vpath %.l $(srcdir)\
vpath %.s $(srcdir)\
vpath %.in $(srcdir)'
fi

. "$srcdir/version.sh" || exit 1;
if test -n "$emacs_beta_version"; then beta=yes; else beta=no; fi
: "${extra_verbose=$beta}"
version="${emacs_major_version}.${emacs_minor_version}"
{ test "$extra_verbose" = "yes" && cat << EOF
    Defining EMACS_MAJOR_VERSION = $emacs_major_version
EOF
cat >> confdefs.h <<EOF
#define EMACS_MAJOR_VERSION $emacs_major_version
EOF
}

{ test "$extra_verbose" = "yes" && cat << EOF
    Defining EMACS_MINOR_VERSION = $emacs_minor_version
EOF
cat >> confdefs.h <<EOF
#define EMACS_MINOR_VERSION $emacs_minor_version
EOF
}

if test -n "$emacs_beta_version"; then
  version="${version}-b${emacs_beta_version}"
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining EMACS_BETA_VERSION = $emacs_beta_version
EOF
cat >> confdefs.h <<EOF
#define EMACS_BETA_VERSION $emacs_beta_version
EOF
}

fi
{ test "$extra_verbose" = "yes" && cat << EOF
    Defining XEMACS_CODENAME = "$xemacs_codename"
EOF
cat >> confdefs.h <<EOF
#define XEMACS_CODENAME "$xemacs_codename"
EOF
}

{ test "$extra_verbose" = "yes" && cat << EOF
    Defining EMACS_VERSION = "$version"
EOF
cat >> confdefs.h <<EOF
#define EMACS_VERSION "$version"
EOF
}


if test "$with_infodock" = "yes"; then
  if test ! -f ../ID-INSTALL; then
    echo "Cannot build InfoDock without InfoDock sources"
    with_infodock=no
  fi
fi

if test "$with_infodock" = "yes"; then
      { test "$extra_verbose" = "yes" && cat << EOF
    Defining INFODOCK_MAJOR_VERSION = $infodock_major_version
EOF
cat >> confdefs.h <<EOF
#define INFODOCK_MAJOR_VERSION $infodock_major_version
EOF
}

  { test "$extra_verbose" = "yes" && cat << EOF
    Defining INFODOCK_MINOR_VERSION = $infodock_minor_version
EOF
cat >> confdefs.h <<EOF
#define INFODOCK_MINOR_VERSION $infodock_minor_version
EOF
}

  { test "$extra_verbose" = "yes" && cat << EOF
    Defining INFODOCK_BUILD_VERSION = $infodock_build_version
EOF
cat >> confdefs.h <<EOF
#define INFODOCK_BUILD_VERSION $infodock_build_version
EOF
}

  version=${infodock_major_version}.${infodock_minor_version}.${infodock_build_version}
  PROGNAME=infodock
  CPPFLAGS="$CPPFLAGS -DINFODOCK"
else
  PROGNAME=xemacs
fi

if test -n "$emacs_beta_version"; then beta=yes; else beta=no; fi
test "${error_check_extents=$beta}"   = yes && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining ERROR_CHECK_EXTENTS
EOF
cat >> confdefs.h <<\EOF
#define ERROR_CHECK_EXTENTS 1
EOF
}

test "${error_check_typecheck=$beta}" = yes && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining ERROR_CHECK_TYPECHECK
EOF
cat >> confdefs.h <<\EOF
#define ERROR_CHECK_TYPECHECK 1
EOF
}

test "${error_check_bufpos=$beta}"    = yes && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining ERROR_CHECK_BUFPOS
EOF
cat >> confdefs.h <<\EOF
#define ERROR_CHECK_BUFPOS 1
EOF
}

test "${error_check_gc=$beta}"        = yes && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining ERROR_CHECK_GC
EOF
cat >> confdefs.h <<\EOF
#define ERROR_CHECK_GC 1
EOF
}

test "${error_check_malloc=$beta}"    = yes && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining ERROR_CHECK_MALLOC
EOF
cat >> confdefs.h <<\EOF
#define ERROR_CHECK_MALLOC 1
EOF
}

if test "${debug:=$beta}" = "yes"; then
  use_assertions=yes memory_usage_stats=yes
  extra_objs="$extra_objs debug.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"debug.o\""
 fi
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining DEBUG_XEMACS
EOF
cat >> confdefs.h <<\EOF
#define DEBUG_XEMACS 1
EOF
}

fi
test "$use_assertions"     = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining USE_ASSERTIONS
EOF
cat >> confdefs.h <<\EOF
#define USE_ASSERTIONS 1
EOF
}

test "$memory_usage_stats" = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining MEMORY_USAGE_STATS
EOF
cat >> confdefs.h <<\EOF
#define MEMORY_USAGE_STATS 1
EOF
}



echo $ac_n "checking "host system type"""... $ac_c" 1>&6
echo "configure:1001: checking "host system type"" >&5
internal_configuration=`echo $configuration | sed 's/-\(workshop\)//'`
canonical=`${CONFIG_SHELL-/bin/sh} $srcdir/config.sub "$internal_configuration"`
configuration=`echo "$configuration" | sed 's/^\([^-][^-]*-[^-][^-]*-[^-][^-]*\)-.*$/\1/'`
canonical=`echo "$canonical" | sed 's/^\([^-][^-]*-[^-][^-]*-[^-][^-]*\)-.*$/\1/'`
echo "$ac_t""$configuration" 1>&6





machine='' opsys=''

case "$canonical" in
  sparc-*-*        ) machine=sparc ;;
  alpha*-*-*       ) machine=alpha ;;
  vax-*-*          ) machine=vax ;;
  mips-dec-*       ) machine=pmax ;;
  mips-sgi-*       ) machine=iris4d ;;
  romp-ibm-*       ) machine=ibmrt ;;
  rs6000-ibm-aix*  ) machine=ibmrs6000 ;;
  powerpc-ibm-aix* ) machine=ibmrs6000 ;;
  powerpc*-*       ) machine=powerpc ;;
  hppa-*-*         ) machine=hp800 ;;
  m88k-dg-*        ) machine=aviion ;;
  m68*-sony-*      ) machine=news ;;
  mips-sony-*      ) machine=news-risc ;;
  clipper-*        ) machine=clipper ;;
  arm-*            ) machine=arm ;;
  ns32k-*          ) machine=ns32000 ;;
esac

case "$canonical" in
  *-*-linux*    ) opsys=linux ;;
  *-*-netbsd*   ) opsys=netbsd ;;
  *-*-openbsd*	) opsys=openbsd ;;
  *-*-nextstep* ) opsys=nextstep ;;
  *-*-vms       ) opsys=vms ;;

    *-dec-osf1.3 | *-dec-osf2* ) opsys=decosf1-3 ;;
  *-dec-osf1.2 | *-dec-osf1* ) opsys=decosf1-2 ;;
  *-dec-osf3.[2-9]         ) opsys=decosf3-2 ;;
  *-dec-osf3*                ) opsys=decosf3-1 ;;
  *-dec-osf4*                ) opsys=decosf4-0 ;;

    *-*-ultrix[0-3].* | *-*-ultrix4.0* ) opsys=bsd4-2 ;;
  *-*-ultrix4.[12]* ) opsys=bsd4-3 ;;
  *-*-ultrix* )         opsys=ultrix4-3 ;;

    *-*-aix3.1*  ) opsys=aix3-1	;;
  *-*-aix3.2.5 ) opsys=aix3-2-5	;;
  *-*-aix3*    ) opsys=aix3-2	;;
  *-*-aix4.0*  ) opsys=aix4	;;
  *-*-aix4.1*  ) opsys=aix4-1	;;
  *-*-aix4*    ) opsys=aix4-2	;;

    *-gnu* )			opsys=gnu    ;;
  *-*-bsd4.[01] )		opsys=bsd4-1 ;;
  *-*-bsd4.2 )			opsys=bsd4-2 ;;
  *-*-bsd4.3 )			opsys=bsd4-3 ;;
  *-*-aos4.2 )			opsys=bsd4-2 ;;
  *-*-aos*   )			opsys=bsd4-3 ;;
  *-*-sysv0    | *-*-sysvr0 )	opsys=usg5-0 ;;
  *-*-sysv2    | *-*-sysvr2 )	opsys=usg5-2 ;;
  *-*-sysv2.2  | *-*-sysvr2.2 )	opsys=usg5-2-2 ;;
  *-*-sysv3*   | *-*-sysvr3* )	opsys=usg5-3 ;;
  *-*-sysv4.1* | *-*-sysvr4.1* )opsys=usg5-4 NON_GNU_CPP=/usr/lib/cpp ;;
  *-*-sysv4.[2-9]* | *-sysvr4.[2-9]* )
	if test -z "$NON_GNU_CPP" ; then
	  for prog in "/usr/ccs/lib/cpp" "/lib/cpp"; do
	    if test -f "$prog"; then NON_GNU_CPP="$prog"; break; fi
	  done
	fi
	opsys=usg5-4-2 ;;
    *-sysv4* | *-sysvr4* )	opsys=usg5-4 ;;
    *-*-mach_bsd4.3* )          opsys=mach-bsd4-3 ;;
esac

case "$canonical" in

    *-*-netbsd* )
    case "$canonical" in
      i[3-9]86-*-netbsd*) machine=intel386 ;;
      hp300-*-netbsd* | amiga-*-netbsd* | sun3-*-netbsd* | mac68k-*-netbsd* | da30-*-netbsd* | m68k-*-netbsd* )
                                            machine=hp9000s300 ;;
      pc532-*-netbsd* | ns32k-*-netbsd* )  machine=ns32000 ;;
      pmax-*-netbsd*  | mips-*-netbsd*  )  machine=pmax ;;
    esac
  ;;

    *-*-openbsd* )
    case "${canonical}" in
      i386-*-openbsd*)		machine=intel386 ;;
      m68k-*-openbsd*)		machine=hp9000s300 ;;
      mipsel-*-openbsd*)	machine=pmax ;;
     esac
   ;;

    arm-acorn-riscix1.1* ) machine=acorn opsys=riscix1-1 ;;
  arm-acorn-riscix1.2* | arm-acorn-riscix ) machine=acorn opsys=riscix1-2 ;;

    fx80-alliant-* ) machine=alliant4     opsys=bsd4-2 ;;
  i860-alliant-* ) machine=alliant-2800 opsys=bsd4-3 ;;

    m68*-altos-sysv* ) machine=altos opsys=usg5-2 ;;

    580-amdahl-sysv* ) machine=amdahl opsys=usg5-2-2 ;;

    m68*-apollo-* ) machine=apollo opsys=bsd4-3 ;;

    we32k-att-sysv* ) machine=att3b opsys=usg5-2-2 ;;

    m68*-att-sysv* ) machine=7300 opsys=usg5-2-2 ;;

    rs6000-bull-bosx* ) machine=ibmrs6000 opsys=aix3-2 ;; # dpx20
  m68*-bull-sysv3*  ) machine=dpx2      opsys=usg5-3 ;; # dpx2
  m68*-bull-sysv2*  ) machine=sps7      opsys=usg5-2 ;; # sps7

  
    celerity-celerity-bsd* ) machine=celerity opsys=bsd4-2 ;;

    *-convex-bsd* | *-convex-convexos* )
    machine=convex opsys=bsd4-3
    NON_GNU_CPP="cc -E -P"
  ;;

    i[3-9]86-cubix-sysv* ) machine=intel386 opsys=usg5-3 ;;

    i586-dg-dgux*R4*   | i586-dg-dgux5.4.4* ) machine=aviion opsys=dgux5-4r4 ;;
  m88k-dg-dgux5.4R3* | m88k-dg-dgux5.4.3* ) opsys=dgux5-4r3 ;;
  m88k-dg-dgux5.4R2* | m88k-dg-dgux5.4.2* ) opsys=dgux5-4r2 ;;
  m88k-dg-dgux* 			  ) opsys=dgux	   ;;

    m68k-motorola-sysv* | m68000-motorola-sysv* ) machine=delta opsys=usg5-3 ;;
  m88k-motorola-sysv4* )
                    machine=delta88k opsys=usg5-4-2
  ;;
  m88k-motorola-sysv* | m88k-motorola-m88kbcs* ) machine=delta88k opsys=usg5-3 ;;

    m68*-dual-sysv*    ) machine=dual opsys=usg5-2   ;;
  m68*-dual-uniplus* ) machine=dual opsys=unipl5-2 ;;

    ns16k-encore-bsd* ) machine=ns16000 opsys=umax ;;

    pn-gould-bsd4.2* ) machine=gould     opsys=bsd4-2 ;;
  pn-gould-bsd4.3* ) machine=gould     opsys=bsd4-3 ;;
  np1-gould-bsd* )   machine=gould-np1 opsys=bsd4-3 ;;

      m88k-harris-cxux* )
        case "`uname -r`" in
       [56].[0-9] ) machine=nh4000 opsys=cxux  ;;
       [7].[0-9]  ) machine=nh4000 opsys=cxux7 ;;
    esac
    NON_GNU_CPP="/lib/cpp"
  ;;
    m68k-harris-cxux* ) machine=nh3000 opsys=cxux ;;
    powerpc-harris-powerunix ) machine=nh6000 opsys=powerunix NON_GNU_CPP="cc -Xo -E -P" ;;

    xps*-honeywell-sysv* ) machine=xps100 opsys=usg5-2 ;;

    m68*-hp-bsd* ) machine=hp9000s300 opsys=bsd4-3 ;;

    *-hp-hpux* )
        case "$canonical" in
      m68*  ) machine=hp9000s300 ;;
      hppa* ) machine=hp800      ;;
    esac

    case "$canonical" in
      *-hp-hpux7*  )  opsys=hpux   ;;
      *-hp-hpux8*  )  opsys=hpux8  ;;
      *-hp-hpux9*  )  opsys=hpux9  ;;
      *-hp-hpux10* )  opsys=hpux10 ;;
      *-hp-hpux11* )  opsys=hpux11 ;;
      *            )  opsys=hpux   ;;
    esac

        case "$opsys" in hpux9 | hpux10 ) extra_objs="$extra_objs strcat.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"strcat.o\""
 fi ;; esac

    if test "$opsys" = "hpux10" -o "$opsys" = "hpux11"; then \
	ansi_flag="-Ae"; else ansi_flag="-Aa"; fi
    NON_GNU_CC="cc $ansi_flag" NON_GNU_CPP="cc $ansi_flag -E"

    case "$canonical" in *-hp-hpux*shr* ) opsys="${opsys}-shr" ;; esac
  ;;

    orion-orion-bsd*   ) machine=orion    opsys=bsd4-2 ;;
  clipper-orion-bsd* ) machine=orion105 opsys=bsd4-2 ;;

    i[3-9]86-ibm-aix1.1* ) machine=ibmps2-aix opsys=usg5-2-2 ;;
  i[3-9]86-ibm-aix1.[23]* | i[3-9]86-ibm-aix* ) machine=ibmps2-aix opsys=usg5-3 ;;
  i370-ibm-aix*) machine=ibm370aix opsys=usg5-3 ;;
  romp-ibm-aos*    ) opsys=bsd4-3 ;;
  romp-ibm-bsd*    ) opsys=bsd4-3 ;;
  romp-ibm-mach*   ) opsys=mach-bsd4-3 ;;

    m68*-isi-bsd4.2* ) machine=isi-ov opsys=bsd4-2 ;;
  m68*-isi-bsd4.3* ) machine=isi-ov opsys=bsd4-3 ;;

    i[3-9]86-intsys-sysv* ) machine=is386 opsys=usg5-2-2 ;;

    i[3-9]86-prime-sysv* ) machine=i386 opsys=usg5-3 ;;

    i[3-9]86-sequent-bsd* ) machine=symmetry opsys=bsd4-3 ;;

    i[3-9]86-sequent-ptx* ) machine=sequent-ptx opsys=ptx NON_GNU_CPP="/lib/cpp" ;;

      i[3-9]86-ncr-sysv* ) machine=ncr386 opsys=usg5-4-2 ;;

    i860-intel-osf1* ) machine=paragon opsys=osf1 NON_GNU_CPP=/usr/mach/lib/cpp ;;

    i860-*-sysv4* ) machine=i860 opsys=usg5-4 NON_GNU_CC="/bin/cc" NON_GNU_CPP="/usr/ccs/lib/cpp" ;;

    m68*-masscomp-rtu* ) machine=masscomp opsys=rtu ;;

    m68*-megatest-bsd* ) machine=mega68 opsys=bsd4-2 ;;

        mips-mips-usg* ) machine=mips4 ;;
  mips-mips-riscos4 )
    machine=mips4
    NON_GNU_CC="cc -systype bsd43"
    NON_GNU_CPP="cc -systype bsd43 -E"
    case "$canonical" in
      mips-mips-riscos4* ) opsys=bsd4-3  ;;
      mips-mips-riscos5* ) opsys=riscos5 ;;
    esac
  ;;
  mips-mips-bsd* ) machine=mips opsys=bsd4-3 ;;
  mips-mips-*    ) machine=mips opsys=usg5-2-2 ;;

    m68*-next-* | m68k-*-nextstep* ) machine=m68k opsys=nextstep ;;

    ns32k-ns-genix* ) machine=ns32000 opsys=usg5-2 ;;

    m68*-ncr-sysv2* | m68*-ncr-sysvr2* ) machine=tower32   opsys=usg5-2-2 ;;
  m68*-ncr-sysv3* | m68*-ncr-sysvr3* ) machine=tower32v3 opsys=usg5-3 ;;

    m68*-nixdorf-sysv* ) machine=targon31 opsys=usg5-2-2 ;;

    m68*-nu-sysv* ) machine=nu opsys=usg5-2 ;;

    m68*-plexus-sysv* ) machine=plexus opsys=usg5-2 ;;

    pyramid-pyramid-bsd* ) machine=pyramid opsys=bsd4-2 ;;

    ns32k-sequent-bsd4.2* ) machine=sequent opsys=bsd4-2 ;;
  ns32k-sequent-bsd4.3* ) machine=sequent opsys=bsd4-3 ;;

    mips-siemens-sysv* | mips-sni-sysv*)
    machine=mips-siemens opsys=usg5-4
    NON_GNU_CC=/usr/ccs/bin/cc
    NON_GNU_CPP=/usr/ccs/lib/cpp
  ;;

    mips-nec-sysv*)
    machine=mips-nec
    NON_GNU_CC=/usr/ccs/bin/cc
    NON_GNU_CPP=/usr/ccs/lib/cpp
  ;;

      m68*-sgi-iris3.5* ) machine=irist opsys=iris3-5 ;;
  m68*-sgi-iris3.6* | m68*-sgi-iris*) machine=irist opsys=iris3-6 ;;
    mips-sgi-irix3.*    ) opsys=irix3-3 ;;
  mips-sgi-irix4.*    ) opsys=irix4-0 ;;
  mips-sgi-irix6*     ) opsys=irix6-0 ;;
  mips-sgi-irix5.1*   ) opsys=irix5-1 ;;
  mips-sgi-irix5.2*   ) opsys=irix5-2 ;;
  mips-sgi-irix5.*    ) opsys=irix5-3 ;;
  mips-sgi-irix*      ) opsys=irix5-0 ;;

    *-sony-newsos[34]* | *-sony-news[34]* ) opsys=bsd4-3 ;;
  *-sony-news* ) opsys=newsos5 ;;

    m68*-stride-sysv* ) machine=stride opsys=usg5-2 ;;

    *-*-solaris* | *-*-sunos* | *-sun-mach* | *-sun-bsd* )
        case "$canonical" in
      m68*-sunos1* )	         machine=sun1     ;;
      m68*-sunos2* )	         machine=sun2     ;;
      m68* )		         machine=sun3     ;;
      i*86*-sun-sunos[34]* )   machine=sun386   ;;
      i*86-*-* )	         machine=intel386 ;;
      rs6000* )                  machine=rs6000   ;;
    esac

        case "$canonical" in *-sunos5*)
      canonical=`echo $canonical | sed -e s/sunos5/solaris2/`;;
    esac

                    case "$canonical" in
      *-sunos4* )
	#test -f /usr/lib/cpp     && NON_GNU_CPP=/usr/lib/cpp ;;
	: ;;
      *-solaris2* )
	#test -f /usr/ccs/lib/cpp && NON_GNU_CPP=/usr/ccs/lib/cpp
	RANLIB=':' ;;
    esac

    case "$canonical" in
      *-solaris*	  )
	opsys=sol2
	os_release=`uname -r | sed -e 's/^\([0-9]\)\.\([0-9]\).*/\1\2/'`
	{ test "$extra_verbose" = "yes" && cat << EOF
    Defining OS_RELEASE = $os_release
EOF
cat >> confdefs.h <<EOF
#define OS_RELEASE $os_release
EOF
}
 ;;

            i*86-*-sunos4*      ) opsys=sunos4-0	;;
      *-sunos4.0*	  ) opsys=sunos4-0	;;
      *-sunos4.1.2*	  ) opsys=sunos4-1-2	;;
      *-sunos4.1.3*	  ) opsys=sunos4-1-3	;;
      *-sunos4.1.[4-9]* ) opsys=sunos4-1-4	;;
      *-sunos4* | *-sunos ) opsys=sunos4-1	;;
      *-mach*		  ) opsys=mach-bsd4-3	;;
      *			  ) opsys=bsd4-2	;;
    esac

    case "$canonical" in *-sunos4*shr* ) opsys="${opsys}-shr" ;; esac

        test "$opsys $CC" = "sol2 /usr/ucb/cc" && CC=""
  ;;

    m68*-tadpole-sysv* ) machine=tad68k opsys=usg5-3 ;;

    tahoe-tahoe-bsd4.2* ) machine=tahoe opsys=bsd4-2 ;;
  tahoe-tahoe-bsd4.3* ) machine=tahoe opsys=bsd4-3 ;;

    mips-tandem-sysv* ) machine=tandem-s2 opsys=usg5-3 ;;

    m88k-tektronix-sysv3* ) machine=tekxd88 opsys=usg5-3 ;;

    ns16k-tektronix-bsd* ) machine=ns16000 opsys=bsd4-2 ;;
      m68*-tektronix-bsd* ) machine=tek4300 opsys=bsd4-3 ;;

    titan-titan-sysv* ) machine=titan opsys=usg5-3 ;;

    m68*-unisys-uniplus* ) machine=ustation opsystem=unipl5-2 ;;

    vax-dec-* )
    case "$canonical" in
      *-sysv[01]* | *-sysvr[01]* ) 	opsys=usg5-0 ;;
      *-sysv2* | *-sysvr2* )		opsys=usg5-2 ;;
      *-mach* )				opsys=mach-bsd4-3 ;;
    esac
  ;;

    ns16k-whitechapel-* ) machine=mg1 ;;

    m68*-wicat-sysv* ) machine=wicat opsys=usg5-2 ;;

    i[3-9]86-*-* )
    machine=intel386
    case "$canonical" in
      *-isc1.* | *-isc2.[01]* ) opsys=386-ix ;;
      *-isc2.2* )		opsys=isc2-2 ;;
      *-isc4.0* )		opsys=isc4-0 ;;
      *-isc4.* )		opsys=isc4-1
				GCC_TEST_OPTIONS=-posix
				NON_GCC_TEST_OPTIONS=-Xp
				;;
      *-isc* )			opsys=isc3-0 ;;
      *-esix5* )		opsys=esix5r4 NON_GNU_CPP=/usr/lib/cpp ;;
      *-esix* )			opsys=esix ;;
      *-mach* )			opsys=mach-bsd4-3 ;;
      *-xenix* )		opsys=xenix ;;
      *-sco3.2v4* )		opsys=sco4 NON_GNU_CPP=/lib/cpp  ;;
      *-bsd386* | *-bsdi1* )	opsys=bsd386 ;;
      *-bsdi3* )		opsys=bsdos3 ;;
      *-bsdi2.1* )		opsys=bsdos2-1 ;;
      *-bsdi2* )		opsys=bsdos2 ;;
      *-sco3.2v5* )		opsys=sco5 ;
							if test "$dynamic" = "yes" ; then
		NON_GNU_CPP="/lib/cpp -D_XOPEN_SOURCE -D_SCO_ELF"  ;
	else
		NON_GNU_CPP="/lib/cpp -D_XOPEN_SOURCE"  ;
	fi ;;
      *-386bsd* )	        opsys=386bsd ;;
      *-freebsd* )		opsys=freebsd ;;
      *-nextstep* )		opsys=nextstep ;;
      *-pc-cygwin32 )		opsys=cygwin32 ;;
          esac
  ;;

    m68k-*-linux* ) machine=m68k opsys=linux ;;

esac

if test -z "$machine" -o -z "$opsys"; then
  (echo "$progname: XEmacs hasn't been ported to \`$canonical' systems."
   echo "$progname: Check \`etc/MACHINES' for recognized configuration names."
  ) >&2
  exit 1
fi

if test -z "$dynamic"; then
  case "$opsys" in
    hpux* | sunos4* ) dynamic=no ;;
    *) dynamic=yes ;;
  esac
fi
if test "$dynamic" = "yes"; then
  case "$opsys" in
    hpux* | sunos4* | sco5 ) opsys="${opsys}-shr" ;;
    decosf* ) ld_call_shared="-call_shared" ;;
  esac
else   case "$opsys" in
    sol2 )
      echo "Static linking is not supported on Solaris 2."
      echo "Rerun configure without specifying --dynamic=no."
      exit 1 ;;
    linux   ) ld_call_shared="-Bstatic" ;;
    decosf* ) ld_call_shared="-non_shared" ;;
  esac
fi

case "$opsys" in aix*) NON_GNU_CC=xlc ;; esac

stack_trace_eye_catcher=`echo ${PROGNAME}_${version}_${canonical} | sed 'y/.-/__/'`
{ test "$extra_verbose" = "yes" && cat << EOF
    Defining STACK_TRACE_EYE_CATCHER = $stack_trace_eye_catcher
EOF
cat >> confdefs.h <<EOF
#define STACK_TRACE_EYE_CATCHER $stack_trace_eye_catcher
EOF
}


machfile="m/${machine}.h"
opsysfile="s/${opsys}.h"


test "$with_sparcworks" = "yes" && with_workshop=yes # compatibility alias
if test "$with_workshop $with_tooltalk" = "yes no"; then
  (echo "$progname: Usage error:"
echo " " "--with-workshop requires --with-tooltalk"
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1
elif test "$with_tooltalk" = "no" ; then with_workshop=no
elif test "$with_workshop" = "yes"; then with_tooltalk=yes
fi

if test "$with_workshop" = "yes"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining SUNPRO
EOF
cat >> confdefs.h <<\EOF
#define SUNPRO 1
EOF
}

  extra_objs="$extra_objs sunpro.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"sunpro.o\""
 fi
fi

if test "$with_clash_detection" = "yes"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining CLASH_DETECTION
EOF
cat >> confdefs.h <<\EOF
#define CLASH_DETECTION 1
EOF
}

  extra_objs="$extra_objs filelock.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"filelock.o\""
 fi
fi

test -n "$compiler" && CC="$compiler"
if test "$with_gcc" = "no"; then   case "$CC" in "" | *gcc* ) CC="${NON_GNU_CC-cc}" ;; esac
fi

test "${cflags-unset}" != unset && CFLAGS="$cflags"
if test "${CFLAGS-unset}" != unset
  then cflags_specified=yes;
  else cflags_specified=no;
fi

xe_save_CFLAGS="$CFLAGS"

# Extract the first word of "gcc", so it can be a program name with args.
set dummy gcc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1490: checking for $ac_word" >&5

if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CC="gcc"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

if test -z "$CC"; then
  # Extract the first word of "cc", so it can be a program name with args.
set dummy cc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1516: checking for $ac_word" >&5

if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  ac_prog_rejected=no
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      if test "$ac_dir/$ac_word" = "/usr/ucb/cc"; then
        ac_prog_rejected=yes
	continue
      fi
      ac_cv_prog_CC="cc"
      break
    fi
  done
  IFS="$ac_save_ifs"
if test $ac_prog_rejected = yes; then
  # We found a bogon in the path, so make sure we never use it.
  set dummy $ac_cv_prog_CC
  shift
  if test $# -gt 0; then
    # We chose a different compiler from the bogus one.
    # However, it has the same basename, so the bogon will be chosen
    # first if we set CC to just the basename; use the full file name.
    shift
    set dummy "$ac_dir/$ac_word" "$@"
    shift
    ac_cv_prog_CC="$@"
  fi
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  test -z "$CC" && { echo "configure: error: no acceptable cc found in \$PATH" 1>&2; exit 1; }
fi

echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works""... $ac_c" 1>&6
echo "configure:1561: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5

ac_ext=c
xe_cppflags='$CPPFLAGS $c_switch_site $c_switch_machine $c_switch_system $c_switch_x_site $X_CFLAGS'
xe_ldflags='$LDFLAGS $ld_switch_site $ld_switch_machine $ld_switch_system $ld_switch_x_site $ld_switch_run'
xe_libs='$ld_call_shared $xe_check_libs $X_EXTRA_LIBS $libs_x $X_PRE_LIBS $LIBS $libs_machine $libs_system $libs_standard'
ac_cpp='$CPP '"$xe_cppflags"
ac_compile='${CC-cc} -c $CFLAGS '"$xe_cppflags"' conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest $CFLAGS '"$xe_cppflags $xe_ldflags"' conftest.$ac_ext '"$xe_libs"' 1>&5'
cross_compiling=no

cat > conftest.$ac_ext <<EOF
#line 1573 "configure"
#include "confdefs.h"
main(){return(0);}
EOF
if { (eval echo configure:1577: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  ac_cv_prog_cc_works=yes
  # If we can't run a trivial program, we are probably using a cross compiler.
  if (./conftest; exit) 2>/dev/null; then
    ac_cv_prog_cc_cross=no
  else
    ac_cv_prog_cc_cross=yes
  fi
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  ac_cv_prog_cc_works=no
fi
rm -fr conftest*

echo "$ac_t""$ac_cv_prog_cc_works" 1>&6
if test $ac_cv_prog_cc_works = no; then
  { echo "configure: error: installation or configuration problem: C compiler cannot create executables." 1>&2; exit 1; }
fi
echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
echo "configure:1597: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
echo "$ac_t""$ac_cv_prog_cc_cross" 1>&6
cross_compiling=$ac_cv_prog_cc_cross

echo $ac_n "checking whether we are using GNU C""... $ac_c" 1>&6
echo "configure:1602: checking whether we are using GNU C" >&5

cat > conftest.c <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1609: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
  ac_cv_prog_gcc=yes
else
  ac_cv_prog_gcc=no
fi

echo "$ac_t""$ac_cv_prog_gcc" 1>&6

if test $ac_cv_prog_gcc = yes; then
  GCC=yes
  ac_test_CFLAGS="${CFLAGS+set}"
  ac_save_CFLAGS="$CFLAGS"
  CFLAGS=
  echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
echo "configure:1623: checking whether ${CC-cc} accepts -g" >&5

echo 'void f(){}' > conftest.c
if test -z "`${CC-cc} -g -c conftest.c 2>&1`"; then
  ac_cv_prog_cc_g=yes
else
  ac_cv_prog_cc_g=no
fi
rm -f conftest*


echo "$ac_t""$ac_cv_prog_cc_g" 1>&6
  if test "$ac_test_CFLAGS" = set; then
    CFLAGS="$ac_save_CFLAGS"
  elif test $ac_cv_prog_cc_g = yes; then
    CFLAGS="-g -O2"
  else
    CFLAGS="-O2"
  fi
else
  GCC=
  test "${CFLAGS+set}" = set || CFLAGS="-g"
fi
 
if   test "$with_gcc" = "no"  -a "$GCC" = "yes"; then
  CC=${NON_GNU_CC-cc}
  # Extract the first word of "gcc", so it can be a program name with args.
set dummy gcc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1652: checking for $ac_word" >&5

if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CC="gcc"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

if test -z "$CC"; then
  # Extract the first word of "cc", so it can be a program name with args.
set dummy cc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1678: checking for $ac_word" >&5

if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  ac_prog_rejected=no
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      if test "$ac_dir/$ac_word" = "/usr/ucb/cc"; then
        ac_prog_rejected=yes
	continue
      fi
      ac_cv_prog_CC="cc"
      break
    fi
  done
  IFS="$ac_save_ifs"
if test $ac_prog_rejected = yes; then
  # We found a bogon in the path, so make sure we never use it.
  set dummy $ac_cv_prog_CC
  shift
  if test $# -gt 0; then
    # We chose a different compiler from the bogus one.
    # However, it has the same basename, so the bogon will be chosen
    # first if we set CC to just the basename; use the full file name.
    shift
    set dummy "$ac_dir/$ac_word" "$@"
    shift
    ac_cv_prog_CC="$@"
  fi
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  test -z "$CC" && { echo "configure: error: no acceptable cc found in \$PATH" 1>&2; exit 1; }
fi

echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works""... $ac_c" 1>&6
echo "configure:1723: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5

ac_ext=c
xe_cppflags='$CPPFLAGS $c_switch_site $c_switch_machine $c_switch_system $c_switch_x_site $X_CFLAGS'
xe_ldflags='$LDFLAGS $ld_switch_site $ld_switch_machine $ld_switch_system $ld_switch_x_site $ld_switch_run'
xe_libs='$ld_call_shared $xe_check_libs $X_EXTRA_LIBS $libs_x $X_PRE_LIBS $LIBS $libs_machine $libs_system $libs_standard'
ac_cpp='$CPP '"$xe_cppflags"
ac_compile='${CC-cc} -c $CFLAGS '"$xe_cppflags"' conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest $CFLAGS '"$xe_cppflags $xe_ldflags"' conftest.$ac_ext '"$xe_libs"' 1>&5'
cross_compiling=no

cat > conftest.$ac_ext <<EOF
#line 1735 "configure"
#include "confdefs.h"
main(){return(0);}
EOF
if { (eval echo configure:1739: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  ac_cv_prog_cc_works=yes
  # If we can't run a trivial program, we are probably using a cross compiler.
  if (./conftest; exit) 2>/dev/null; then
    ac_cv_prog_cc_cross=no
  else
    ac_cv_prog_cc_cross=yes
  fi
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  ac_cv_prog_cc_works=no
fi
rm -fr conftest*

echo "$ac_t""$ac_cv_prog_cc_works" 1>&6
if test $ac_cv_prog_cc_works = no; then
  { echo "configure: error: installation or configuration problem: C compiler cannot create executables." 1>&2; exit 1; }
fi
echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
echo "configure:1759: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
echo "$ac_t""$ac_cv_prog_cc_cross" 1>&6
cross_compiling=$ac_cv_prog_cc_cross

echo $ac_n "checking whether we are using GNU C""... $ac_c" 1>&6
echo "configure:1764: checking whether we are using GNU C" >&5

cat > conftest.c <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1771: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
  ac_cv_prog_gcc=yes
else
  ac_cv_prog_gcc=no
fi

echo "$ac_t""$ac_cv_prog_gcc" 1>&6

if test $ac_cv_prog_gcc = yes; then
  GCC=yes
  ac_test_CFLAGS="${CFLAGS+set}"
  ac_save_CFLAGS="$CFLAGS"
  CFLAGS=
  echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
echo "configure:1785: checking whether ${CC-cc} accepts -g" >&5

echo 'void f(){}' > conftest.c
if test -z "`${CC-cc} -g -c conftest.c 2>&1`"; then
  ac_cv_prog_cc_g=yes
else
  ac_cv_prog_cc_g=no
fi
rm -f conftest*


echo "$ac_t""$ac_cv_prog_cc_g" 1>&6
  if test "$ac_test_CFLAGS" = set; then
    CFLAGS="$ac_save_CFLAGS"
  elif test $ac_cv_prog_cc_g = yes; then
    CFLAGS="-g -O2"
  else
    CFLAGS="-O2"
  fi
else
  GCC=
  test "${CFLAGS+set}" = set || CFLAGS="-g"
fi

elif test "$with_gcc" = "yes" -a "$GCC" != "yes" ; then
  CC=gcc
  # Extract the first word of "gcc", so it can be a program name with args.
set dummy gcc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1814: checking for $ac_word" >&5

if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CC="gcc"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

if test -z "$CC"; then
  # Extract the first word of "cc", so it can be a program name with args.
set dummy cc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1840: checking for $ac_word" >&5

if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  ac_prog_rejected=no
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      if test "$ac_dir/$ac_word" = "/usr/ucb/cc"; then
        ac_prog_rejected=yes
	continue
      fi
      ac_cv_prog_CC="cc"
      break
    fi
  done
  IFS="$ac_save_ifs"
if test $ac_prog_rejected = yes; then
  # We found a bogon in the path, so make sure we never use it.
  set dummy $ac_cv_prog_CC
  shift
  if test $# -gt 0; then
    # We chose a different compiler from the bogus one.
    # However, it has the same basename, so the bogon will be chosen
    # first if we set CC to just the basename; use the full file name.
    shift
    set dummy "$ac_dir/$ac_word" "$@"
    shift
    ac_cv_prog_CC="$@"
  fi
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  test -z "$CC" && { echo "configure: error: no acceptable cc found in \$PATH" 1>&2; exit 1; }
fi

echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works""... $ac_c" 1>&6
echo "configure:1885: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5

ac_ext=c
xe_cppflags='$CPPFLAGS $c_switch_site $c_switch_machine $c_switch_system $c_switch_x_site $X_CFLAGS'
xe_ldflags='$LDFLAGS $ld_switch_site $ld_switch_machine $ld_switch_system $ld_switch_x_site $ld_switch_run'
xe_libs='$ld_call_shared $xe_check_libs $X_EXTRA_LIBS $libs_x $X_PRE_LIBS $LIBS $libs_machine $libs_system $libs_standard'
ac_cpp='$CPP '"$xe_cppflags"
ac_compile='${CC-cc} -c $CFLAGS '"$xe_cppflags"' conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest $CFLAGS '"$xe_cppflags $xe_ldflags"' conftest.$ac_ext '"$xe_libs"' 1>&5'
cross_compiling=no

cat > conftest.$ac_ext <<EOF
#line 1897 "configure"
#include "confdefs.h"
main(){return(0);}
EOF
if { (eval echo configure:1901: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  ac_cv_prog_cc_works=yes
  # If we can't run a trivial program, we are probably using a cross compiler.
  if (./conftest; exit) 2>/dev/null; then
    ac_cv_prog_cc_cross=no
  else
    ac_cv_prog_cc_cross=yes
  fi
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  ac_cv_prog_cc_works=no
fi
rm -fr conftest*

echo "$ac_t""$ac_cv_prog_cc_works" 1>&6
if test $ac_cv_prog_cc_works = no; then
  { echo "configure: error: installation or configuration problem: C compiler cannot create executables." 1>&2; exit 1; }
fi
echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
echo "configure:1921: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
echo "$ac_t""$ac_cv_prog_cc_cross" 1>&6
cross_compiling=$ac_cv_prog_cc_cross

echo $ac_n "checking whether we are using GNU C""... $ac_c" 1>&6
echo "configure:1926: checking whether we are using GNU C" >&5

cat > conftest.c <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1933: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
  ac_cv_prog_gcc=yes
else
  ac_cv_prog_gcc=no
fi

echo "$ac_t""$ac_cv_prog_gcc" 1>&6

if test $ac_cv_prog_gcc = yes; then
  GCC=yes
  ac_test_CFLAGS="${CFLAGS+set}"
  ac_save_CFLAGS="$CFLAGS"
  CFLAGS=
  echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
echo "configure:1947: checking whether ${CC-cc} accepts -g" >&5

echo 'void f(){}' > conftest.c
if test -z "`${CC-cc} -g -c conftest.c 2>&1`"; then
  ac_cv_prog_cc_g=yes
else
  ac_cv_prog_cc_g=no
fi
rm -f conftest*


echo "$ac_t""$ac_cv_prog_cc_g" 1>&6
  if test "$ac_test_CFLAGS" = set; then
    CFLAGS="$ac_save_CFLAGS"
  elif test $ac_cv_prog_cc_g = yes; then
    CFLAGS="-g -O2"
  else
    CFLAGS="-O2"
  fi
else
  GCC=
  test "${CFLAGS+set}" = set || CFLAGS="-g"
fi

fi
CFLAGS="$xe_save_CFLAGS"


test -n "$CPP" -a -d "$CPP" && CPP=

test -n "$NON_GNU_CPP" -a "$GCC" != "yes" -a -z "$CPP" && CPP="$NON_GNU_CPP"

echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
echo "configure:1980: checking how to run the C preprocessor" >&5
# On Suns, sometimes $CPP names a directory.
if test -n "$CPP" && test -d "$CPP"; then
  CPP=
fi
if test -z "$CPP"; then

  # This must be in double quotes, not single quotes, because CPP may get
  # substituted into the Makefile and "${CC-cc}" will confuse make.
  CPP="${CC-cc} -E"
  # On the NeXT, cc -E runs the code through the compiler's parser,
  # not just through cpp.
  cat > conftest.$ac_ext <<EOF
#line 1993 "configure"
#include "confdefs.h"
#include <assert.h>
Syntax Error
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:1999: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  CPP="${CC-cc} -E -traditional-cpp"
  cat > conftest.$ac_ext <<EOF
#line 2010 "configure"
#include "confdefs.h"
#include <assert.h>
Syntax Error
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:2016: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  CPP=/lib/cpp
fi
rm -f conftest*
fi
rm -f conftest*
  ac_cv_prog_CPP="$CPP"
  CPP="$ac_cv_prog_CPP"
else
  ac_cv_prog_CPP="$CPP"
fi
echo "$ac_t""$CPP" 1>&6


echo $ac_n "checking for AIX""... $ac_c" 1>&6
echo "configure:2039: checking for AIX" >&5
cat > conftest.$ac_ext <<EOF
#line 2041 "configure"
#include "confdefs.h"
#ifdef _AIX
  yes
#endif

EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6; { test "$extra_verbose" = "yes" && cat << \EOF
    Defining _ALL_SOURCE
EOF
cat >> confdefs.h <<\EOF
#define _ALL_SOURCE 1
EOF
}

else
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*



echo $ac_n "checking for GNU libc""... $ac_c" 1>&6
echo "configure:2068: checking for GNU libc" >&5
cat > conftest.$ac_ext <<EOF
#line 2070 "configure"
#include "confdefs.h"
#include <features.h>
int main() {

#if ! (defined __GLIBC__ || defined __GNU_LIBRARY__)
#error Not a GNU libc system :-(
******* ======= ******** &&&&&&&&
#endif

; return 0; }
EOF
if { (eval echo configure:2082: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  have_glibc=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  have_glibc=no
fi
rm -f conftest*
echo "$ac_t""$have_glibc" 1>&6
test "$have_glibc" = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining _GNU_SOURCE
EOF
cat >> confdefs.h <<\EOF
#define _GNU_SOURCE 1
EOF
}



cat > conftest.$ac_ext <<EOF
#line 2104 "configure"
#include "confdefs.h"
int main () {
#if defined __SUNPRO_C
return 11;
#elif defined __DECC
return 12;
#else
return 0;
#endif
}
EOF
if { (eval echo configure:2116: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  :
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  case "$conftest_rc" in
  11) echo "You appear to be using the SunPro C compiler."; __SUNPRO_C=yes ;;
  12) echo "You appear to be using the DEC C compiler."   ; __DECC=yes ;;
esac
fi
rm -fr conftest*




echo "Extracting information from the machine- and system-dependent headers..."

tempcname="conftest.c"



cat > $tempcname <<EOF
#define NOT_C_CODE
#define C_SWITCH_SITE
#define C_SWITCH_X_SITE
#define LD_SWITCH_SITE
#define LD_SWITCH_X_SITE
#define LD_SWITCH_X_SITE_AUX
#define OS_RELEASE $os_release
#include "$srcdir/src/$opsysfile"
#include "$srcdir/src/$machfile"

#ifndef LIBS_MACHINE
#define LIBS_MACHINE
#endif
configure___ libs_machine=LIBS_MACHINE

#ifndef LIBS_SYSTEM
#define LIBS_SYSTEM
#endif
configure___ libs_system=LIBS_SYSTEM

#ifndef LIBS_TERMCAP
#define LIBS_TERMCAP
#endif
configure___ libs_termcap=LIBS_TERMCAP

#ifndef LIB_STANDARD
#define LIB_STANDARD
#endif
configure___ libs_standard=LIB_STANDARD


#ifndef OBJECTS_MACHINE
#define OBJECTS_MACHINE
#endif
configure___ objects_machine=OBJECTS_MACHINE

#ifndef OBJECTS_SYSTEM
#define OBJECTS_SYSTEM
#endif
configure___ objects_system=OBJECTS_SYSTEM


#ifndef C_SWITCH_MACHINE
#define C_SWITCH_MACHINE
#endif
configure___ c_switch_machine=C_SWITCH_MACHINE

#ifndef C_SWITCH_SYSTEM
#define C_SWITCH_SYSTEM
#endif
configure___ c_switch_system=C_SWITCH_SYSTEM


#ifndef LD_SWITCH_MACHINE
#define LD_SWITCH_MACHINE
#endif
configure___ ld_switch_machine=LD_SWITCH_MACHINE

#ifndef LD_SWITCH_SYSTEM
#define LD_SWITCH_SYSTEM
#endif
configure___ ld_switch_system=LD_SWITCH_SYSTEM


#ifndef UNEXEC
#define UNEXEC "unexec.o"
#endif
configure___ unexec=UNEXEC


#ifndef LD_SWITCH_SHARED
#define LD_SWITCH_SHARED "-c"
#endif
configure___ ld_switch_shared=LD_SWITCH_SHARED


#ifdef ORDINARY_LINK
#define LD "\$(CC) \$(CFLAGS)"
#else /* no ORDINARY LINK */
#ifdef COFF_ENCAPSULATE
#define LD "\$(CC) -nostdlib"
#else /* not COFF_ENCAPSULATE */
#ifdef LINKER
#define LD LINKER
#else /* ! defined (LINKER) */
#define LD "ld"
#endif /* ! defined (LINKER) */
#endif /* ! defined (COFF_ENCAPSULATE) */
#endif /* not ORDINARY_LINK */
configure___ ld=LD

#ifndef LIB_GCC
#define LIB_GCC
#endif
configure___ lib_gcc=LIB_GCC

#ifndef LD_TEXT_START_ADDR
#define LD_TEXT_START_ADDR
#endif
configure___ ld_text_start_addr=LD_TEXT_START_ADDR


#if ! defined (ORDINARY_LINK) && !defined (START_FILES)
#ifdef NO_REMAP
#ifdef COFF_ENCAPSULATE
#define START_FILES "pre-crt0.o /usr/local/lib/gcc-crt0.o"
#else /* ! defined (COFF_ENCAPSULATE) */
#define START_FILES "pre-crt0.o /lib/crt0.o"
#endif /* ! defined (COFF_ENCAPSULATE) */
#else /* ! defined (NO_REMAP) */
#define START_FILES "ecrt0.o"
#endif /* ! defined (NO_REMAP) */
#endif /* no ORDINARY_LINK */
#ifndef START_FILES
#define START_FILES
#endif
configure___ start_files=START_FILES

#ifdef ORDINARY_LINK
configure___ ordinary_link=yes
#else
configure___ ordinary_link=no
#endif

#ifdef SYSTEM_MALLOC
configure___ system_malloc=yes
#else
configure___ system_malloc=no
#endif

#ifdef TERMINFO
configure___ have_terminfo=yes
#else
configure___ have_terminfo=no
#endif

#ifdef MAIL_USE_FLOCK
configure___ mail_use_flock=yes
#else
configure___ mail_use_flock=no
#endif

#ifdef MAIL_USE_LOCKF
configure___ mail_use_lockf=yes
#else
configure___ mail_use_lockf=no
#endif

EOF

CPP=`eval "echo $CPP $CPPFLAGS"`
eval `$CPP -Isrc $tempcname \
	| sed -n -e "s/[ 	]*=[ 	\"]*/='/" -e "s/[ 	\"]*\$/'/" -e "s/^configure___//p"`

rm $tempcname

test "$extra_verbose" = "yes" && \
  for var in libs_machine libs_system libs_termcap libs_standard   objects_machine objects_system c_switch_machine c_switch_system   ld_switch_machine ld_switch_system unexec ld_switch_shared   ld lib_gcc ld_text_start_addr start_files ordinary_link   have_terminfo mail_use_flock mail_use_lockf; do eval "echo \"$var = '\$$var'\""; done && echo ""

test "$ordinary_link" = "no" -a -z "$libs_standard" && libs_standard="-lc"

test "$__DECC" = "yes" && c_switch_site="$c_switch_site -std" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"-std\" to \$c_switch_site"; fi

if test "$cflags_specified" = "no"; then
      if   test "$GCC" = "yes"; then
    CFLAGS="-g -O3 -Wall -Wno-switch"
                          elif test "$__SUNPRO_C" = "yes"; then
    case "$opsys" in
      sol2    ) CFLAGS="-v -xO4" ;;
      sunos4* ) CFLAGS="-xO2";;
    esac
  elif test "$__DECC" = "yes"; then
    CFLAGS="-O3"
  elif test "$CC" = "xlc"; then
    CFLAGS="-g -O3 -qstrict -qnoansialias -qlibansi -qinfo -qro -qmaxmem=20000"
    else
    CFLAGS="-O" ;  fi
fi


if test "$GCC" = "yes"; then
  set x $ld_switch_system; shift; ld_switch_system=""
  while test -n "$1"; do
    case $1 in
      -L  | -l  | -u               ) ld_switch_system="$ld_switch_system $1 $2"; shift ;;
      -L* | -l* | -u* | -Wl* | -pg ) ld_switch_system="$ld_switch_system $1" ;;
      -Xlinker* ) ;;
      * ) ld_switch_system="$ld_switch_system -Xlinker $1" ;;
    esac
    shift
  done
fi

if test "$GCC" = "yes"; then
  set x $ld_switch_machine; shift; ld_switch_machine=""
  while test -n "$1"; do
    case $1 in
      -L  | -l  | -u               ) ld_switch_machine="$ld_switch_machine $1 $2"; shift ;;
      -L* | -l* | -u* | -Wl* | -pg ) ld_switch_machine="$ld_switch_machine $1" ;;
      -Xlinker* ) ;;
      * ) ld_switch_machine="$ld_switch_machine -Xlinker $1" ;;
    esac
    shift
  done
fi

if test "$GCC" = "yes"; then
  set x $LDFLAGS; shift; LDFLAGS=""
  while test -n "$1"; do
    case $1 in
      -L  | -l  | -u               ) LDFLAGS="$LDFLAGS $1 $2"; shift ;;
      -L* | -l* | -u* | -Wl* | -pg ) LDFLAGS="$LDFLAGS $1" ;;
      -Xlinker* ) ;;
      * ) LDFLAGS="$LDFLAGS -Xlinker $1" ;;
    esac
    shift
  done
fi

if test "$GCC" = "yes"; then
  set x $ld_call_shared; shift; ld_call_shared=""
  while test -n "$1"; do
    case $1 in
      -L  | -l  | -u               ) ld_call_shared="$ld_call_shared $1 $2"; shift ;;
      -L* | -l* | -u* | -Wl* | -pg ) ld_call_shared="$ld_call_shared $1" ;;
      -Xlinker* ) ;;
      * ) ld_call_shared="$ld_call_shared -Xlinker $1" ;;
    esac
    shift
  done
fi

test -n "$objects_machine" && extra_objs="$extra_objs $objects_machine" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"$objects_machine\""
 fi
test -n "$objects_system"  && extra_objs="$extra_objs $objects_system" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"$objects_system\""
 fi
test -n "$unexec"          && extra_objs="$extra_objs $unexec" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"$unexec\""
 fi

echo $ac_n "checking for dynodump""... $ac_c" 1>&6
echo "configure:2384: checking for dynodump" >&5
if test "$unexec" != "unexsol2.o"; then
  echo "$ac_t""no" 1>&6
else
  echo "$ac_t""yes" 1>&6
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining DYNODUMP
EOF
cat >> confdefs.h <<\EOF
#define DYNODUMP 1
EOF
}

  MAKE_SUBDIR="$MAKE_SUBDIR dynodump" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"dynodump\" to \$MAKE_SUBDIR"; fi
  SRC_SUBDIR_DEPS="$SRC_SUBDIR_DEPS dynodump" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"dynodump\" to \$SRC_SUBDIR_DEPS"; fi
  case "$machine" in
    sparc   ) dynodump_arch=sparc ;;
    *86*    ) dynodump_arch=i386  ;;
    powerpc ) dynodump_arch=ppc   ;;
  esac
    test "$GCC" = "yes" && ld_switch_site="$ld_switch_site -fno-gnu-linker" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"-fno-gnu-linker\" to \$ld_switch_site"; fi
fi


test "$machine$opsys" = "powerpclinux" && start_flags="-T $srcdir/src/ppc.ldscript"

if test "$unexec" = "unexaix.o"; then
  if   test "$dynamic" = "no"; then
  start_flags="-Wl,-bnso,-bnodelcsect"
  test "$GCC" = "yes" && start_flags="-B/bin/ ${start_flags}"
  for f in "/lib/syscalls.exp" "/lib/threads.exp"; do
    if test -r "$f"; then start_flags="${start_flags},-bI:${f}"; fi
  done
  for f in "/usr/lpp/X11/bin/smt.exp" "/usr/bin/X11/smt.exp"; do
    if test -r "$f"; then start_flags="${start_flags},-bI:${f}"; break; fi
  done
  
echo $ac_n "checking for terminateAndUnload in -lC""... $ac_c" 1>&6
echo "configure:2422: checking for terminateAndUnload in -lC" >&5
ac_lib_var=`echo C'_'terminateAndUnload | sed 'y%./+-%__p_%'`

xe_check_libs=" -lC "
cat > conftest.$ac_ext <<EOF
#line 2427 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char terminateAndUnload();

int main() {
terminateAndUnload()
; return 0; }
EOF
if { (eval echo configure:2438: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  libs_system="$libs_system -lC" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"-lC\" to \$libs_system"; fi
else
  echo "$ac_t""no" 1>&6
fi


  fi
elif test -n "$ld_text_start_addr"; then
  start_flags="-T $ld_text_start_addr -e __start"
fi




if test "$ordinary_link" = "no" -a "$GCC" = "yes"; then
 test -z "$linker" &&  linker='$(CC) -nostdlib'
 test -z "$lib_gcc" && lib_gcc='`$(CC) -print-libgcc-file-name`'
fi
test "$GCC" != "yes" && lib_gcc=





case "$site_libraries" in *:* ) site_libraries="`echo '' $site_libraries | sed -e 's/^ //' -e 's/:/ /g'`";; esac
if test -n "$site_libraries"; then
  for arg in $site_libraries; do
    case "$arg" in
     -* ) ;;
     * ) test -d "$arg" || \
           { echo "Error:" "Invalid site library \`$arg': no such directory" >&2; exit 1; }
       arg="-L${arg}" ;;
    esac
    ld_switch_site="$ld_switch_site $arg" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"$arg\" to \$ld_switch_site"; fi
  done
fi

case "$site_includes" in *:* ) site_includes="`echo '' $site_includes | sed -e 's/^ //' -e 's/:/ /g'`";; esac
if test -n "$site_includes"; then
  for arg in $site_includes; do
    case "$arg" in
      -* ) ;;
      * ) test -d "$arg" || \
           { echo "Error:" "Invalid site include \`$arg': no such directory" >&2; exit 1; }
      arg="-I${arg}" ;;
    esac
    c_switch_site="$c_switch_site $arg" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"$arg\" to \$c_switch_site"; fi
  done
fi

case "$site_prefixes" in *:* ) site_prefixes="`echo '' $site_prefixes | sed -e 's/^ //' -e 's/:/ /g'`";; esac
if test -n "$site_prefixes"; then
  for dir in $site_prefixes; do
    inc_dir="${dir}/include"
    lib_dir="${dir}/lib"
    if test ! -d "$dir"; then
      { echo "Error:" "Invalid site prefix \`$dir': no such directory" >&2; exit 1; }
    elif test ! -d "$inc_dir"; then
      { echo "Error:" "Invalid site prefix \`$dir': no such directory \`$inc_dir'" >&2; exit 1; }
    elif test ! -d "$lib_dir"; then
      { echo "Error:" "Invalid site prefix \`$dir': no such directory \`$lib_dir'" >&2; exit 1; }
    else
      c_switch_site="$c_switch_site "-I$inc_dir"" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \""-I$inc_dir"\" to \$c_switch_site"; fi
      ld_switch_site="$ld_switch_site "-L$lib_dir"" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \""-L$lib_dir"\" to \$ld_switch_site"; fi
    fi
  done
fi


for dir in "/usr/ccs/lib"; do
  test -d "$dir" && ld_switch_site="$ld_switch_site -L${dir}" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"-L${dir}\" to \$ld_switch_site"; fi
done

case "$site_runtime_libraries" in *:* ) site_runtime_libraries="`echo '' $site_runtime_libraries | sed -e 's/^ //' -e 's/:/ /g'`";; esac
if test -n "$site_runtime_libraries"; then
  LD_RUN_PATH="`echo $site_runtime_libraries | sed -e 's/  */:/g'`"
  export LD_RUN_PATH
fi


if   test "$dynamic" = "no"; then add_runtime_path=no
elif test -n "$LD_RUN_PATH"; then add_runtime_path=yes
else case "$opsys" in
       sol2 | irix* | *bsd* | decosf* ) add_runtime_path=yes ;;
       * ) add_runtime_path=no ;;
     esac
fi

if test "$add_runtime_path" = "yes"; then
      echo $ac_n "checking "for runtime libraries flag"""... $ac_c" 1>&6
echo "configure:2542: checking "for runtime libraries flag"" >&5
  case "$opsys" in
    sol2 ) dash_r="-R" ;;
    decosf* | linux* ) dash_r="-rpath " ;;
    *)
      dash_r=""
      for try_dash_r in "-R" "-R " "-rpath "; do
        xe_check_libs="${try_dash_r}/no/such/file-or-directory"
        
if test "$GCC" = "yes"; then
  set x $xe_check_libs; shift; xe_check_libs=""
  while test -n "$1"; do
    case $1 in
      -L  | -l  | -u               ) xe_check_libs="$xe_check_libs $1 $2"; shift ;;
      -L* | -l* | -u* | -Wl* | -pg ) xe_check_libs="$xe_check_libs $1" ;;
      -Xlinker* ) ;;
      * ) xe_check_libs="$xe_check_libs -Xlinker $1" ;;
    esac
    shift
  done
fi
        cat > conftest.$ac_ext <<EOF
#line 2564 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:2571: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  dash_r="$try_dash_r"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
        xe_check_libs=""
        test -n "$dash_r" && break
      done ;;
  esac
  if test -n "$dash_r";
    then echo "$ac_t"""\"${dash_r}\""" 1>&6
    else echo "$ac_t""NONE" 1>&6
  fi
fi

xe_add_unique_runpath_dir='
  xe_add_p=yes
  for xe_dir in $runpath_dirs; do       test "$xe_dir" = "$xe_runpath_dir" && xe_add_p=no
  done
  if test "$xe_add_p" = "yes"; then
    test -n "$runpath" && runpath="${runpath}:"
    runpath="${runpath}${xe_runpath_dir}"
    runpath_dirs="$runpath_dirs $xe_runpath_dir"
  fi'




if test "$add_runtime_path" = "yes" -a -n "$dash_r"; then
    ld_switch_site=`echo   '' $ld_switch_site   | sed -e 's:^ ::' -e "s/$dash_r[^ ]*//g"`
  ld_switch_x_site=`echo '' $ld_switch_x_site | sed -e 's:^ ::' -e "s/$dash_r[^ ]*//g"`
  
        runpath="" runpath_dirs=""
  if test -n "$LD_RUN_PATH"; then
    runpath="$LD_RUN_PATH"
  elif test "$GCC" = "yes"; then
        ld_switch_run_save="$ld_switch_run"; ld_switch_run=""
    echo "int main(int argc, char *argv[]) {return 0;}" > conftest.c
    xe_runpath_link='${CC-cc} -o conftest -v $CFLAGS '"$xe_ldflags"' conftest.$ac_ext 2>&1 1>/dev/null'
    for arg in `eval "$xe_runpath_link" | grep ' -L'`; do
      case "$arg" in P,* | -L* | -R* )
        for dir in `echo '' "$arg" | sed -e 's:^ ::' -e 's/^..//' -e 'y/:/ /'`; do
          {
xe_runpath_dir="$dir"
  test "$xe_runpath_dir" != "/lib"     -a \
	"$xe_runpath_dir" != "/usr/lib" -a \
	-n "`ls ${xe_runpath_dir}/*.s[ol] 2>/dev/null`" && \
  eval "$xe_add_unique_runpath_dir"
}
        done ;;
      esac
    done
    ld_switch_run="$ld_switch_run_save"
    rm -f conftest*
  else
        for arg in $ld_switch_site $ld_switch_x_site; do
      case "$arg" in -L*) {
xe_runpath_dir=`echo '' "$arg" | sed -e 's:^ ::' -e 's/^-L//'`
  test "$xe_runpath_dir" != "/lib"     -a \
	"$xe_runpath_dir" != "/usr/lib" -a \
	-n "`ls ${xe_runpath_dir}/*.s[ol] 2>/dev/null`" && \
  eval "$xe_add_unique_runpath_dir"
};; esac
    done
        if test "$opsys $need_motif" = "sol2 yes"; then
      xe_runpath_dir="/opt/SUNWdt/lib";
      eval "$xe_add_unique_runpath_dir";
    fi
  fi 
  if test -n "$runpath"; then
    ld_switch_run="${dash_r}${runpath}"
    
if test "$GCC" = "yes"; then
  set x $ld_switch_run; shift; ld_switch_run=""
  while test -n "$1"; do
    case $1 in
      -L  | -l  | -u               ) ld_switch_run="$ld_switch_run $1 $2"; shift ;;
      -L* | -l* | -u* | -Wl* | -pg ) ld_switch_run="$ld_switch_run $1" ;;
      -Xlinker* ) ;;
      * ) ld_switch_run="$ld_switch_run -Xlinker $1" ;;
    esac
    shift
  done
fi
    test "$extra_verbose" = "yes" && echo "Setting runpath to $runpath"
  fi
fi




GNU_MALLOC=yes
if test "$with_dlmalloc" != "no"; then
	doug_lea_malloc=yes
else
	doug_lea_malloc=no
fi
after_morecore_hook_exists=yes
echo $ac_n "checking for malloc_get_state""... $ac_c" 1>&6
echo "configure:2673: checking for malloc_get_state" >&5

cat > conftest.$ac_ext <<EOF
#line 2676 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char malloc_get_state(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char malloc_get_state();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_malloc_get_state) || defined (__stub___malloc_get_state)
choke me
#else
malloc_get_state();
#endif

; return 0; }
EOF
if { (eval echo configure:2699: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_func_malloc_get_state=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_malloc_get_state=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'malloc_get_state`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
doug_lea_malloc=no
fi

echo $ac_n "checking for malloc_set_state""... $ac_c" 1>&6
echo "configure:2719: checking for malloc_set_state" >&5

cat > conftest.$ac_ext <<EOF
#line 2722 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char malloc_set_state(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char malloc_set_state();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_malloc_set_state) || defined (__stub___malloc_set_state)
choke me
#else
malloc_set_state();
#endif

; return 0; }
EOF
if { (eval echo configure:2745: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_func_malloc_set_state=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_malloc_set_state=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'malloc_set_state`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
doug_lea_malloc=no
fi

echo $ac_n "checking whether __after_morecore_hook exists""... $ac_c" 1>&6
echo "configure:2765: checking whether __after_morecore_hook exists" >&5
cat > conftest.$ac_ext <<EOF
#line 2767 "configure"
#include "confdefs.h"
extern void (* __after_morecore_hook)();
int main() {
__after_morecore_hook = 0
; return 0; }
EOF
if { (eval echo configure:2774: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
   after_morecore_hook_exists=no
fi
rm -f conftest*
if test "$system_malloc" = "yes" ; then
  GNU_MALLOC=no
  GNU_MALLOC_reason="
  (The GNU allocators don't work with this system configuration)."
elif test "$with_system_malloc" = "yes" ; then
  GNU_MALLOC=no
  GNU_MALLOC_reason="
  (User chose not to use GNU allocators)."
elif test "$with_debug_malloc" = "yes" ; then
  GNU_MALLOC=no
  GNU_MALLOC_reason="
  (User chose to use Debugging Malloc)."
fi

if test "$doug_lea_malloc" = "yes" ; then
  if test "$GNU_MALLOC" = yes ; then
    GNU_MALLOC_reason="
  (Using Doug Lea's new malloc from the GNU C Library.)"
  fi
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining DOUG_LEA_MALLOC
EOF
cat >> confdefs.h <<\EOF
#define DOUG_LEA_MALLOC 1
EOF
}

  if test "$after_morecore_hook_exists" = "no" ; then
    GNU_MALLOC_reason="
  (Using Doug Lea's new malloc from the Linux C Library.)"
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining _NO_MALLOC_WARNING_
EOF
cat >> confdefs.h <<\EOF
#define _NO_MALLOC_WARNING_ 1
EOF
}

  fi
  use_minimal_tagbits=yes
fi




# Extract the first word of "ranlib", so it can be a program name with args.
set dummy ranlib; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2833: checking for $ac_word" >&5

if test -n "$RANLIB"; then
  ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_RANLIB="ranlib"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_prog_RANLIB" && ac_cv_prog_RANLIB=":"
fi
RANLIB="$ac_cv_prog_RANLIB"
if test -n "$RANLIB"; then
  echo "$ac_t""$RANLIB" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

ac_aux_dir=
for ac_dir in $srcdir $srcdir/.. $srcdir/../..; do
  if test -f $ac_dir/install-sh; then
    ac_aux_dir=$ac_dir
    ac_install_sh="$ac_aux_dir/install-sh -c"
    break
  elif test -f $ac_dir/install.sh; then
    ac_aux_dir=$ac_dir
    ac_install_sh="$ac_aux_dir/install.sh -c"
    break
  fi
done
if test -z "$ac_aux_dir"; then
  { echo "configure: error: can not find install-sh or install.sh in $srcdir $srcdir/.. $srcdir/../.." 1>&2; exit 1; }
fi
ac_config_guess=$ac_aux_dir/config.guess
ac_config_sub=$ac_aux_dir/config.sub
ac_configure=$ac_aux_dir/configure # This should be Cygnus configure.

# Find a good install program.  We prefer a C program (faster),
# so one script is as good as another.  But avoid the broken or
# incompatible versions:
# SysV /etc/install, /usr/sbin/install
# SunOS /usr/etc/install
# IRIX /sbin/install
# AIX /bin/install
# AFS /usr/afsws/bin/install, which mishandles nonexistent args
# SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
# ./install, which can be erroneously created by make from ./install.sh.
echo $ac_n "checking for a BSD compatible install""... $ac_c" 1>&6
echo "configure:2886: checking for a BSD compatible install" >&5
if test -z "$INSTALL"; then

  IFS="${IFS= 	}"; ac_save_IFS="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    # Account for people who put trailing slashes in PATH elements.
    case "$ac_dir/" in
    /|./|.//|/etc/*|/usr/sbin/*|/usr/etc/*|/sbin/*|/usr/afsws/bin/*|/usr/ucb/*) ;;
    *)
      # OSF1 and SCO ODT 3.0 have their own names for install.
      for ac_prog in ginstall installbsd scoinst install; do
        if test -f $ac_dir/$ac_prog; then
	  if test $ac_prog = install &&
            grep dspmsg $ac_dir/$ac_prog >/dev/null 2>&1; then
	    # AIX install.  It has an incompatible calling convention.
	    # OSF/1 installbsd also uses dspmsg, but is usable.
	    :
	  else
	    ac_cv_path_install="$ac_dir/$ac_prog -c"
	    break 2
	  fi
	fi
      done
      ;;
    esac
  done
  IFS="$ac_save_IFS"

  if test "${ac_cv_path_install+set}" = set; then
    INSTALL="$ac_cv_path_install"
  else
    # As a last resort, use the slow shell script.  We don't cache a
    # path for INSTALL within a source directory, because that will
    # break other packages using the cache if that directory is
    # removed, or if the path is relative.
    INSTALL="$ac_install_sh"
  fi
fi
echo "$ac_t""$INSTALL" 1>&6

# Use test -z because SunOS4 sh mishandles braces in ${var-val}.
# It thinks the first close brace ends the variable substitution.
test -z "$INSTALL_PROGRAM" && INSTALL_PROGRAM='${INSTALL}'

test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'

for ac_prog in 'bison -y' byacc
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2937: checking for $ac_word" >&5

if test -n "$YACC"; then
  ac_cv_prog_YACC="$YACC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_YACC="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
YACC="$ac_cv_prog_YACC"
if test -n "$YACC"; then
  echo "$ac_t""$YACC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$YACC" && break
done
test -n "$YACC" || YACC="yacc"


for ac_hdr in mach/mach.h sys/stropts.h sys/timeb.h sys/time.h unistd.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:2968: checking for $ac_hdr" >&5

cat > conftest.$ac_ext <<EOF
#line 2971 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:2976: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_hdr
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done

for ac_hdr in utime.h locale.h libgen.h fcntl.h ulimit.h cygwin/version.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:3009: checking for $ac_hdr" >&5

cat > conftest.$ac_ext <<EOF
#line 3012 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:3017: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_hdr
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done

for ac_hdr in kstat.h sys/pstat.h inttypes.h sys/un.h a.out.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:3050: checking for $ac_hdr" >&5

cat > conftest.$ac_ext <<EOF
#line 3053 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:3058: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_hdr
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done

echo $ac_n "checking for sys/wait.h that is POSIX.1 compatible""... $ac_c" 1>&6
echo "configure:3088: checking for sys/wait.h that is POSIX.1 compatible" >&5

cat > conftest.$ac_ext <<EOF
#line 3091 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/wait.h>
#ifndef WEXITSTATUS
#define WEXITSTATUS(stat_val) ((unsigned)(stat_val) >> 8)
#endif
#ifndef WIFEXITED
#define WIFEXITED(stat_val) (((stat_val) & 255) == 0)
#endif
int main() {
int s;
wait (&s);
s = WIFEXITED (s) ? WEXITSTATUS (s) : 1;
; return 0; }
EOF
if { (eval echo configure:3107: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_header_sys_wait_h=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_sys_wait_h=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_header_sys_wait_h" 1>&6
if test $ac_cv_header_sys_wait_h = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_SYS_WAIT_H
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SYS_WAIT_H 1
EOF
}

fi

echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
echo "configure:3131: checking for ANSI C header files" >&5

cat > conftest.$ac_ext <<EOF
#line 3134 "configure"
#include "confdefs.h"
#include <stdlib.h>
#include <stdarg.h>
#include <string.h>
#include <float.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:3142: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  ac_cv_header_stdc=yes
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

if test $ac_cv_header_stdc = yes; then
  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
cat > conftest.$ac_ext <<EOF
#line 3159 "configure"
#include "confdefs.h"
#include <string.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "memchr" >/dev/null 2>&1; then
  :
else
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
cat > conftest.$ac_ext <<EOF
#line 3177 "configure"
#include "confdefs.h"
#include <stdlib.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "free" >/dev/null 2>&1; then
  :
else
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
cat > conftest.$ac_ext <<EOF
#line 3195 "configure"
#include "confdefs.h"
#include <ctype.h>
#define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
#define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
int main () { int i; for (i = 0; i < 256; i++)
if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);
exit (0); }

EOF
if { (eval echo configure:3206: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  :
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_header_stdc=no
fi
rm -fr conftest*
fi

echo "$ac_t""$ac_cv_header_stdc" 1>&6
if test $ac_cv_header_stdc = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining STDC_HEADERS
EOF
cat >> confdefs.h <<\EOF
#define STDC_HEADERS 1
EOF
}

fi

echo $ac_n "checking whether time.h and sys/time.h may both be included""... $ac_c" 1>&6
echo "configure:3232: checking whether time.h and sys/time.h may both be included" >&5

cat > conftest.$ac_ext <<EOF
#line 3235 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/time.h>
#include <time.h>
int main() {
struct tm *tp;
; return 0; }
EOF
if { (eval echo configure:3244: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_header_time=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_time=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_header_time" 1>&6
if test $ac_cv_header_time = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining TIME_WITH_SYS_TIME
EOF
cat >> confdefs.h <<\EOF
#define TIME_WITH_SYS_TIME 1
EOF
}

fi

echo $ac_n "checking for sys_siglist declaration in signal.h or unistd.h""... $ac_c" 1>&6
echo "configure:3268: checking for sys_siglist declaration in signal.h or unistd.h" >&5

cat > conftest.$ac_ext <<EOF
#line 3271 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <signal.h>
/* NetBSD declares sys_siglist in unistd.h.  */
#ifdef HAVE_UNISTD_H
#include <unistd.h>
#endif
int main() {
char *msg = *(sys_siglist + 1);
; return 0; }
EOF
if { (eval echo configure:3283: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_decl_sys_siglist=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_decl_sys_siglist=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_decl_sys_siglist" 1>&6
if test $ac_cv_decl_sys_siglist = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining SYS_SIGLIST_DECLARED
EOF
cat >> confdefs.h <<\EOF
#define SYS_SIGLIST_DECLARED 1
EOF
}

fi


echo $ac_n "checking for struct utimbuf""... $ac_c" 1>&6
echo "configure:3308: checking for struct utimbuf" >&5
cat > conftest.$ac_ext <<EOF
#line 3310 "configure"
#include "confdefs.h"
#ifdef TIME_WITH_SYS_TIME
#include <sys/time.h>
#include <time.h>
#else
#ifdef HAVE_SYS_TIME_H
#include <sys/time.h>
#else
#include <time.h>
#endif
#endif
#ifdef HAVE_UTIME_H
#include <utime.h>
#endif
int main() {
static struct utimbuf x; x.actime = x.modtime;
; return 0; }
EOF
if { (eval echo configure:3329: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
   { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_STRUCT_UTIMBUF
EOF
cat >> confdefs.h <<\EOF
#define HAVE_STRUCT_UTIMBUF 1
EOF
}

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*

echo $ac_n "checking return type of signal handlers""... $ac_c" 1>&6
echo "configure:3349: checking return type of signal handlers" >&5

cat > conftest.$ac_ext <<EOF
#line 3352 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <signal.h>
#ifdef signal
#undef signal
#endif
#ifdef __cplusplus
extern "C" void (*signal (int, void (*)(int)))(int);
#else
void (*signal ()) ();
#endif

int main() {
int i;
; return 0; }
EOF
if { (eval echo configure:3369: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_type_signal=void
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_type_signal=int
fi
rm -f conftest*

echo "$ac_t""$ac_cv_type_signal" 1>&6
{ test "$extra_verbose" = "yes" && cat << EOF
    Defining RETSIGTYPE = $ac_cv_type_signal
EOF
cat >> confdefs.h <<EOF
#define RETSIGTYPE $ac_cv_type_signal
EOF
}


echo $ac_n "checking for size_t""... $ac_c" 1>&6
echo "configure:3391: checking for size_t" >&5

cat > conftest.$ac_ext <<EOF
#line 3394 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "size_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_size_t=yes
else
  rm -rf conftest*
  ac_cv_type_size_t=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_type_size_t" 1>&6
if test $ac_cv_type_size_t = no; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining size_t = unsigned
EOF
cat >> confdefs.h <<\EOF
#define size_t unsigned
EOF
}

fi

echo $ac_n "checking for pid_t""... $ac_c" 1>&6
echo "configure:3425: checking for pid_t" >&5

cat > conftest.$ac_ext <<EOF
#line 3428 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "pid_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_pid_t=yes
else
  rm -rf conftest*
  ac_cv_type_pid_t=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_type_pid_t" 1>&6
if test $ac_cv_type_pid_t = no; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining pid_t = int
EOF
cat >> confdefs.h <<\EOF
#define pid_t int
EOF
}

fi

echo $ac_n "checking for uid_t in sys/types.h""... $ac_c" 1>&6
echo "configure:3459: checking for uid_t in sys/types.h" >&5

cat > conftest.$ac_ext <<EOF
#line 3462 "configure"
#include "confdefs.h"
#include <sys/types.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "uid_t" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_uid_t=yes
else
  rm -rf conftest*
  ac_cv_type_uid_t=no
fi
rm -f conftest*


echo "$ac_t""$ac_cv_type_uid_t" 1>&6
if test $ac_cv_type_uid_t = no; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining uid_t = int
EOF
cat >> confdefs.h <<\EOF
#define uid_t int
EOF
}

  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining gid_t = int
EOF
cat >> confdefs.h <<\EOF
#define gid_t int
EOF
}

fi

echo $ac_n "checking for mode_t""... $ac_c" 1>&6
echo "configure:3498: checking for mode_t" >&5

cat > conftest.$ac_ext <<EOF
#line 3501 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "mode_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_mode_t=yes
else
  rm -rf conftest*
  ac_cv_type_mode_t=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_type_mode_t" 1>&6
if test $ac_cv_type_mode_t = no; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining mode_t = int
EOF
cat >> confdefs.h <<\EOF
#define mode_t int
EOF
}

fi

echo $ac_n "checking for off_t""... $ac_c" 1>&6
echo "configure:3532: checking for off_t" >&5

cat > conftest.$ac_ext <<EOF
#line 3535 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "off_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_off_t=yes
else
  rm -rf conftest*
  ac_cv_type_off_t=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_type_off_t" 1>&6
if test $ac_cv_type_off_t = no; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining off_t = long
EOF
cat >> confdefs.h <<\EOF
#define off_t long
EOF
}

fi


echo $ac_n "checking for struct timeval""... $ac_c" 1>&6
echo "configure:3567: checking for struct timeval" >&5
cat > conftest.$ac_ext <<EOF
#line 3569 "configure"
#include "confdefs.h"
#ifdef TIME_WITH_SYS_TIME
#include <sys/time.h>
#include <time.h>
#else
#ifdef HAVE_SYS_TIME_H
#include <sys/time.h>
#else
#include <time.h>
#endif
#endif
int main() {
static struct timeval x; x.tv_sec = x.tv_usec;
; return 0; }
EOF
if { (eval echo configure:3585: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
  HAVE_TIMEVAL=yes
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_TIMEVAL
EOF
cat >> confdefs.h <<\EOF
#define HAVE_TIMEVAL 1
EOF
}

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
   HAVE_TIMEVAL=no
fi
rm -f conftest*

echo $ac_n "checking whether struct tm is in sys/time.h or time.h""... $ac_c" 1>&6
echo "configure:3607: checking whether struct tm is in sys/time.h or time.h" >&5

cat > conftest.$ac_ext <<EOF
#line 3610 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <time.h>
int main() {
struct tm *tp; tp->tm_sec;
; return 0; }
EOF
if { (eval echo configure:3618: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_struct_tm=time.h
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_struct_tm=sys/time.h
fi
rm -f conftest*

echo "$ac_t""$ac_cv_struct_tm" 1>&6
if test $ac_cv_struct_tm = sys/time.h; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining TM_IN_SYS_TIME
EOF
cat >> confdefs.h <<\EOF
#define TM_IN_SYS_TIME 1
EOF
}

fi

echo $ac_n "checking for tm_zone in struct tm""... $ac_c" 1>&6
echo "configure:3642: checking for tm_zone in struct tm" >&5

cat > conftest.$ac_ext <<EOF
#line 3645 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <$ac_cv_struct_tm>
int main() {
struct tm tm; tm.tm_zone;
; return 0; }
EOF
if { (eval echo configure:3653: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_struct_tm_zone=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_struct_tm_zone=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_struct_tm_zone" 1>&6
if test "$ac_cv_struct_tm_zone" = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_TM_ZONE
EOF
cat >> confdefs.h <<\EOF
#define HAVE_TM_ZONE 1
EOF
}

else
  echo $ac_n "checking for tzname""... $ac_c" 1>&6
echo "configure:3676: checking for tzname" >&5

cat > conftest.$ac_ext <<EOF
#line 3679 "configure"
#include "confdefs.h"
#include <time.h>
#ifndef tzname /* For SGI.  */
extern char *tzname[]; /* RS6000 and others reject char **tzname.  */
#endif
int main() {
atoi(*tzname);
; return 0; }
EOF
if { (eval echo configure:3689: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  ac_cv_var_tzname=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_var_tzname=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_var_tzname" 1>&6
  if test $ac_cv_var_tzname = yes; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_TZNAME
EOF
cat >> confdefs.h <<\EOF
#define HAVE_TZNAME 1
EOF
}

  fi
fi


echo $ac_n "checking for working const""... $ac_c" 1>&6
echo "configure:3715: checking for working const" >&5

cat > conftest.$ac_ext <<EOF
#line 3718 "configure"
#include "confdefs.h"

int main() {

/* Ultrix mips cc rejects this.  */
typedef int charset[2]; const charset x;
/* SunOS 4.1.1 cc rejects this.  */
char const *const *ccp;
char **p;
/* NEC SVR4.0.2 mips cc rejects this.  */
struct point {int x, y;};
static struct point const zero = {0,0};
/* AIX XL C 1.02.0.0 rejects this.
   It does not let you subtract one const X* pointer from another in an arm
   of an if-expression whose if-part is not a constant expression */
const char *g = "string";
ccp = &g + (g ? g-g : 0);
/* HPUX 7.0 cc rejects these. */
++ccp;
p = (char**) ccp;
ccp = (char const *const *) p;
{ /* SCO 3.2v4 cc rejects this.  */
  char *t;
  char const *s = 0 ? (char *) 0 : (char const *) 0;

  *t++ = 0;
}
{ /* Someone thinks the Sun supposedly-ANSI compiler will reject this.  */
  int x[] = {25, 17};
  const int *foo = &x[0];
  ++foo;
}
{ /* Sun SC1.0 ANSI compiler rejects this -- but not the above. */
  typedef const int *iptr;
  iptr p = 0;
  ++p;
}
{ /* AIX XL C 1.02.0.0 rejects this saying
     "k.c", line 2.27: 1506-025 (S) Operand must be a modifiable lvalue. */
  struct s { int j; const int *ap[3]; };
  struct s *b; b->j = 5;
}
{ /* ULTRIX-32 V3.1 (Rev 9) vcc rejects this */
  const int foo = 10;
}

; return 0; }
EOF
if { (eval echo configure:3767: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_c_const=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_c_const=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_c_const" 1>&6
if test $ac_cv_c_const = no; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining const = 
EOF
cat >> confdefs.h <<\EOF
#define const 
EOF
}

fi


echo $ac_n "checking whether ${MAKE-make} sets \${MAKE}""... $ac_c" 1>&6
echo "configure:3792: checking whether ${MAKE-make} sets \${MAKE}" >&5
set dummy ${MAKE-make}; ac_make=`echo "$2" | sed 'y%./+-%__p_%'`

cat > conftestmake <<\EOF
all:
	@echo 'ac_maketemp="${MAKE}"'
EOF
# GNU make sometimes prints "make[1]: Entering...", which would confuse us.
eval `${MAKE-make} -f conftestmake 2>/dev/null | grep temp=`
if test -n "$ac_maketemp"; then
  eval ac_cv_prog_make_${ac_make}_set=yes
else
  eval ac_cv_prog_make_${ac_make}_set=no
fi
rm -f conftestmake
if eval "test \"`echo '$ac_cv_prog_make_'${ac_make}_set`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  SET_MAKE=
else
  echo "$ac_t""no" 1>&6
  SET_MAKE="MAKE=${MAKE-make}"
fi


echo $ac_n "checking whether byte ordering is bigendian""... $ac_c" 1>&6
echo "configure:3817: checking whether byte ordering is bigendian" >&5

ac_cv_c_bigendian=unknown
# See if sys/param.h defines the BYTE_ORDER macro.
cat > conftest.$ac_ext <<EOF
#line 3822 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/param.h>
int main() {

#if !BYTE_ORDER || !BIG_ENDIAN || !LITTLE_ENDIAN
 bogus endian macros
#endif
; return 0; }
EOF
if { (eval echo configure:3833: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  # It does; now see whether it defined to BIG_ENDIAN or not.
cat > conftest.$ac_ext <<EOF
#line 3837 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/param.h>
int main() {

#if BYTE_ORDER != BIG_ENDIAN
 not big endian
#endif
; return 0; }
EOF
if { (eval echo configure:3848: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_c_bigendian=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_c_bigendian=no
fi
rm -f conftest*
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
if test $ac_cv_c_bigendian = unknown; then
cat > conftest.$ac_ext <<EOF
#line 3865 "configure"
#include "confdefs.h"
main () {
  /* Are we little or big endian?  From Harbison&Steele.  */
  union
  {
    long l;
    char c[sizeof (long)];
  } u;
  u.l = 1;
  exit (u.c[sizeof (long) - 1] == 1);
}
EOF
if { (eval echo configure:3878: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  ac_cv_c_bigendian=no
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_c_bigendian=yes
fi
rm -fr conftest*
fi

echo "$ac_t""$ac_cv_c_bigendian" 1>&6
if test $ac_cv_c_bigendian = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining WORDS_BIGENDIAN
EOF
cat >> confdefs.h <<\EOF
#define WORDS_BIGENDIAN 1
EOF
}

fi


echo $ac_n "checking size of short""... $ac_c" 1>&6
echo "configure:3905: checking size of short" >&5

cat > conftest.$ac_ext <<EOF
#line 3908 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(short));
  exit(0);
}
EOF
if { (eval echo configure:3919: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  ac_cv_sizeof_short=`cat conftestval`
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_short=0
fi
rm -fr conftest*
echo "$ac_t""$ac_cv_sizeof_short" 1>&6
{ test "$extra_verbose" = "yes" && cat << EOF
    Defining SIZEOF_SHORT = $ac_cv_sizeof_short
EOF
cat >> confdefs.h <<EOF
#define SIZEOF_SHORT $ac_cv_sizeof_short
EOF
}


if test "$ac_cv_sizeof_short" = 0; then
  echo ""
  echo "*** PANIC *** Configure tests are not working - compiler is broken."
  echo "*** PANIC *** Please examine config.log for compilation errors."
  exit 1
fi
echo $ac_n "checking size of int""... $ac_c" 1>&6
echo "configure:3947: checking size of int" >&5

cat > conftest.$ac_ext <<EOF
#line 3950 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(int));
  exit(0);
}
EOF
if { (eval echo configure:3961: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  ac_cv_sizeof_int=`cat conftestval`
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_int=0
fi
rm -fr conftest*
echo "$ac_t""$ac_cv_sizeof_int" 1>&6
{ test "$extra_verbose" = "yes" && cat << EOF
    Defining SIZEOF_INT = $ac_cv_sizeof_int
EOF
cat >> confdefs.h <<EOF
#define SIZEOF_INT $ac_cv_sizeof_int
EOF
}


echo $ac_n "checking size of long""... $ac_c" 1>&6
echo "configure:3983: checking size of long" >&5

cat > conftest.$ac_ext <<EOF
#line 3986 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(long));
  exit(0);
}
EOF
if { (eval echo configure:3997: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  ac_cv_sizeof_long=`cat conftestval`
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_long=0
fi
rm -fr conftest*
echo "$ac_t""$ac_cv_sizeof_long" 1>&6
{ test "$extra_verbose" = "yes" && cat << EOF
    Defining SIZEOF_LONG = $ac_cv_sizeof_long
EOF
cat >> confdefs.h <<EOF
#define SIZEOF_LONG $ac_cv_sizeof_long
EOF
}


echo $ac_n "checking size of long long""... $ac_c" 1>&6
echo "configure:4019: checking size of long long" >&5

cat > conftest.$ac_ext <<EOF
#line 4022 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(long long));
  exit(0);
}
EOF
if { (eval echo configure:4033: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  ac_cv_sizeof_long_long=`cat conftestval`
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_long_long=0
fi
rm -fr conftest*
echo "$ac_t""$ac_cv_sizeof_long_long" 1>&6
{ test "$extra_verbose" = "yes" && cat << EOF
    Defining SIZEOF_LONG_LONG = $ac_cv_sizeof_long_long
EOF
cat >> confdefs.h <<EOF
#define SIZEOF_LONG_LONG $ac_cv_sizeof_long_long
EOF
}


echo $ac_n "checking size of void *""... $ac_c" 1>&6
echo "configure:4055: checking size of void *" >&5

cat > conftest.$ac_ext <<EOF
#line 4058 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(void *));
  exit(0);
}
EOF
if { (eval echo configure:4069: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  ac_cv_sizeof_void_p=`cat conftestval`
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_void_p=0
fi
rm -fr conftest*
echo "$ac_t""$ac_cv_sizeof_void_p" 1>&6
{ test "$extra_verbose" = "yes" && cat << EOF
    Defining SIZEOF_VOID_P = $ac_cv_sizeof_void_p
EOF
cat >> confdefs.h <<EOF
#define SIZEOF_VOID_P $ac_cv_sizeof_void_p
EOF
}



echo $ac_n "checking for long file names""... $ac_c" 1>&6
echo "configure:4092: checking for long file names" >&5

ac_cv_sys_long_file_names=yes
# Test for long file names in all the places we know might matter:
#      .		the current directory, where building will happen
#      $prefix/lib	where we will be installing things
#      $exec_prefix/lib	likewise
# eval it to expand exec_prefix.
#      $TMPDIR		if set, where it might want to write temporary files
# if $TMPDIR is not set:
#      /tmp		where it might want to write temporary files
#      /var/tmp		likewise
#      /usr/tmp		likewise
if test -n "$TMPDIR" && test -d "$TMPDIR" && test -w "$TMPDIR"; then
  ac_tmpdirs="$TMPDIR"
else
  ac_tmpdirs='/tmp /var/tmp /usr/tmp'
fi
for ac_dir in  . $ac_tmpdirs `eval echo $prefix/lib $exec_prefix/lib` ; do
  test -d $ac_dir || continue
  test -w $ac_dir || continue # It is less confusing to not echo anything here.
  (echo 1 > $ac_dir/conftest9012345) 2>/dev/null
  (echo 2 > $ac_dir/conftest9012346) 2>/dev/null
  val=`cat $ac_dir/conftest9012345 2>/dev/null`
  if test ! -f $ac_dir/conftest9012345 || test "$val" != 1; then
    ac_cv_sys_long_file_names=no
    rm -f $ac_dir/conftest9012345 $ac_dir/conftest9012346 2>/dev/null
    break
  fi
  rm -f $ac_dir/conftest9012345 $ac_dir/conftest9012346 2>/dev/null
done

echo "$ac_t""$ac_cv_sys_long_file_names" 1>&6
if test $ac_cv_sys_long_file_names = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_LONG_FILE_NAMES
EOF
cat >> confdefs.h <<\EOF
#define HAVE_LONG_FILE_NAMES 1
EOF
}

fi



echo $ac_n "checking for sin in -lm""... $ac_c" 1>&6
echo "configure:4139: checking for sin in -lm" >&5
ac_lib_var=`echo m'_'sin | sed 'y%./+-%__p_%'`

xe_check_libs=" -lm "
cat > conftest.$ac_ext <<EOF
#line 4144 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char sin();

int main() {
sin()
; return 0; }
EOF
if { (eval echo configure:4155: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo m | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_lib
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF
}

  LIBS="-lm $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lm\" to \$LIBS"; fi

else
  echo "$ac_t""no" 1>&6
fi



{ test "$extra_verbose" = "yes" && cat << \EOF
    Defining LISP_FLOAT_TYPE
EOF
cat >> confdefs.h <<\EOF
#define LISP_FLOAT_TYPE 1
EOF
}


cat > conftest.$ac_ext <<EOF
#line 4197 "configure"
#include "confdefs.h"
#include <math.h>
int main() {
return atanh(1.0) + asinh(1.0) + acosh(1.0); 
; return 0; }
EOF
if { (eval echo configure:4204: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_INVERSE_HYPERBOLIC
EOF
cat >> confdefs.h <<\EOF
#define HAVE_INVERSE_HYPERBOLIC 1
EOF
}

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*

echo "checking type of mail spool file locking" 1>&6
echo "configure:4221: checking type of mail spool file locking" >&5
test -z "$mail_locking" -a "$mail_use_flock" = "yes" && mail_locking=flock
test -z "$mail_locking" -a "$mail_use_lockf" = "yes" && mail_locking=lockf
if   test "$mail_locking" = "lockf"; then { test "$extra_verbose" = "yes" && cat << \EOF
    Defining REAL_MAIL_USE_LOCKF
EOF
cat >> confdefs.h <<\EOF
#define REAL_MAIL_USE_LOCKF 1
EOF
}

elif test "$mail_locking" = "flock"; then { test "$extra_verbose" = "yes" && cat << \EOF
    Defining REAL_MAIL_USE_FLOCK
EOF
cat >> confdefs.h <<\EOF
#define REAL_MAIL_USE_FLOCK 1
EOF
}

else mail_locking="dot-locking"
fi


echo $ac_n "checking for kstat_open in -lkstat""... $ac_c" 1>&6
echo "configure:4245: checking for kstat_open in -lkstat" >&5
ac_lib_var=`echo kstat'_'kstat_open | sed 'y%./+-%__p_%'`

xe_check_libs=" -lkstat "
cat > conftest.$ac_ext <<EOF
#line 4250 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char kstat_open();

int main() {
kstat_open()
; return 0; }
EOF
if { (eval echo configure:4261: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo kstat | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_lib
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF
}

  LIBS="-lkstat $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lkstat\" to \$LIBS"; fi

else
  echo "$ac_t""no" 1>&6
fi




echo $ac_n "checking for kvm_read in -lkvm""... $ac_c" 1>&6
echo "configure:4295: checking for kvm_read in -lkvm" >&5
ac_lib_var=`echo kvm'_'kvm_read | sed 'y%./+-%__p_%'`

xe_check_libs=" -lkvm "
cat > conftest.$ac_ext <<EOF
#line 4300 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char kvm_read();

int main() {
kvm_read()
; return 0; }
EOF
if { (eval echo configure:4311: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo kvm | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_lib
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF
}

  LIBS="-lkvm $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lkvm\" to \$LIBS"; fi

else
  echo "$ac_t""no" 1>&6
fi



case "$opsys" in decosf*)
  
echo $ac_n "checking for cma_open in -lpthreads""... $ac_c" 1>&6
echo "configure:4346: checking for cma_open in -lpthreads" >&5
ac_lib_var=`echo pthreads'_'cma_open | sed 'y%./+-%__p_%'`

xe_check_libs=" -lpthreads "
cat > conftest.$ac_ext <<EOF
#line 4351 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char cma_open();

int main() {
cma_open()
; return 0; }
EOF
if { (eval echo configure:4362: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo pthreads | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_lib
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF
}

  LIBS="-lpthreads $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lpthreads\" to \$LIBS"; fi

else
  echo "$ac_t""no" 1>&6
fi


  test "$ac_cv_lib_pthreads_cma_open" = "yes" && \
    c_switch_site="$c_switch_site -threads" ;;
esac

echo $ac_n "checking whether the -xildoff compiler flag is required""... $ac_c" 1>&6
echo "configure:4398: checking whether the -xildoff compiler flag is required" >&5
if   ${CC-cc} '-###' -xildon  no_such_file.c 2>&1 | grep '^[^ ]*/ild ' > /dev/null ; then
  if ${CC-cc} '-###' -xildoff no_such_file.c 2>&1 | grep '^[^ ]*/ild ' > /dev/null ;
    then echo "$ac_t""no" 1>&6;
    else echo "$ac_t""yes" 1>&6; ld_switch_site="$ld_switch_site -xildoff" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"-xildoff\" to \$ld_switch_site"; fi
  fi
  else echo "$ac_t""no" 1>&6
fi

if test "$opsys" = "sol2" && test "$OS_RELEASE" -ge 56; then
  echo $ac_n "checking for \"-z ignore\" linker flag""... $ac_c" 1>&6
echo "configure:4409: checking for \"-z ignore\" linker flag" >&5
  case "`ld -h 2>&1`" in
    *-z\ ignore\|record* ) echo "$ac_t""yes" 1>&6
      ld_switch_site="-z ignore $ld_switch_site" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-z ignore\" to \$ld_switch_site"; fi ;;
    *) echo "$ac_t""no" 1>&6 ;;
  esac
fi


echo "checking "for specified window system"" 1>&6
echo "configure:4419: checking "for specified window system"" >&5

if test "$with_x11" != "no"; then
    test "$x_includes $x_libraries" != "NONE NONE" && \
   window_system=x11 with_x11=yes

        
      if test "$x_includes $x_libraries" = "NONE NONE" \
    -a -n "$OPENWINHOME" \
    -a "$OPENWINHOME" != "/usr/openwin" \
    -a -d "$OPENWINHOME"; then
      test -d "$OPENWINHOME/lib"           && x_libraries="$OPENWINHOME/lib"
      test -d "$OPENWINHOME/include"       && x_includes="$OPENWINHOME/include"
      test -d "$OPENWINHOME/share/include" && x_includes="$OPENWINHOME/share/include"
  fi

  if test "$x_includes" = "NONE"; then
                    for dir in "/usr/X11" "/usr/X11R6"; do
      if test -d "$dir/include/X11"; then x_includes="$dir/include"; break; fi
    done
  fi

  if test "$x_libraries" = "NONE"; then
    for dir in "/usr/X11/lib" "/usr/X11R6/lib" "/usr/lib/X11R6"; do
      if test -r "$dir/libX11.a"; then x_libraries="$dir"; break; fi
    done
  fi

  # If we find X, set shell vars x_includes and x_libraries to the
# paths, otherwise set no_x=yes.
# Uses ac_ vars as temps to allow command line to override cache and checks.
# --without-x overrides everything else, but does not touch the cache.
echo $ac_n "checking for X""... $ac_c" 1>&6
echo "configure:4452: checking for X" >&5

# Check whether --with-x or --without-x was given.
if test "${with_x+set}" = set; then
  withval="$with_x"
  :
fi

# $have_x is `yes', `no', `disabled', or empty when we do not yet know.
if test "x$with_x" = xno; then
  # The user explicitly disabled X.
  have_x=disabled
else
  if test "x$x_includes" != xNONE && test "x$x_libraries" != xNONE; then
    # Both variables are already set.
    have_x=yes
  else

# One or both of the vars are not set, and there is no cached value.
ac_x_includes=NO ac_x_libraries=NO
rm -fr conftestdir
if mkdir conftestdir; then
  cd conftestdir
  # Make sure to not put "make" in the Imakefile rules, since we grep it out.
  cat > Imakefile <<'EOF'
acfindx:
	@echo 'ac_im_incroot="${INCROOT}"; ac_im_usrlibdir="${USRLIBDIR}"; ac_im_libdir="${LIBDIR}"'
EOF
  if (xmkmf) >/dev/null 2>/dev/null && test -f Makefile; then
    # GNU make sometimes prints "make[1]: Entering...", which would confuse us.
    eval `${MAKE-make} acfindx 2>/dev/null | grep -v make`
    # Open Windows xmkmf reportedly sets LIBDIR instead of USRLIBDIR.
    for ac_extension in a so sl; do
      if test ! -f $ac_im_usrlibdir/libX11.$ac_extension &&
        test -f $ac_im_libdir/libX11.$ac_extension; then
        ac_im_usrlibdir=$ac_im_libdir; break
      fi
    done
    # Screen out bogus values from the imake configuration.  They are
    # bogus both because they are the default anyway, and because
    # using them would break gcc on systems where it needs fixed includes.
    case "$ac_im_incroot" in
	/usr/include) ;;
	*) test -f "$ac_im_incroot/X11/Xos.h" && ac_x_includes="$ac_im_incroot" ;;
    esac
    case "$ac_im_usrlibdir" in
	/usr/lib | /lib) ;;
	*) test -d "$ac_im_usrlibdir" && ac_x_libraries="$ac_im_usrlibdir" ;;
    esac
  fi
  cd ..
  rm -fr conftestdir
fi

if test "$ac_x_includes" = NO; then
  # Guess where to find include files, by looking for this one X11 .h file.
  test -z "$x_direct_test_include" && x_direct_test_include=X11/Intrinsic.h

  # First, try using that file with no special directory specified.
cat > conftest.$ac_ext <<EOF
#line 4512 "configure"
#include "confdefs.h"
#include <$x_direct_test_include>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:4517: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  # We can compile using X headers with no special include directory.
ac_x_includes=
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  # Look for the header file in a standard set of common directories.
# Check X11 before X11Rn because it is often a symlink to the current release.
  for ac_dir in               \
    /usr/X11/include          \
    /usr/X11R6/include        \
    /usr/X11R5/include        \
    /usr/X11R4/include        \
                              \
    /usr/include/X11          \
    /usr/include/X11R6        \
    /usr/include/X11R5        \
    /usr/include/X11R4        \
                              \
    /usr/local/X11/include    \
    /usr/local/X11R6/include  \
    /usr/local/X11R5/include  \
    /usr/local/X11R4/include  \
                              \
    /usr/local/include/X11    \
    /usr/local/include/X11R6  \
    /usr/local/include/X11R5  \
    /usr/local/include/X11R4  \
                              \
    /usr/X386/include         \
    /usr/x386/include         \
    /usr/XFree86/include/X11  \
                              \
    /usr/include              \
    /usr/local/include        \
    /usr/unsupported/include  \
    /usr/athena/include       \
    /usr/local/x11r5/include  \
    /usr/lpp/Xamples/include  \
                              \
    /usr/openwin/include      \
    /usr/openwin/share/include \
    ; \
  do
    if test -r "$ac_dir/$x_direct_test_include"; then
      ac_x_includes=$ac_dir
      break
    fi
  done
fi
rm -f conftest*
fi # $ac_x_includes = NO

if test "$ac_x_libraries" = NO; then
  # Check for the libraries.

  test -z "$x_direct_test_library" && x_direct_test_library=Xt
  test -z "$x_direct_test_function" && x_direct_test_function=XtMalloc

  # See if we find them without any special options.
  # Don't add to $LIBS permanently.
  ac_save_LIBS="$LIBS"
  LIBS="-l$x_direct_test_library $LIBS"
cat > conftest.$ac_ext <<EOF
#line 4586 "configure"
#include "confdefs.h"

int main() {
${x_direct_test_function}()
; return 0; }
EOF
if { (eval echo configure:4593: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  LIBS="$ac_save_LIBS"
# We can link X programs with no special library path.
ac_x_libraries=
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  LIBS="$ac_save_LIBS"
# First see if replacing the include by lib works.
# Check X11 before X11Rn because it is often a symlink to the current release.
for ac_dir in `echo "$ac_x_includes" | sed s/include/lib/` \
    /usr/X11/lib          \
    /usr/X11R6/lib        \
    /usr/X11R5/lib        \
    /usr/X11R4/lib        \
                          \
    /usr/lib/X11          \
    /usr/lib/X11R6        \
    /usr/lib/X11R5        \
    /usr/lib/X11R4        \
                          \
    /usr/local/X11/lib    \
    /usr/local/X11R6/lib  \
    /usr/local/X11R5/lib  \
    /usr/local/X11R4/lib  \
                          \
    /usr/local/lib/X11    \
    /usr/local/lib/X11R6  \
    /usr/local/lib/X11R5  \
    /usr/local/lib/X11R4  \
                          \
    /usr/X386/lib         \
    /usr/x386/lib         \
    /usr/XFree86/lib/X11  \
                          \
    /usr/lib              \
    /usr/local/lib        \
    /usr/unsupported/lib  \
    /usr/athena/lib       \
    /usr/local/x11r5/lib  \
    /usr/lpp/Xamples/lib  \
    /lib/usr/lib/X11	  \
                          \
    /usr/openwin/lib      \
    /usr/openwin/share/lib \
    ; \
do
  for ac_extension in a so sl; do
    if test -r $ac_dir/lib${x_direct_test_library}.$ac_extension; then
      ac_x_libraries=$ac_dir
      break 2
    fi
  done
done
fi
rm -f conftest*
fi # $ac_x_libraries = NO

if test "$ac_x_includes" = NO || test "$ac_x_libraries" = NO; then
  # Didn't find X anywhere.  Cache the known absence of X.
  ac_cv_have_x="have_x=no"
else
  # Record where we found X for the cache.
  ac_cv_have_x="have_x=yes \
	        ac_x_includes=$ac_x_includes ac_x_libraries=$ac_x_libraries"
fi
  fi
  eval "$ac_cv_have_x"
fi # $with_x != no

if test "$have_x" != yes; then
  echo "$ac_t""$have_x" 1>&6
  no_x=yes
else
  # If each of the values was on the command line, it overrides each guess.
  test "x$x_includes" = xNONE && x_includes=$ac_x_includes
  test "x$x_libraries" = xNONE && x_libraries=$ac_x_libraries
  # Update the cache value to reflect the command line values.
  ac_cv_have_x="have_x=yes \
		ac_x_includes=$x_includes ac_x_libraries=$x_libraries"
  echo "$ac_t""libraries $x_libraries, headers $x_includes" 1>&6
fi

if test "$no_x" = yes; then
  # Not all programs may use this symbol, but it does not hurt to define it.
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining X_DISPLAY_MISSING
EOF
cat >> confdefs.h <<\EOF
#define X_DISPLAY_MISSING 1
EOF
}

  X_CFLAGS= X_PRE_LIBS= X_LIBS= X_EXTRA_LIBS=
else
  if test -n "$x_includes"; then
    X_CFLAGS="$X_CFLAGS -I$x_includes"
  fi

  # It would also be nice to do this for all -L options, not just this one.
  if test -n "$x_libraries"; then
    X_LIBS="$X_LIBS -L$x_libraries"
    # For Solaris; some versions of Sun CC require a space after -R and
    # others require no space.  Words are not sufficient . . . .
    case "`(uname -sr) 2>/dev/null`" in
    "SunOS 5"*)
      echo $ac_n "checking whether -R must be followed by a space""... $ac_c" 1>&6
echo "configure:4702: checking whether -R must be followed by a space" >&5
      ac_xsave_LIBS="$LIBS"; LIBS="$LIBS -R$x_libraries"
      cat > conftest.$ac_ext <<EOF
#line 4705 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:4712: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  ac_R_nospace=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_R_nospace=no
fi
rm -f conftest*
      if test $ac_R_nospace = yes; then
	echo "$ac_t""no" 1>&6
	X_LIBS="$X_LIBS -R$x_libraries"
      else
	LIBS="$ac_xsave_LIBS -R $x_libraries"
	cat > conftest.$ac_ext <<EOF
#line 4728 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:4735: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  ac_R_space=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_R_space=no
fi
rm -f conftest*
	if test $ac_R_space = yes; then
	  echo "$ac_t""yes" 1>&6
	  X_LIBS="$X_LIBS -R $x_libraries"
	else
	  echo "$ac_t""neither works" 1>&6
	fi
      fi
      LIBS="$ac_xsave_LIBS"
    esac
  fi

  # Check for system-dependent libraries X programs must link with.
  # Do this before checking for the system-independent R6 libraries
  # (-lICE), since we may need -lsocket or whatever for X linking.

  if test "$ISC" = yes; then
    X_EXTRA_LIBS="$X_EXTRA_LIBS -lnsl_s -linet"
  else
    # Martyn.Johnson@cl.cam.ac.uk says this is needed for Ultrix, if the X
    # libraries were built with DECnet support.  And karl@cs.umb.edu says
    # the Alpha needs dnet_stub (dnet does not exist).
    if test "$with_dnet" = "no" ; then
ac_cv_lib_dnet_dnet_ntoa=no
else

echo $ac_n "checking for dnet_ntoa in -ldnet""... $ac_c" 1>&6
echo "configure:4771: checking for dnet_ntoa in -ldnet" >&5
ac_lib_var=`echo dnet'_'dnet_ntoa | sed 'y%./+-%__p_%'`

xe_check_libs=" -ldnet "
cat > conftest.$ac_ext <<EOF
#line 4776 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dnet_ntoa();

int main() {
dnet_ntoa()
; return 0; }
EOF
if { (eval echo configure:4787: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  X_EXTRA_LIBS="$X_EXTRA_LIBS -ldnet"
else
  echo "$ac_t""no" 1>&6
fi

fi

    if test $ac_cv_lib_dnet_dnet_ntoa = no; then
      
echo $ac_n "checking for dnet_ntoa in -ldnet_stub""... $ac_c" 1>&6
echo "configure:4811: checking for dnet_ntoa in -ldnet_stub" >&5
ac_lib_var=`echo dnet_stub'_'dnet_ntoa | sed 'y%./+-%__p_%'`

xe_check_libs=" -ldnet_stub "
cat > conftest.$ac_ext <<EOF
#line 4816 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dnet_ntoa();

int main() {
dnet_ntoa()
; return 0; }
EOF
if { (eval echo configure:4827: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  X_EXTRA_LIBS="$X_EXTRA_LIBS -ldnet_stub"
else
  echo "$ac_t""no" 1>&6
fi


    fi

    # msh@cis.ufl.edu says -lnsl (and -lsocket) are needed for his 386/AT,
    # to get the SysV transport functions.
    # chad@anasazi.com says the Pyramis MIS-ES running DC/OSx (SVR4)
    # needs -lnsl.
    # The nsl library prevents programs from opening the X display
    # on Irix 5.2, according to dickey@clark.net.
    echo $ac_n "checking for gethostbyname""... $ac_c" 1>&6
echo "configure:4856: checking for gethostbyname" >&5

cat > conftest.$ac_ext <<EOF
#line 4859 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char gethostbyname(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gethostbyname();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_gethostbyname) || defined (__stub___gethostbyname)
choke me
#else
gethostbyname();
#endif

; return 0; }
EOF
if { (eval echo configure:4882: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_func_gethostbyname=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_gethostbyname=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'gethostbyname`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
fi

    if test $ac_cv_func_gethostbyname = no; then
      
echo $ac_n "checking for gethostbyname in -lnsl""... $ac_c" 1>&6
echo "configure:4903: checking for gethostbyname in -lnsl" >&5
ac_lib_var=`echo nsl'_'gethostbyname | sed 'y%./+-%__p_%'`

xe_check_libs=" -lnsl "
cat > conftest.$ac_ext <<EOF
#line 4908 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gethostbyname();

int main() {
gethostbyname()
; return 0; }
EOF
if { (eval echo configure:4919: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  X_EXTRA_LIBS="$X_EXTRA_LIBS -lnsl"
else
  echo "$ac_t""no" 1>&6
fi


    fi

    # lieder@skyler.mavd.honeywell.com says without -lsocket,
    # socket/setsockopt and other routines are undefined under SCO ODT
    # 2.0.  But -lsocket is broken on IRIX 5.2 (and is not necessary
    # on later versions), says simon@lia.di.epfl.ch: it contains
    # gethostby* variants that don't use the nameserver (or something).
    # -lsocket must be given before -lnsl if both are needed.
    # We assume that if connect needs -lnsl, so does gethostbyname.
    echo $ac_n "checking for connect""... $ac_c" 1>&6
echo "configure:4949: checking for connect" >&5

cat > conftest.$ac_ext <<EOF
#line 4952 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char connect(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char connect();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_connect) || defined (__stub___connect)
choke me
#else
connect();
#endif

; return 0; }
EOF
if { (eval echo configure:4975: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_func_connect=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_connect=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'connect`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
fi

    if test $ac_cv_func_connect = no; then
      
xe_msg_checking="for connect in -lsocket"
test -n "$X_EXTRA_LIBS" && xe_msg_checking="$xe_msg_checking using extra libs $X_EXTRA_LIBS"
echo $ac_n "checking "$xe_msg_checking"""... $ac_c" 1>&6
echo "configure:4998: checking "$xe_msg_checking"" >&5
ac_lib_var=`echo socket'_'connect | sed 'y%./+-%__p_%'`

xe_check_libs=" -lsocket $X_EXTRA_LIBS"
cat > conftest.$ac_ext <<EOF
#line 5003 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char connect();

int main() {
connect()
; return 0; }
EOF
if { (eval echo configure:5014: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  X_EXTRA_LIBS="-lsocket $X_EXTRA_LIBS"
else
  echo "$ac_t""no" 1>&6
fi


    fi

    # gomez@mi.uni-erlangen.de says -lposix is necessary on A/UX.
    echo $ac_n "checking for remove""... $ac_c" 1>&6
echo "configure:5038: checking for remove" >&5

cat > conftest.$ac_ext <<EOF
#line 5041 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char remove(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char remove();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_remove) || defined (__stub___remove)
choke me
#else
remove();
#endif

; return 0; }
EOF
if { (eval echo configure:5064: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_func_remove=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_remove=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'remove`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
fi

    if test $ac_cv_func_remove = no; then
      
echo $ac_n "checking for remove in -lposix""... $ac_c" 1>&6
echo "configure:5085: checking for remove in -lposix" >&5
ac_lib_var=`echo posix'_'remove | sed 'y%./+-%__p_%'`

xe_check_libs=" -lposix "
cat > conftest.$ac_ext <<EOF
#line 5090 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char remove();

int main() {
remove()
; return 0; }
EOF
if { (eval echo configure:5101: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  X_EXTRA_LIBS="$X_EXTRA_LIBS -lposix"
else
  echo "$ac_t""no" 1>&6
fi


    fi

    # BSDI BSD/OS 2.1 needs -lipc for XOpenDisplay.
    echo $ac_n "checking for shmat""... $ac_c" 1>&6
echo "configure:5125: checking for shmat" >&5

cat > conftest.$ac_ext <<EOF
#line 5128 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char shmat(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char shmat();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_shmat) || defined (__stub___shmat)
choke me
#else
shmat();
#endif

; return 0; }
EOF
if { (eval echo configure:5151: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_func_shmat=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_shmat=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'shmat`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
fi

    if test $ac_cv_func_shmat = no; then
      
echo $ac_n "checking for shmat in -lipc""... $ac_c" 1>&6
echo "configure:5172: checking for shmat in -lipc" >&5
ac_lib_var=`echo ipc'_'shmat | sed 'y%./+-%__p_%'`

xe_check_libs=" -lipc "
cat > conftest.$ac_ext <<EOF
#line 5177 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char shmat();

int main() {
shmat()
; return 0; }
EOF
if { (eval echo configure:5188: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  X_EXTRA_LIBS="$X_EXTRA_LIBS -lipc"
else
  echo "$ac_t""no" 1>&6
fi


    fi
  fi

  # Check for libraries that X11R6 Xt/Xaw programs need.
  ac_save_LDFLAGS="$LDFLAGS"
  test -n "$x_libraries" && LDFLAGS="$LDFLAGS -L$x_libraries"
  # SM needs ICE to (dynamically) link under SunOS 4.x (so we have to
  # check for ICE first), but we must link in the order -lSM -lICE or
  # we get undefined symbols.  So assume we have SM if we have ICE.
  # These have to be linked with before -lX11, unlike the other
  # libraries we check for below, so use a different variable.
  #  --interran@uluru.Stanford.EDU, kb@cs.umb.edu.
  
echo $ac_n "checking for IceConnectionNumber in -lICE""... $ac_c" 1>&6
echo "configure:5222: checking for IceConnectionNumber in -lICE" >&5
ac_lib_var=`echo ICE'_'IceConnectionNumber | sed 'y%./+-%__p_%'`

xe_check_libs=" -lICE "
cat > conftest.$ac_ext <<EOF
#line 5227 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char IceConnectionNumber();

int main() {
IceConnectionNumber()
; return 0; }
EOF
if { (eval echo configure:5238: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  X_PRE_LIBS="$X_PRE_LIBS -lSM -lICE"
else
  echo "$ac_t""no" 1>&6
fi


  LDFLAGS="$ac_save_LDFLAGS"

fi
 # Autoconf claims to find X library and include dirs for us.
  if test "$no_x" = "yes"
  then with_x11=no  window_system=none HAVE_X_WINDOWS=no
  else with_x11=yes window_system=x11  HAVE_X_WINDOWS=yes
  fi
fi

case "$with_x11" in
  yes ) window_system=x11  HAVE_X_WINDOWS=yes ;;
  no  ) window_system=none HAVE_X_WINDOWS=no  ;;
esac

if test "$with_x11" = "yes"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_X_WINDOWS
EOF
cat >> confdefs.h <<\EOF
#define HAVE_X_WINDOWS 1
EOF
}

  MAKE_SUBDIR="$MAKE_SUBDIR lwlib" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"lwlib\" to \$MAKE_SUBDIR"; fi
  SRC_SUBDIR_DEPS="$SRC_SUBDIR_DEPS lwlib" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"lwlib\" to \$SRC_SUBDIR_DEPS"; fi

      for lib_dir in "/usr/dt/lib" "/usr/lib/Motif2.1" "/usr/lib/Motif1.2" "/usr/lib/Motif1.1"; do
    inc_dir=`echo $lib_dir | sed -e 's/lib/include/'`
    if test -d "$lib_dir" -a -d "$inc_dir"; then
      case "$x_libraries" in *"$lib_dir"* ) ;; *)
        x_libraries="$lib_dir $x_libraries"
        X_LIBS="-L${lib_dir} $X_LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-L${lib_dir}\" to \$X_LIBS"; fi ;;
      esac
      case "$x_includes" in "$inc_dir"* ) ;; *)
        x_includes="$inc_dir $x_includes"
        X_CFLAGS="-I${inc_dir} $X_CFLAGS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-I${inc_dir}\" to \$X_CFLAGS"; fi ;;
      esac
      break;       fi
  done

    for rel in "X11R6" "X11R5" "X11R4"; do
    lib_dir="/usr/contrib/$rel/lib" inc_dir="/usr/contrib/$rel/include"
    if test -d "$lib_dir" -a -d "$inc_dir"; then
      case "$x_libraries" in *"$lib_dir"* ) ;; *)
        x_libraries="$x_libraries $lib_dir"
	X_LIBS="$X_LIBS -L${lib_dir}" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"-L${lib_dir}\" to \$X_LIBS"; fi
      esac
      case "$x_includes" in "$inc_dir"* ) ;; *)
        x_includes="$x_includes $inc_dir"
        X_CFLAGS="$X_CFLAGS -I${inc_dir}" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"-I${inc_dir}\" to \$X_CFLAGS"; fi
      esac
      break;     fi
  done

    if test "$GCC" = yes -a -d /usr/shlib; then X_LIBS="$X_LIBS -L/usr/shlib" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"-L/usr/shlib\" to \$X_LIBS"; fi; fi

  ld_switch_x_site="$X_LIBS"

  
if test "$add_runtime_path" = "yes" -a -n "$dash_r"; then
    ld_switch_site=`echo   '' $ld_switch_site   | sed -e 's:^ ::' -e "s/$dash_r[^ ]*//g"`
  ld_switch_x_site=`echo '' $ld_switch_x_site | sed -e 's:^ ::' -e "s/$dash_r[^ ]*//g"`
  
        runpath="" runpath_dirs=""
  if test -n "$LD_RUN_PATH"; then
    runpath="$LD_RUN_PATH"
  elif test "$GCC" = "yes"; then
        ld_switch_run_save="$ld_switch_run"; ld_switch_run=""
    echo "int main(int argc, char *argv[]) {return 0;}" > conftest.c
    xe_runpath_link='${CC-cc} -o conftest -v $CFLAGS '"$xe_ldflags"' conftest.$ac_ext 2>&1 1>/dev/null'
    for arg in `eval "$xe_runpath_link" | grep ' -L'`; do
      case "$arg" in P,* | -L* | -R* )
        for dir in `echo '' "$arg" | sed -e 's:^ ::' -e 's/^..//' -e 'y/:/ /'`; do
          {
xe_runpath_dir="$dir"
  test "$xe_runpath_dir" != "/lib"     -a \
	"$xe_runpath_dir" != "/usr/lib" -a \
	-n "`ls ${xe_runpath_dir}/*.s[ol] 2>/dev/null`" && \
  eval "$xe_add_unique_runpath_dir"
}
        done ;;
      esac
    done
    ld_switch_run="$ld_switch_run_save"
    rm -f conftest*
  else
        for arg in $ld_switch_site $ld_switch_x_site; do
      case "$arg" in -L*) {
xe_runpath_dir=`echo '' "$arg" | sed -e 's:^ ::' -e 's/^-L//'`
  test "$xe_runpath_dir" != "/lib"     -a \
	"$xe_runpath_dir" != "/usr/lib" -a \
	-n "`ls ${xe_runpath_dir}/*.s[ol] 2>/dev/null`" && \
  eval "$xe_add_unique_runpath_dir"
};; esac
    done
        if test "$opsys $need_motif" = "sol2 yes"; then
      xe_runpath_dir="/opt/SUNWdt/lib";
      eval "$xe_add_unique_runpath_dir";
    fi
  fi 
  if test -n "$runpath"; then
    ld_switch_run="${dash_r}${runpath}"
    
if test "$GCC" = "yes"; then
  set x $ld_switch_run; shift; ld_switch_run=""
  while test -n "$1"; do
    case $1 in
      -L  | -l  | -u               ) ld_switch_run="$ld_switch_run $1 $2"; shift ;;
      -L* | -l* | -u* | -Wl* | -pg ) ld_switch_run="$ld_switch_run $1" ;;
      -Xlinker* ) ;;
      * ) ld_switch_run="$ld_switch_run -Xlinker $1" ;;
    esac
    shift
  done
fi
    test "$extra_verbose" = "yes" && echo "Setting runpath to $runpath"
  fi
fi


  if test "$extra_verbose" = "yes"; then
    echo; echo "X11 compilation variables:"
    for var in x_libraries x_includes X_CFLAGS X_LIBS X_PRE_LIBS X_EXTRA_LIBS; do eval "echo \"$var = '\$$var'\""; done
    echo
  fi

            bitmapdirs=
  if test "$x_includes" != NONE; then
    for i in $x_includes; do
      if test -d "$i/bitmaps"; then
	bitmapdirs="$i/bitmaps:$bitmapdirs"
      fi
      if test -d "$i/X11/bitmaps"; then
	bitmapdirs="$i/X11/bitmaps:$bitmapdirs"
      fi
    done
    bitmapdirs=`echo "$bitmapdirs" | sed s/.$//`
  fi
  test ! -z "$bitmapdirs" && { test "$extra_verbose" = "yes" && cat << EOF
    Defining BITMAPDIR = "$bitmapdirs"
EOF
cat >> confdefs.h <<EOF
#define BITMAPDIR "$bitmapdirs"
EOF
}


    echo "checking for X defines extracted by xmkmf" 1>&6
echo "configure:5407: checking for X defines extracted by xmkmf" >&5
  rm -fr conftestdir
  if mkdir conftestdir; then
    cd conftestdir
    cat > Imakefile <<'EOF'
xetest:
	@echo ${PROTO_DEFINES} ${STD_DEFINES}
EOF
    if (xmkmf) >/dev/null 2>/dev/null && test -f Makefile; then
      # GNU make sometimes prints "make[1]: Entering...", which would confuse us.
      xmkmf_defines=`${MAKE-make} xetest 2>/dev/null | grep -v make`
    fi
    cd ..
    rm -fr conftestdir
    for word in $xmkmf_defines; do
      case "$word" in
	-D*=* ) ;;
	-D* ) word=`echo '' $word | sed -e 's:^ *-D::'`
	      { test "$extra_verbose" = "yes" && cat << EOF
    Defining $word
EOF
cat >> confdefs.h <<EOF
#define $word 1
EOF
}
 ;;
      esac
    done
  fi

    ac_safe=`echo "X11/Intrinsic.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for X11/Intrinsic.h""... $ac_c" 1>&6
echo "configure:5439: checking for X11/Intrinsic.h" >&5

cat > conftest.$ac_ext <<EOF
#line 5442 "configure"
#include "confdefs.h"
#include <X11/Intrinsic.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:5447: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: "Unable to find X11 header files."" 1>&2; exit 1; }
fi


      
echo $ac_n "checking for XOpenDisplay in -lX11""... $ac_c" 1>&6
echo "configure:5471: checking for XOpenDisplay in -lX11" >&5
ac_lib_var=`echo X11'_'XOpenDisplay | sed 'y%./+-%__p_%'`

xe_check_libs=" -lX11 "
cat > conftest.$ac_ext <<EOF
#line 5476 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XOpenDisplay();

int main() {
XOpenDisplay()
; return 0; }
EOF
if { (eval echo configure:5487: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  have_lib_x11=yes
else
  echo "$ac_t""no" 1>&6
fi


  if test "$have_lib_x11" != "yes"; then
    
xe_msg_checking="for XGetFontProperty in -lX11"
test -n "-b i486-linuxaout" && xe_msg_checking="$xe_msg_checking using extra libs -b i486-linuxaout"
echo $ac_n "checking "$xe_msg_checking"""... $ac_c" 1>&6
echo "configure:5512: checking "$xe_msg_checking"" >&5
ac_lib_var=`echo X11'_'XGetFontProperty | sed 'y%./+-%__p_%'`

xe_check_libs=" -lX11 -b i486-linuxaout"
cat > conftest.$ac_ext <<EOF
#line 5517 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XGetFontProperty();

int main() {
XGetFontProperty()
; return 0; }
EOF
if { (eval echo configure:5528: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  ld_switch_x_site="-b i486-linuxaout $ld_switch_x_site"
else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: "Unable to find X11 libraries."" 1>&2; exit 1; }
fi


  fi
  libs_x="-lX11"
  test "$extra_verbose" = "yes" && echo "    Setting libs_x to \"-lX11\""

    
echo $ac_n "checking for XShapeSelectInput in -lXext""... $ac_c" 1>&6
echo "configure:5555: checking for XShapeSelectInput in -lXext" >&5
ac_lib_var=`echo Xext'_'XShapeSelectInput | sed 'y%./+-%__p_%'`

xe_check_libs=" -lXext "
cat > conftest.$ac_ext <<EOF
#line 5560 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XShapeSelectInput();

int main() {
XShapeSelectInput()
; return 0; }
EOF
if { (eval echo configure:5571: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  libs_x="-lXext $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lXext\" to \$libs_x"; fi
else
  echo "$ac_t""no" 1>&6
fi



    
echo $ac_n "checking for XtOpenDisplay in -lXt""... $ac_c" 1>&6
echo "configure:5594: checking for XtOpenDisplay in -lXt" >&5
ac_lib_var=`echo Xt'_'XtOpenDisplay | sed 'y%./+-%__p_%'`

xe_check_libs=" -lXt "
cat > conftest.$ac_ext <<EOF
#line 5599 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XtOpenDisplay();

int main() {
XtOpenDisplay()
; return 0; }
EOF
if { (eval echo configure:5610: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  libs_x="-lXt $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lXt\" to \$libs_x"; fi
else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: "Unable to find X11 libraries."" 1>&2; exit 1; }
fi



  echo $ac_n "checking the version of X11 being used""... $ac_c" 1>&6
echo "configure:5633: checking the version of X11 being used" >&5
  cat > conftest.$ac_ext <<EOF
#line 5635 "configure"
#include "confdefs.h"
#include <X11/Intrinsic.h>
    int main(int c, char *v[]) { return c>1 ? XlibSpecificationRelease : 0; }
EOF
if { (eval echo configure:5640: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  ./conftest foobar; x11_release=$?
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  x11_release=4
fi
rm -fr conftest*
  echo "$ac_t""R${x11_release}" 1>&6
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining THIS_IS_X11R${x11_release}
EOF
cat >> confdefs.h <<EOF
#define THIS_IS_X11R${x11_release} 1
EOF
}


  for ac_hdr in X11/Xlocale.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:5665: checking for $ac_hdr" >&5

cat > conftest.$ac_ext <<EOF
#line 5668 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:5673: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_hdr
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done


    echo $ac_n "checking for XFree86""... $ac_c" 1>&6
echo "configure:5704: checking for XFree86" >&5
  if test -d "/usr/X386/include" -o \
          -f "/etc/XF86Config"    -o \
	  -f "/etc/X11/XF86Config" -o \
	  -f "/usr/X11R6/lib/X11/XF86Config"; then
    echo "$ac_t""yes" 1>&6
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_XFREE386
EOF
cat >> confdefs.h <<\EOF
#define HAVE_XFREE386 1
EOF
}

  else
    echo "$ac_t""no" 1>&6
  fi

    test -z "$with_xmu" && { 
echo $ac_n "checking for XmuReadBitmapDataFromFile in -lXmu""... $ac_c" 1>&6
echo "configure:5724: checking for XmuReadBitmapDataFromFile in -lXmu" >&5
ac_lib_var=`echo Xmu'_'XmuReadBitmapDataFromFile | sed 'y%./+-%__p_%'`

xe_check_libs=" -lXmu "
cat > conftest.$ac_ext <<EOF
#line 5729 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XmuReadBitmapDataFromFile();

int main() {
XmuReadBitmapDataFromFile()
; return 0; }
EOF
if { (eval echo configure:5740: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  with_xmu=yes
else
  echo "$ac_t""no" 1>&6
with_xmu=no
fi

 }
  if test "$with_xmu" = "no"; then
    extra_objs="$extra_objs xmu.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"xmu.o\""
 fi
  else
    libs_x="-lXmu $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lXmu\" to \$libs_x"; fi
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_XMU
EOF
cat >> confdefs.h <<\EOF
#define HAVE_XMU 1
EOF
}

  fi

      
echo $ac_n "checking for main in -lXbsd""... $ac_c" 1>&6
echo "configure:5779: checking for main in -lXbsd" >&5
ac_lib_var=`echo Xbsd'_'main | sed 'y%./+-%__p_%'`

xe_check_libs=" -lXbsd "
cat > conftest.$ac_ext <<EOF
#line 5784 "configure"
#include "confdefs.h"

int main() {
main()
; return 0; }
EOF
if { (eval echo configure:5791: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  libs_x="-lXbsd $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lXbsd\" to \$libs_x"; fi
else
  echo "$ac_t""no" 1>&6
fi



    if test "$unexec" = "unexaix.o" -a "$x11_release" = "6"; then
        if test "$GCC" = "yes"; then
      X_CFLAGS="-mthreads $X_CFLAGS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-mthreads\" to \$X_CFLAGS"; fi
      libs_x="-mthreads $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-mthreads\" to \$libs_x"; fi
    else
      case "$CC" in
        "xlc" ) CC="xlc_r" ;;
        "xlC" ) CC="xlC_r" ;;
        "cc"  ) CC="cc_r" ;;
      esac
    fi
  fi

fi 
if test "$with_msw" != "no"; then
  echo "checking for MS-Windows" 1>&6
echo "configure:5828: checking for MS-Windows" >&5
  
echo $ac_n "checking for main in -lgdi32""... $ac_c" 1>&6
echo "configure:5831: checking for main in -lgdi32" >&5
ac_lib_var=`echo gdi32'_'main | sed 'y%./+-%__p_%'`

xe_check_libs=" -lgdi32 "
cat > conftest.$ac_ext <<EOF
#line 5836 "configure"
#include "confdefs.h"

int main() {
main()
; return 0; }
EOF
if { (eval echo configure:5843: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  with_msw=yes
else
  echo "$ac_t""no" 1>&6
fi


  if test "$with_msw" = "yes"; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_MS_WINDOWS
EOF
cat >> confdefs.h <<\EOF
#define HAVE_MS_WINDOWS 1
EOF
}

    install_pp="$blddir/lib-src/installexe.sh"
    libs_system="$libs_system -lshell32 -lgdi32 -luser32 -lcomctl32" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"-lshell32 -lgdi32 -luser32 -lcomctl32\" to \$libs_system"; fi
    test "$with_dragndrop" != no && dragndrop_proto="$dragndrop_proto msw" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"msw\" to \$dragndrop_proto"; fi
    if test "$window_system" != x11; then
 	window_system=msw
	test "$with_scrollbars" != "no" && with_scrollbars=msw \
	    && extra_objs="$extra_objs scrollbar-msw.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"scrollbar-msw.o\""
 fi
	test "$with_menubars"   != "no" && with_menubars=msw \
	    && extra_objs="$extra_objs menubar-msw.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"menubar-msw.o\""
 fi
	test "$with_toolbars"   != "no" && with_toolbars=msw \
	    && extra_objs="$extra_objs toolbar-msw.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"toolbar-msw.o\""
 fi
	test "$with_dialogs"   != "no" && with_dialogs=msw \
	    && extra_objs="$extra_objs dialog-msw.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"dialog-msw.o\""
 fi
    else
	test "$with_scrollbars" != "no" && extra_objs="$extra_objs scrollbar-msw.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"scrollbar-msw.o\""
 fi
	test "$with_menubars"   != "no" && extra_objs="$extra_objs menubar-msw.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"menubar-msw.o\""
 fi
	test "$with_toolbars"   != "no" && extra_objs="$extra_objs toolbar-msw.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"toolbar-msw.o\""
 fi
	test "$with_dialogs"    != "no" && extra_objs="$extra_objs dialog-msw.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"dialog-msw.o\""
 fi
    fi
        cat > conftest.$ac_ext <<EOF
#line 5908 "configure"
#include "confdefs.h"
#include <fcntl.h>
    int main() { return (open("/dev/windows", O_RDONLY, 0) > 0)? 0 : 1; }
EOF
if { (eval echo configure:5913: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_MSG_SELECT
EOF
cat >> confdefs.h <<\EOF
#define HAVE_MSG_SELECT 1
EOF
}

else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -fr conftest*
    const_is_losing=no
    with_file_coding=yes
    use_minimal_tagbits=yes
    use_indexed_lrecord_implementation=yes
    extra_objs="$extra_objs console-msw.o device-msw.o event-msw.o frame-msw.o objects-msw.o select-msw.o redisplay-msw.o glyphs-msw.o gui-msw.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"console-msw.o device-msw.o event-msw.o frame-msw.o objects-msw.o select-msw.o redisplay-msw.o glyphs-msw.o gui-msw.o\""
 fi
  fi
fi



test -z "$window_system" && window_system="none"

if test "$window_system" = "none"; then
  for feature in menubars scrollbars toolbars dialogs dragndrop xface
  do
    if eval "test -n \"\$with_${feature}\" -a \"\$with_${feature}\" != no" ; then
       echo "configure: warning: --with-$feature ignored:  Not valid without window system support" 1>&2
    fi
    eval "with_${feature}=no"
  done
else
  test -z "$with_toolbars" && with_toolbars=yes
fi

if test "$with_msw" != "yes"; then
  for feature in   MARTIN_IS_CLUELESS_ABOUT_MSW_FEATURES
  do
    if eval "test -n \"\$with_${feature}\" -a \"\$with_${feature}\" != no" ; then
       echo "configure: warning: --with-$feature ignored:  Not valid without MS-Windows support" 1>&2
    fi
    eval "with_${feature}=no"
  done
else
  :
fi

if test "$with_x11" != "yes"; then
            for feature in tooltalk cde offix session xim xmu 
  do
    if eval "test -n \"\$with_${feature}\" -a \"\$with_${feature}\" != no" ; then
       echo "configure: warning: --with-$feature ignored:  Not valid without X support" 1>&2
    fi
    eval "with_${feature}=no"
  done
fi

bitmapdir=

case "$window_system" in
  x11  ) HAVE_X_WINDOWS=yes; echo "  Using X11." ;;
  msw  ) HAVE_X_WINDOWS=no ; echo "  Using MS-Windows." ;;
  none ) HAVE_X_WINDOWS=no ; echo "  Using no window system." ;;
esac

case "$x_libraries" in *X11R4* )
  test "$opsys" = "hpux9"     && opsysfile="s/hpux9-x11r4.h"
  test "$opsys" = "hpux9-shr" && opsysfile="s/hpux9shxr4.h"
esac

echo "checking for session-management option" 1>&6
echo "configure:5991: checking for session-management option" >&5;
if test "$with_session" != "no"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_SESSION
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SESSION 1
EOF
}

fi

test -z "$with_xauth" && test "$window_system" = "none" && with_xauth=no
test -z "$with_xauth" && { ac_safe=`echo "X11/Xauth.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for X11/Xauth.h""... $ac_c" 1>&6
echo "configure:6006: checking for X11/Xauth.h" >&5

cat > conftest.$ac_ext <<EOF
#line 6009 "configure"
#include "confdefs.h"
#include <X11/Xauth.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:6014: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_xauth=no
fi
 }
test -z "$with_xauth" && { 
echo $ac_n "checking for XauGetAuthByAddr in -lXau""... $ac_c" 1>&6
echo "configure:6037: checking for XauGetAuthByAddr in -lXau" >&5
ac_lib_var=`echo Xau'_'XauGetAuthByAddr | sed 'y%./+-%__p_%'`

xe_check_libs=" -lXau "
cat > conftest.$ac_ext <<EOF
#line 6042 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XauGetAuthByAddr();

int main() {
XauGetAuthByAddr()
; return 0; }
EOF
if { (eval echo configure:6053: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_xauth=no
fi

 }
test -z "$with_xauth" && with_xauth=yes
if test "$with_xauth" = "yes"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_XAUTH
EOF
cat >> confdefs.h <<\EOF
#define HAVE_XAUTH 1
EOF
}

  
T=""
for W in $X_EXTRA_LIBS -lXau $libs_x $X_PRE_LIBS; do if test -z "$T"; then T="$W"; else T="$T $W"; fi; done
libs_xauth="$T"

fi




if test "$with_tooltalk" != "no" ; then
      for dir in "" "Tt/" "desktop/" ; do
    ac_safe=`echo "${dir}tt_c.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for ${dir}tt_c.h""... $ac_c" 1>&6
echo "configure:6098: checking for ${dir}tt_c.h" >&5

cat > conftest.$ac_ext <<EOF
#line 6101 "configure"
#include "confdefs.h"
#include <${dir}tt_c.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:6106: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  tt_c_h_path="${dir}tt_c.h"; break
else
  echo "$ac_t""no" 1>&6
fi

  done
  if test -z "$tt_c_h_path"; then
    if test "$with_tooltalk" = "yes"; then
      (echo "$progname: Usage error:"
echo " " "Unable to find required tooltalk header files."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1
    fi
    with_tooltalk=no
  fi
fi
if test "$with_tooltalk" != "no" ; then
  for extra_libs in "" "-lI18N -lce" "-lcxx"; do
    
xe_msg_checking="for tt_message_create in -ltt"
test -n "$extra_libs" && xe_msg_checking="$xe_msg_checking using extra libs $extra_libs"
echo $ac_n "checking "$xe_msg_checking"""... $ac_c" 1>&6
echo "configure:6142: checking "$xe_msg_checking"" >&5
ac_lib_var=`echo tt'_'tt_message_create | sed 'y%./+-%__p_%'`

xe_check_libs=" -ltt $extra_libs"
cat > conftest.$ac_ext <<EOF
#line 6147 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char tt_message_create();

int main() {
tt_message_create()
; return 0; }
EOF
if { (eval echo configure:6158: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  tt_libs="-ltt $extra_libs"; break
else
  echo "$ac_t""no" 1>&6
:
fi


  done
  if test -z "$tt_libs"; then
    if test "$with_tooltalk" = "yes"; then
      (echo "$progname: Usage error:"
echo " " "Unable to find required tooltalk libraries."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1
    fi
    with_tooltalk=no
  fi
fi
test -z "$with_tooltalk" && with_tooltalk=yes
if test "$with_tooltalk" = "yes"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining TOOLTALK
EOF
cat >> confdefs.h <<\EOF
#define TOOLTALK 1
EOF
}

  { test "$extra_verbose" = "yes" && cat << EOF
    Defining TT_C_H_PATH = "$tt_c_h_path"
EOF
cat >> confdefs.h <<EOF
#define TT_C_H_PATH "$tt_c_h_path"
EOF
}

  libs_x="$tt_libs $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"$tt_libs\" to \$libs_x"; fi
  extra_objs="$extra_objs tooltalk.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"tooltalk.o\""
 fi
fi

test -z "$with_cde" && { ac_safe=`echo "Dt/Dt.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for Dt/Dt.h""... $ac_c" 1>&6
echo "configure:6215: checking for Dt/Dt.h" >&5

cat > conftest.$ac_ext <<EOF
#line 6218 "configure"
#include "confdefs.h"
#include <Dt/Dt.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:6223: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_cde=no
fi
 }
test -z "$with_cde" && { 
echo $ac_n "checking for DtDndDragStart in -lDtSvc""... $ac_c" 1>&6
echo "configure:6246: checking for DtDndDragStart in -lDtSvc" >&5
ac_lib_var=`echo DtSvc'_'DtDndDragStart | sed 'y%./+-%__p_%'`

xe_check_libs=" -lDtSvc "
cat > conftest.$ac_ext <<EOF
#line 6251 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char DtDndDragStart();

int main() {
DtDndDragStart()
; return 0; }
EOF
if { (eval echo configure:6262: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_cde=no
fi

 }
test -z "$with_cde" && with_cde=yes
if test "$with_dragndrop" = no; then
  echo "configure: warning: No CDE without generic Drag'n'Drop support" 1>&2
  with_cde=no
fi
if test "$with_cde" = "yes" ; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_CDE
EOF
cat >> confdefs.h <<\EOF
#define HAVE_CDE 1
EOF
}

  libs_x="-lDtSvc $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lDtSvc\" to \$libs_x"; fi
  dragndrop_proto="$dragndrop_proto CDE" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"CDE\" to \$dragndrop_proto"; fi
  with_tooltalk=yes # CDE requires Tooltalk
  need_motif=yes    # CDE requires Motif
fi

test "$window_system" != "x11" && with_offix=no
if test "$with_xmu" != yes -a "$with_x11" = yes; then
  echo "configure: warning: No OffiX without real Xmu support" 1>&2
  with_offix=no
fi
if test "$with_dragndrop" = no; then
  echo "configure: warning: No OffiX without generic Drag'n'Drop support" 1>&2
  with_offix=no
fi
if test "$with_cde" = yes; then
  echo "configure: warning: CDE already found, disabling OffiX support" 1>&2
  with_offix=no
fi
test -z "$with_offix" && with_offix=no
if test "$with_offix" = "yes"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_OFFIX_DND
EOF
cat >> confdefs.h <<\EOF
#define HAVE_OFFIX_DND 1
EOF
}

  dnd_objs="$dnd_objs offix.o" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"offix.o\" to \$dnd_objs"; fi
  dragndrop_proto="$dragndrop_proto OffiX" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"OffiX\" to \$dragndrop_proto"; fi
fi

echo $ac_n "checking if drag and drop API is needed""... $ac_c" 1>&6
echo "configure:6331: checking if drag and drop API is needed" >&5
if test "$with_dragndrop" != "no" ; then
  if test -n "$dragndrop_proto" ; then
    with_dragndrop=yes
    echo "$ac_t""yes (${dragndrop_proto} )" 1>&6
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_DRAGNDROP
EOF
cat >> confdefs.h <<\EOF
#define HAVE_DRAGNDROP 1
EOF
}

    extra_objs="$extra_objs dragdrop.o" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"dragdrop.o\" to \$extra_objs"; fi
  else
    with_dragndrop=no
    echo "$ac_t""no" 1>&6
  fi
fi

echo "checking for LDAP" 1>&6
echo "configure:6352: checking for LDAP" >&5
test -z "$with_ldap" && { ac_safe=`echo "ldap.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for ldap.h""... $ac_c" 1>&6
echo "configure:6355: checking for ldap.h" >&5

cat > conftest.$ac_ext <<EOF
#line 6358 "configure"
#include "confdefs.h"
#include <ldap.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:6363: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_ldap=no
fi
 }
test -z "$with_ldap" && { ac_safe=`echo "lber.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for lber.h""... $ac_c" 1>&6
echo "configure:6386: checking for lber.h" >&5

cat > conftest.$ac_ext <<EOF
#line 6389 "configure"
#include "confdefs.h"
#include <lber.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:6394: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_ldap=no
fi
 }
if test "$with_ldap" != "no"; then
  test -z "$with_umich_ldap" && { 
xe_msg_checking="for ldap_open in -lldap"
test -n "-llber" && xe_msg_checking="$xe_msg_checking using extra libs -llber"
echo $ac_n "checking "$xe_msg_checking"""... $ac_c" 1>&6
echo "configure:6420: checking "$xe_msg_checking"" >&5
ac_lib_var=`echo ldap'_'ldap_open | sed 'y%./+-%__p_%'`

xe_check_libs=" -lldap -llber"
cat > conftest.$ac_ext <<EOF
#line 6425 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char ldap_open();

int main() {
ldap_open()
; return 0; }
EOF
if { (eval echo configure:6436: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  with_umich_ldap=yes
else
  echo "$ac_t""no" 1>&6
with_umich_ldap=no
fi

 }
  test "$with_umich_ldap" = "no" && { 
echo $ac_n "checking for ldap_set_option in -lldap10""... $ac_c" 1>&6
echo "configure:6459: checking for ldap_set_option in -lldap10" >&5
ac_lib_var=`echo ldap10'_'ldap_set_option | sed 'y%./+-%__p_%'`

xe_check_libs=" -lldap10 "
cat > conftest.$ac_ext <<EOF
#line 6464 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char ldap_set_option();

int main() {
ldap_set_option()
; return 0; }
EOF
if { (eval echo configure:6475: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  with_ns_ldap=yes
else
  echo "$ac_t""no" 1>&6
with_ns_ldap=no
fi

 }
  test -z "$with_ldap" -a \( "$with_umich_ldap" = "yes" -o "$with_ns_ldap" = "yes" \) && with_ldap=yes
fi
if test "$with_ldap" = "yes"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_LDAP
EOF
cat >> confdefs.h <<\EOF
#define HAVE_LDAP 1
EOF
}

  extra_objs="$extra_objs eldap.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"eldap.o\""
 fi
  if test "$with_umich_ldap" = "yes" ; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_UMICH_LDAP
EOF
cat >> confdefs.h <<\EOF
#define HAVE_UMICH_LDAP 1
EOF
}

    LIBS="-llber $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-llber\" to \$LIBS"; fi
    LIBS="-lldap $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lldap\" to \$LIBS"; fi
  elif test "$with_ldap" = "yes" -a "$with_ns_ldap" = "yes" ; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_NS_LDAP
EOF
cat >> confdefs.h <<\EOF
#define HAVE_NS_LDAP 1
EOF
}

    LIBS="-lldap10 $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lldap10\" to \$LIBS"; fi
  elif test "$with_ldap" = "yes" ; then
    LIBS="-lldap $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lldap\" to \$LIBS"; fi
  fi
fi


if test "$window_system" != "none"; then
  echo "checking for graphics libraries" 1>&6
echo "configure:6539: checking for graphics libraries" >&5

    xpm_problem=""
  if test -z "$with_xpm"; then
    echo $ac_n "checking for Xpm - no older than 3.4f""... $ac_c" 1>&6
echo "configure:6544: checking for Xpm - no older than 3.4f" >&5
    xe_check_libs=-lXpm
    cat > conftest.$ac_ext <<EOF
#line 6547 "configure"
#include "confdefs.h"
#include <X11/xpm.h>
    int main(int c, char **v) {
    return c == 1 ? 0 :
      XpmIncludeVersion != XpmLibraryVersion() ? 1 :
      XpmIncludeVersion < 30406 ? 2 : 0 ;}
EOF
if { (eval echo configure:6555: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  ./conftest dummy_arg; xpm_status=$?;
      if test "$xpm_status" = "0"; then
        with_xpm=yes;
      else
        with_xpm=no;
        if test "$xpm_status" = "1"; then
          xpm_problem="Xpm library version and header file version don't match!"
        elif test "$xpm_status" = "2"; then
          xpm_problem="Xpm library version is too old!"
        else
          xpm_problem="Internal xpm detection logic error!"
        fi
        echo "
*** WARNING *** $xpm_problem
  I'm not touching that with a 10-foot pole!
  If you really want to use the installed version of Xpm, rerun
  configure and add '--with-xpm=yes', but don't blame me if XEmacs crashes!"
    fi
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  with_xpm=no
fi
rm -fr conftest*
    xe_check_libs=
    echo "$ac_t""$with_xpm" 1>&6
  fi
  if test "$with_xpm" = "yes"; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_XPM
EOF
cat >> confdefs.h <<\EOF
#define HAVE_XPM 1
EOF
}

    libs_x="-lXpm $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lXpm\" to \$libs_x"; fi
    echo $ac_n "checking for \"FOR_MSW\" xpm""... $ac_c" 1>&6
echo "configure:6597: checking for \"FOR_MSW\" xpm" >&5
    xe_check_libs=-lXpm
    cat > conftest.$ac_ext <<EOF
#line 6600 "configure"
#include "confdefs.h"

int main() {
XpmCreatePixmapFromData()
; return 0; }
EOF
if { (eval echo configure:6607: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  xpm_for_msw=no
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  xpm_for_msw=yes
fi
rm -f conftest*
    xe_check_libs=
    echo "$ac_t""$xpm_for_msw" 1>&6
    if test "$xpm_for_msw" = "yes"; then
      { test "$extra_verbose" = "yes" && cat << \EOF
    Defining FOR_MSW
EOF
cat >> confdefs.h <<\EOF
#define FOR_MSW 1
EOF
}

    fi
  fi

    test -z "$with_xface" && { ac_safe=`echo "compface.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for compface.h""... $ac_c" 1>&6
echo "configure:6633: checking for compface.h" >&5

cat > conftest.$ac_ext <<EOF
#line 6636 "configure"
#include "confdefs.h"
#include <compface.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:6641: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_xface=no
fi
 }
  test -z "$with_xface" && { 
echo $ac_n "checking for UnGenFace in -lcompface""... $ac_c" 1>&6
echo "configure:6664: checking for UnGenFace in -lcompface" >&5
ac_lib_var=`echo compface'_'UnGenFace | sed 'y%./+-%__p_%'`

xe_check_libs=" -lcompface "
cat > conftest.$ac_ext <<EOF
#line 6669 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char UnGenFace();

int main() {
UnGenFace()
; return 0; }
EOF
if { (eval echo configure:6680: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  : 
else
  echo "$ac_t""no" 1>&6
with_xface=no
fi

 }
  test -z "$with_xface" && with_xface=yes
  if test "$with_xface" = "yes"; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_XFACE
EOF
cat >> confdefs.h <<\EOF
#define HAVE_XFACE 1
EOF
}

    libs_x="-lcompface $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lcompface\" to \$libs_x"; fi
  fi

        if test "$with_gif" != "no"; then
    with_gif="yes"
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_GIF
EOF
cat >> confdefs.h <<\EOF
#define HAVE_GIF 1
EOF
}

    extra_objs="$extra_objs dgif_lib.o gif_io.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"dgif_lib.o gif_io.o\""
 fi
  fi

      if test "$with_png $with_tiff" != "no no"; then
    
echo $ac_n "checking for inflate in -lc""... $ac_c" 1>&6
echo "configure:6732: checking for inflate in -lc" >&5
ac_lib_var=`echo c'_'inflate | sed 'y%./+-%__p_%'`

xe_check_libs=" -lc "
cat > conftest.$ac_ext <<EOF
#line 6737 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char inflate();

int main() {
inflate()
; return 0; }
EOF
if { (eval echo configure:6748: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6

echo $ac_n "checking for inflate in -lz""... $ac_c" 1>&6
echo "configure:6767: checking for inflate in -lz" >&5
ac_lib_var=`echo z'_'inflate | sed 'y%./+-%__p_%'`

xe_check_libs=" -lz "
cat > conftest.$ac_ext <<EOF
#line 6772 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char inflate();

int main() {
inflate()
; return 0; }
EOF
if { (eval echo configure:6783: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  libs_x="-lz $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lz\" to \$libs_x"; fi
else
  echo "$ac_t""no" 1>&6

echo $ac_n "checking for inflate in -lgz""... $ac_c" 1>&6
echo "configure:6802: checking for inflate in -lgz" >&5
ac_lib_var=`echo gz'_'inflate | sed 'y%./+-%__p_%'`

xe_check_libs=" -lgz "
cat > conftest.$ac_ext <<EOF
#line 6807 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char inflate();

int main() {
inflate()
; return 0; }
EOF
if { (eval echo configure:6818: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  libs_x="-lgz $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lgz\" to \$libs_x"; fi
else
  echo "$ac_t""no" 1>&6
fi


fi


fi


  fi

    test -z "$with_jpeg" && { ac_safe=`echo "jpeglib.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for jpeglib.h""... $ac_c" 1>&6
echo "configure:6848: checking for jpeglib.h" >&5

cat > conftest.$ac_ext <<EOF
#line 6851 "configure"
#include "confdefs.h"
#include <jpeglib.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:6856: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_jpeg=no
fi
 }
  test -z "$with_jpeg" && { 
echo $ac_n "checking for jpeg_destroy_decompress in -ljpeg""... $ac_c" 1>&6
echo "configure:6879: checking for jpeg_destroy_decompress in -ljpeg" >&5
ac_lib_var=`echo jpeg'_'jpeg_destroy_decompress | sed 'y%./+-%__p_%'`

xe_check_libs=" -ljpeg "
cat > conftest.$ac_ext <<EOF
#line 6884 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char jpeg_destroy_decompress();

int main() {
jpeg_destroy_decompress()
; return 0; }
EOF
if { (eval echo configure:6895: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_jpeg=no
fi

 }
  test -z "$with_jpeg" && with_jpeg=yes
  if test "$with_jpeg" = "yes"; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_JPEG
EOF
cat >> confdefs.h <<\EOF
#define HAVE_JPEG 1
EOF
}

    libs_x="-ljpeg $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-ljpeg\" to \$libs_x"; fi
  fi

    png_problem=""
  test -z "$with_png" && { echo $ac_n "checking for pow""... $ac_c" 1>&6
echo "configure:6931: checking for pow" >&5

cat > conftest.$ac_ext <<EOF
#line 6934 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char pow(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char pow();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_pow) || defined (__stub___pow)
choke me
#else
pow();
#endif

; return 0; }
EOF
if { (eval echo configure:6957: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_func_pow=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_pow=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'pow`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_png=no
fi
 }
  test -z "$with_png" && { ac_safe=`echo "png.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for png.h""... $ac_c" 1>&6
echo "configure:6978: checking for png.h" >&5

cat > conftest.$ac_ext <<EOF
#line 6981 "configure"
#include "confdefs.h"
#include <png.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:6986: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_png=no
fi
 }
  test -z "$with_png" && { 
echo $ac_n "checking for png_read_image in -lpng""... $ac_c" 1>&6
echo "configure:7009: checking for png_read_image in -lpng" >&5
ac_lib_var=`echo png'_'png_read_image | sed 'y%./+-%__p_%'`

xe_check_libs=" -lpng "
cat > conftest.$ac_ext <<EOF
#line 7014 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char png_read_image();

int main() {
png_read_image()
; return 0; }
EOF
if { (eval echo configure:7025: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_png=no
fi

 }
  if test -z "$with_png"; then
    echo $ac_n "checking for workable png version information""... $ac_c" 1>&6
echo "configure:7048: checking for workable png version information" >&5
    xe_check_libs="-lpng -lz"
    cat > conftest.$ac_ext <<EOF
#line 7051 "configure"
#include "confdefs.h"
#include <png.h>
    int main(int c, char **v) {
    if (c == 1) return 0;
    if (strcmp(png_libpng_ver, PNG_LIBPNG_VER_STRING) != 0) return 1;
    return (PNG_LIBPNG_VER < 10002) ? 2 : 0 ;}
EOF
if { (eval echo configure:7059: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  ./conftest dummy_arg; png_status=$?;
      if test "$png_status" = "0"; then
	with_png=yes;
      else
	with_png=no;
	if test "$png_status" = "1"; then
	  png_problem="PNG library version and header file don't match!"
        elif test "$png_status" = "2"; then
	  png_problem="PNG library version too old (pre 1.0.2)!"
	fi
	echo "
*** WARNING *** $png_problem
  I'm not touching that with a 10-foot pole!
  If you really want to use the installed version of libPNG, rerun
  configure and add '--with-png=yes', but don't blame me if XEmacs crashes!"
    fi
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  with_png=no
fi
rm -fr conftest*
    xe_check_libs=
    echo "$ac_t""$with_png" 1>&6
  fi
  if test "$with_png" = "yes"; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_PNG
EOF
cat >> confdefs.h <<\EOF
#define HAVE_PNG 1
EOF
}

    libs_x="-lpng $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lpng\" to \$libs_x"; fi
  fi

    test -z "$with_tiff" && { ac_safe=`echo "tiffio.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for tiffio.h""... $ac_c" 1>&6
echo "configure:7102: checking for tiffio.h" >&5

cat > conftest.$ac_ext <<EOF
#line 7105 "configure"
#include "confdefs.h"
#include <tiffio.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:7110: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_tiff=no
fi
 }
  test -z "$with_tiff" && { 
echo $ac_n "checking for TIFFClientOpen in -ltiff""... $ac_c" 1>&6
echo "configure:7133: checking for TIFFClientOpen in -ltiff" >&5
ac_lib_var=`echo tiff'_'TIFFClientOpen | sed 'y%./+-%__p_%'`

xe_check_libs=" -ltiff "
cat > conftest.$ac_ext <<EOF
#line 7138 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char TIFFClientOpen();

int main() {
TIFFClientOpen()
; return 0; }
EOF
if { (eval echo configure:7149: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_tiff=no
fi

 }
  test -z "$with_tiff" && with_tiff=yes
  if test "$with_tiff" = "yes"; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_TIFF
EOF
cat >> confdefs.h <<\EOF
#define HAVE_TIFF 1
EOF
}

    libs_x="-ltiff $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-ltiff\" to \$libs_x"; fi
  fi
fi


if test "$with_x11" = "yes"; then

  echo "checking for X11 graphics libraries" 1>&6
echo "configure:7188: checking for X11 graphics libraries" >&5

    
echo $ac_n "checking for XawScrollbarSetThumb in -lXaw""... $ac_c" 1>&6
echo "configure:7192: checking for XawScrollbarSetThumb in -lXaw" >&5
ac_lib_var=`echo Xaw'_'XawScrollbarSetThumb | sed 'y%./+-%__p_%'`

xe_check_libs=" -lXaw "
cat > conftest.$ac_ext <<EOF
#line 7197 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XawScrollbarSetThumb();

int main() {
XawScrollbarSetThumb()
; return 0; }
EOF
if { (eval echo configure:7208: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  have_xaw=yes
else
  echo "$ac_t""no" 1>&6
have_xaw=no
fi


                    
    ac_safe=`echo "Xm/Xm.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for Xm/Xm.h""... $ac_c" 1>&6
echo "configure:7232: checking for Xm/Xm.h" >&5

cat > conftest.$ac_ext <<EOF
#line 7235 "configure"
#include "confdefs.h"
#include <Xm/Xm.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:7240: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
echo $ac_n "checking for XmStringFree in -lXm""... $ac_c" 1>&6
echo "configure:7257: checking for XmStringFree in -lXm" >&5
ac_lib_var=`echo Xm'_'XmStringFree | sed 'y%./+-%__p_%'`

xe_check_libs=" -lXm "
cat > conftest.$ac_ext <<EOF
#line 7262 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XmStringFree();

int main() {
XmStringFree()
; return 0; }
EOF
if { (eval echo configure:7273: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  have_motif=yes
else
  echo "$ac_t""no" 1>&6
have_motif=no
fi


else
  echo "$ac_t""no" 1>&6
have_motif=no
fi


  if test "$have_motif" = "yes"; then
        echo $ac_n "checking for Lesstif""... $ac_c" 1>&6
echo "configure:7302: checking for Lesstif" >&5
    cat > conftest.$ac_ext <<EOF
#line 7304 "configure"
#include "confdefs.h"
#include <Xm/Xm.h>
#ifdef LESSTIF_VERSION
yes
#endif

EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  have_lesstif=yes
else
  rm -rf conftest*
  have_lesstif=no
fi
rm -f conftest*

  echo "$ac_t""$have_lesstif" 1>&6
  fi

fi 

case "$with_menubars" in "" | "yes" | "athena" | "athena3d" )
  with_menubars="lucid" ;;
esac
case "$with_dialogs" in "" | "yes" | "lucid" )
  if   test "$have_motif" = "yes"; then with_dialogs="motif"
  elif test "$have_xaw"   = "yes"; then with_dialogs="athena"
  else with_dialogs=no
  fi ;;
esac
case "$with_scrollbars" in "" | "yes" )
  with_scrollbars="lucid" ;;
esac

all_widgets="$with_menubars $with_scrollbars $with_dialogs $with_toolbars"

case "$all_widgets" in *athena* )
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_USES_ATHENA
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_USES_ATHENA 1
EOF
}

  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining NEED_ATHENA
EOF
cat >> confdefs.h <<\EOF
#define NEED_ATHENA 1
EOF
}

  lwlib_objs="$lwlib_objs lwlib-Xaw.o" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"lwlib-Xaw.o\" to \$lwlib_objs"; fi
  libs_x="-lXaw $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lXaw\" to \$libs_x"; fi ;;
esac

case "$all_widgets" in *motif* )
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_USES_MOTIF
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_USES_MOTIF 1
EOF
}

  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining NEED_MOTIF
EOF
cat >> confdefs.h <<\EOF
#define NEED_MOTIF 1
EOF
}

  lwlib_objs="$lwlib_objs lwlib-Xm.o" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"lwlib-Xm.o\" to \$lwlib_objs"; fi
  need_motif=yes ;;
esac

test "$with_menubars"   = "lucid" && lwlib_objs="$lwlib_objs xlwmenu.o" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"xlwmenu.o\" to \$lwlib_objs"; fi
test "$with_menubars"   = "motif" && lwlib_objs="$lwlib_objs xlwmenu.o" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"xlwmenu.o\" to \$lwlib_objs"; fi
test "$with_scrollbars" = "lucid" && lwlib_objs="$lwlib_objs xlwscrollbar.o" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"xlwscrollbar.o\" to \$lwlib_objs"; fi
case "$all_widgets" in *lucid* )
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining NEED_LUCID
EOF
cat >> confdefs.h <<\EOF
#define NEED_LUCID 1
EOF
}

  lwlib_objs="$lwlib_objs lwlib-Xlw.o" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"lwlib-Xlw.o\" to \$lwlib_objs"; fi ;;
esac



case "$with_scrollbars" in athena* ) { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_SCROLLBARS_ATHENA
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_SCROLLBARS_ATHENA 1
EOF
}
;; esac
case "$with_dialogs"    in athena* ) { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_DIALOGS_ATHENA
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_DIALOGS_ATHENA 1
EOF
}
   ;; esac
test "$with_scrollbars" = "athena3d" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_SCROLLBARS_ATHENA3D
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_SCROLLBARS_ATHENA3D 1
EOF
}

test "$with_dialogs"    = "athena3d" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_DIALOGS_ATHENA3D
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_DIALOGS_ATHENA3D 1
EOF
}


test "$with_menubars"   != "no"    && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_MENUBARS
EOF
cat >> confdefs.h <<\EOF
#define HAVE_MENUBARS 1
EOF
}

test "$with_scrollbars" != "no"    && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_SCROLLBARS
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SCROLLBARS 1
EOF
}

test "$with_dialogs"    != "no"    && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_DIALOGS
EOF
cat >> confdefs.h <<\EOF
#define HAVE_DIALOGS 1
EOF
}

test "$with_toolbars"   != "no"    && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_TOOLBARS
EOF
cat >> confdefs.h <<\EOF
#define HAVE_TOOLBARS 1
EOF
}


test "$with_menubars"   = "lucid"  && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_MENUBARS_LUCID
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_MENUBARS_LUCID 1
EOF
}

test "$with_scrollbars" = "lucid"  && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_SCROLLBARS_LUCID
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_SCROLLBARS_LUCID 1
EOF
}


test "$with_menubars"   = "motif"  && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_MENUBARS_MOTIF
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_MENUBARS_MOTIF 1
EOF
}

test "$with_scrollbars" = "motif"  && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_SCROLLBARS_MOTIF
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_SCROLLBARS_MOTIF 1
EOF
}

test "$with_dialogs"    = "motif"  && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_DIALOGS_MOTIF
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_DIALOGS_MOTIF 1
EOF
}


test "$with_menubars"   != "no"      && extra_objs="$extra_objs menubar.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"menubar.o\""
 fi
test "$with_scrollbars" != "no"      && extra_objs="$extra_objs scrollbar.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"scrollbar.o\""
 fi
test "$with_dialogs"    != "no"      && extra_objs="$extra_objs dialog.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"dialog.o\""
 fi
test "$with_toolbars"   != "no"      && extra_objs="$extra_objs toolbar.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"toolbar.o\""
 fi

if test "$with_x11" = "yes"; then
  test "$with_menubars"   != "no"      && extra_objs="$extra_objs menubar-x.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"menubar-x.o\""
 fi
  test "$with_scrollbars" != "no"      && extra_objs="$extra_objs scrollbar-x.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"scrollbar-x.o\""
 fi
  test "$with_dialogs"    != "no"      && extra_objs="$extra_objs dialog-x.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"dialog-x.o\""
 fi
  test "$with_toolbars"   != "no"      && extra_objs="$extra_objs toolbar-x.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"toolbar-x.o\""
 fi
  test "$all_widgets" != "no no no no" && extra_objs="$extra_objs gui-x.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"gui-x.o\""
 fi
else
  if test \( "$with_sound" = "nas" \) -o \( "$with_sound" = "both" \); then
    echo "Attempt to Build NAS sound without X"
    echo "Please remove NAS configuration or build with X"
    exit 1
  fi
fi

test "$use_minimal_tagbits" = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining USE_MINIMAL_TAGBITS
EOF
cat >> confdefs.h <<\EOF
#define USE_MINIMAL_TAGBITS 1
EOF
}

test "$use_indexed_lrecord_implementation" = "yes" && \
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining USE_INDEXED_LRECORD_IMPLEMENTATION
EOF
cat >> confdefs.h <<\EOF
#define USE_INDEXED_LRECORD_IMPLEMENTATION 1
EOF
}



test -z "$with_mule" && with_mule=no
test -z "$with_file_coding" && with_file_coding=no


if test "$with_file_coding" = "yes" && test "$with_mule" = "no"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining FILE_CODING
EOF
cat >> confdefs.h <<\EOF
#define FILE_CODING 1
EOF
}

  extra_objs="$extra_objs file-coding.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"file-coding.o\""
 fi
fi

if test "$with_mule" = "yes" ; then
  echo "checking for Mule-related features" 1>&6
echo "configure:7585: checking for Mule-related features" >&5
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining MULE
EOF
cat >> confdefs.h <<\EOF
#define MULE 1
EOF
}

  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining FILE_CODING
EOF
cat >> confdefs.h <<\EOF
#define FILE_CODING 1
EOF
}

  extra_objs="$extra_objs mule.o mule-ccl.o mule-charset.o mule-coding.o file-coding.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"mule.o mule-ccl.o mule-charset.o mule-coding.o file-coding.o\""
 fi

    for ac_hdr in libintl.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:7610: checking for $ac_hdr" >&5

cat > conftest.$ac_ext <<EOF
#line 7613 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:7618: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_hdr
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done

  
echo $ac_n "checking for strerror in -lintl""... $ac_c" 1>&6
echo "configure:7649: checking for strerror in -lintl" >&5
ac_lib_var=`echo intl'_'strerror | sed 'y%./+-%__p_%'`

xe_check_libs=" -lintl "
cat > conftest.$ac_ext <<EOF
#line 7654 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char strerror();

int main() {
strerror()
; return 0; }
EOF
if { (eval echo configure:7665: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo intl | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_lib
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF
}

  LIBS="-lintl $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lintl\" to \$LIBS"; fi

else
  echo "$ac_t""no" 1>&6
fi



  echo "checking for Mule input methods" 1>&6
echo "configure:7698: checking for Mule input methods" >&5
        case "$with_xim" in "" | "yes" )
    echo "checking for XIM" 1>&6
echo "configure:7701: checking for XIM" >&5
        if test "$have_lesstif" = "yes"; then with_xim=xlib
    else 
echo $ac_n "checking for XmImMbLookupString in -lXm""... $ac_c" 1>&6
echo "configure:7705: checking for XmImMbLookupString in -lXm" >&5
ac_lib_var=`echo Xm'_'XmImMbLookupString | sed 'y%./+-%__p_%'`

xe_check_libs=" -lXm "
cat > conftest.$ac_ext <<EOF
#line 7710 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XmImMbLookupString();

int main() {
XmImMbLookupString()
; return 0; }
EOF
if { (eval echo configure:7721: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  with_xim=motif
else
  echo "$ac_t""no" 1>&6
with_xim=xlib
fi


    fi
  esac
  if test "$with_xim" != "no"; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_XIM
EOF
cat >> confdefs.h <<\EOF
#define HAVE_XIM 1
EOF
}

    if test "$with_xim" = "xlib"; then
      { test "$extra_verbose" = "yes" && cat << \EOF
    Defining XIM_XLIB
EOF
cat >> confdefs.h <<\EOF
#define XIM_XLIB 1
EOF
}

      extra_objs="$extra_objs input-method-xlib.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"input-method-xlib.o\""
 fi
    fi
    if test "$with_xim" = "motif"; then
      { test "$extra_verbose" = "yes" && cat << \EOF
    Defining XIM_MOTIF
EOF
cat >> confdefs.h <<\EOF
#define XIM_MOTIF 1
EOF
}

      need_motif=yes
      extra_objs="$extra_objs input-method-motif.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"input-method-motif.o\""
 fi
    fi
    if test "$with_xim" = "motif"; then
      with_xfs=no
    fi
  fi

    if test "$with_xfs" = "yes" ; then
    echo "checking for XFontSet" 1>&6
echo "configure:7787: checking for XFontSet" >&5
    
echo $ac_n "checking for XmbDrawString in -lX11""... $ac_c" 1>&6
echo "configure:7790: checking for XmbDrawString in -lX11" >&5
ac_lib_var=`echo X11'_'XmbDrawString | sed 'y%./+-%__p_%'`

xe_check_libs=" -lX11 "
cat > conftest.$ac_ext <<EOF
#line 7795 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XmbDrawString();

int main() {
XmbDrawString()
; return 0; }
EOF
if { (eval echo configure:7806: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_xfs=no
fi


    if test "$with_xfs" = "yes" && test "$with_menubars" = "lucid"; then
      { test "$extra_verbose" = "yes" && cat << \EOF
    Defining USE_XFONTSET
EOF
cat >> confdefs.h <<\EOF
#define USE_XFONTSET 1
EOF
}

      if test "$with_xim" = "no" ; then
        extra_objs="$extra_objs input-method-xfs.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"input-method-xfs.o\""
 fi
      fi
    fi
  fi 
    test "$with_wnn6" = "yes" && with_wnn=yes # wnn6 implies wnn support
  test -z "$with_wnn" && { ac_safe=`echo "wnn/jllib.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for wnn/jllib.h""... $ac_c" 1>&6
echo "configure:7846: checking for wnn/jllib.h" >&5

cat > conftest.$ac_ext <<EOF
#line 7849 "configure"
#include "confdefs.h"
#include <wnn/jllib.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:7854: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_wnn=no
fi
 }
    if test "$with_wnn" != "no"; then
    for ac_func in crypt
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:7879: checking for $ac_func" >&5

cat > conftest.$ac_ext <<EOF
#line 7882 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:7905: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_func
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done

    test "$ac_cv_func_crypt" != "yes" && { 
echo $ac_n "checking for crypt in -lcrypt""... $ac_c" 1>&6
echo "configure:7934: checking for crypt in -lcrypt" >&5
ac_lib_var=`echo crypt'_'crypt | sed 'y%./+-%__p_%'`

xe_check_libs=" -lcrypt "
cat > conftest.$ac_ext <<EOF
#line 7939 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char crypt();

int main() {
crypt()
; return 0; }
EOF
if { (eval echo configure:7950: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo crypt | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_lib
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF
}

  LIBS="-lcrypt $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lcrypt\" to \$LIBS"; fi

else
  echo "$ac_t""no" 1>&6
fi

 }
  fi
    if test -z "$with_wnn" -o "$with_wnn" = "yes"; then
    
echo $ac_n "checking for jl_dic_list_e in -lwnn""... $ac_c" 1>&6
echo "configure:7985: checking for jl_dic_list_e in -lwnn" >&5
ac_lib_var=`echo wnn'_'jl_dic_list_e | sed 'y%./+-%__p_%'`

xe_check_libs=" -lwnn "
cat > conftest.$ac_ext <<EOF
#line 7990 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char jl_dic_list_e();

int main() {
jl_dic_list_e()
; return 0; }
EOF
if { (eval echo configure:8001: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  libwnn=wnn
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for jl_dic_list_e in -lwnn4""... $ac_c" 1>&6
echo "configure:8019: checking for jl_dic_list_e in -lwnn4" >&5
ac_lib_var=`echo wnn4'_'jl_dic_list_e | sed 'y%./+-%__p_%'`

xe_check_libs=" -lwnn4 "
cat > conftest.$ac_ext <<EOF
#line 8024 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char jl_dic_list_e();

int main() {
jl_dic_list_e()
; return 0; }
EOF
if { (eval echo configure:8035: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  libwnn=wnn4
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for jl_dic_list_e in -lwnn6""... $ac_c" 1>&6
echo "configure:8053: checking for jl_dic_list_e in -lwnn6" >&5
ac_lib_var=`echo wnn6'_'jl_dic_list_e | sed 'y%./+-%__p_%'`

xe_check_libs=" -lwnn6 "
cat > conftest.$ac_ext <<EOF
#line 8058 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char jl_dic_list_e();

int main() {
jl_dic_list_e()
; return 0; }
EOF
if { (eval echo configure:8069: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  libwnn=wnn6
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for dic_list_e in -lwnn6_fromsrc""... $ac_c" 1>&6
echo "configure:8087: checking for dic_list_e in -lwnn6_fromsrc" >&5
ac_lib_var=`echo wnn6_fromsrc'_'dic_list_e | sed 'y%./+-%__p_%'`

xe_check_libs=" -lwnn6_fromsrc "
cat > conftest.$ac_ext <<EOF
#line 8092 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dic_list_e();

int main() {
dic_list_e()
; return 0; }
EOF
if { (eval echo configure:8103: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  libwnn=wnn6_fromsrc
else
  echo "$ac_t""no" 1>&6
with_wnn=no
fi


fi


fi


fi


  fi
  test -z "$with_wnn" && with_wnn=yes
  if test "$with_wnn" = "yes"; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_WNN
EOF
cat >> confdefs.h <<\EOF
#define HAVE_WNN 1
EOF
}

    libs_x="-l$libwnn $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-l$libwnn\" to \$libs_x"; fi
    extra_objs="$extra_objs mule-wnnfns.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"mule-wnnfns.o\""
 fi
    if test "$with_wnn6" != "no"; then
      
echo $ac_n "checking for jl_fi_dic_list in -l$libwnn""... $ac_c" 1>&6
echo "configure:8151: checking for jl_fi_dic_list in -l$libwnn" >&5
ac_lib_var=`echo $libwnn'_'jl_fi_dic_list | sed 'y%./+-%__p_%'`

xe_check_libs=" -l$libwnn "
cat > conftest.$ac_ext <<EOF
#line 8156 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char jl_fi_dic_list();

int main() {
jl_fi_dic_list()
; return 0; }
EOF
if { (eval echo configure:8167: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  with_wnn6=yes
else
  echo "$ac_t""no" 1>&6
fi


      test "$with_wnn6" = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining WNN6
EOF
cat >> confdefs.h <<\EOF
#define WNN6 1
EOF
}

    fi
  fi

    canna_includes_found=no
  if test "$with_canna" != "no"; then
    ac_safe=`echo "canna/jrkanji.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for canna/jrkanji.h""... $ac_c" 1>&6
echo "configure:8202: checking for canna/jrkanji.h" >&5

cat > conftest.$ac_ext <<EOF
#line 8205 "configure"
#include "confdefs.h"
#include <canna/jrkanji.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:8210: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  canna_includes_found=yes
else
  echo "$ac_t""no" 1>&6
fi

  fi
  if test "$canna_includes_found" = "no" -a "$with_canna" != "no" -a \
      -d "/usr/local/canna/include"; then
    save_c_switch_site="$c_switch_site"
    c_switch_site="$c_switch_site -I/usr/local/canna/include"
    ac_safe=`echo "canna/jrkanji.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for canna/jrkanji.h""... $ac_c" 1>&6
echo "configure:8237: checking for canna/jrkanji.h" >&5

cat > conftest.$ac_ext <<EOF
#line 8240 "configure"
#include "confdefs.h"
#include <canna/jrkanji.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:8245: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  canna_includes_found=yes
else
  echo "$ac_t""no" 1>&6
fi

    if test "$canna_includes_found" != "yes"; then
      c_switch_site="$save_c_switch_site"
      with_canna="no"
    fi
  fi

  test -z "$with_canna" && { ac_safe=`echo "canna/RK.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for canna/RK.h""... $ac_c" 1>&6
echo "configure:8273: checking for canna/RK.h" >&5

cat > conftest.$ac_ext <<EOF
#line 8276 "configure"
#include "confdefs.h"
#include <canna/RK.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:8281: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_canna=no
fi
 }
  test -z "$with_canna" && { 
echo $ac_n "checking for RkBgnBun in -lRKC""... $ac_c" 1>&6
echo "configure:8304: checking for RkBgnBun in -lRKC" >&5
ac_lib_var=`echo RKC'_'RkBgnBun | sed 'y%./+-%__p_%'`

xe_check_libs=" -lRKC "
cat > conftest.$ac_ext <<EOF
#line 8309 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char RkBgnBun();

int main() {
RkBgnBun()
; return 0; }
EOF
if { (eval echo configure:8320: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_canna=no
fi

 }
  test -z "$with_canna" && { 
echo $ac_n "checking for jrKanjiControl in -lcanna""... $ac_c" 1>&6
echo "configure:8343: checking for jrKanjiControl in -lcanna" >&5
ac_lib_var=`echo canna'_'jrKanjiControl | sed 'y%./+-%__p_%'`

xe_check_libs=" -lcanna "
cat > conftest.$ac_ext <<EOF
#line 8348 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char jrKanjiControl();

int main() {
jrKanjiControl()
; return 0; }
EOF
if { (eval echo configure:8359: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_canna=no
fi

 }
  test -z "$with_canna" && with_canna=yes
  if test "$with_canna" = "yes"; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_CANNA
EOF
cat >> confdefs.h <<\EOF
#define HAVE_CANNA 1
EOF
}

    libs_x="-lcanna -lRKC $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lcanna -lRKC\" to \$libs_x"; fi
    extra_objs="$extra_objs mule-canna.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"mule-canna.o\""
 fi
  fi

else   for feature in xim canna wnn; do
    if eval "test -n \"\$with_${feature}\" -a \"\$with_${feature}\" != no" ; then
      echo "configure: warning: "--with-${feature} ignored:  Not valid without Mule support"" 1>&2
    fi
    eval "with_${feature}=no"
  done
fi 

if test "$need_motif" = "yes" ; then
  libs_x="-lXm $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lXm\" to \$libs_x"; fi
    
echo $ac_n "checking for layout_object_getvalue in -li18n""... $ac_c" 1>&6
echo "configure:8408: checking for layout_object_getvalue in -li18n" >&5
ac_lib_var=`echo i18n'_'layout_object_getvalue | sed 'y%./+-%__p_%'`

xe_check_libs=" -li18n "
cat > conftest.$ac_ext <<EOF
#line 8413 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char layout_object_getvalue();

int main() {
layout_object_getvalue()
; return 0; }
EOF
if { (eval echo configure:8424: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  libs_x="-li18n $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-li18n\" to \$libs_x"; fi
else
  echo "$ac_t""no" 1>&6
fi


  
if test "$add_runtime_path" = "yes" -a -n "$dash_r"; then
    ld_switch_site=`echo   '' $ld_switch_site   | sed -e 's:^ ::' -e "s/$dash_r[^ ]*//g"`
  ld_switch_x_site=`echo '' $ld_switch_x_site | sed -e 's:^ ::' -e "s/$dash_r[^ ]*//g"`
  
        runpath="" runpath_dirs=""
  if test -n "$LD_RUN_PATH"; then
    runpath="$LD_RUN_PATH"
  elif test "$GCC" = "yes"; then
        ld_switch_run_save="$ld_switch_run"; ld_switch_run=""
    echo "int main(int argc, char *argv[]) {return 0;}" > conftest.c
    xe_runpath_link='${CC-cc} -o conftest -v $CFLAGS '"$xe_ldflags"' conftest.$ac_ext 2>&1 1>/dev/null'
    for arg in `eval "$xe_runpath_link" | grep ' -L'`; do
      case "$arg" in P,* | -L* | -R* )
        for dir in `echo '' "$arg" | sed -e 's:^ ::' -e 's/^..//' -e 'y/:/ /'`; do
          {
xe_runpath_dir="$dir"
  test "$xe_runpath_dir" != "/lib"     -a \
	"$xe_runpath_dir" != "/usr/lib" -a \
	-n "`ls ${xe_runpath_dir}/*.s[ol] 2>/dev/null`" && \
  eval "$xe_add_unique_runpath_dir"
}
        done ;;
      esac
    done
    ld_switch_run="$ld_switch_run_save"
    rm -f conftest*
  else
        for arg in $ld_switch_site $ld_switch_x_site; do
      case "$arg" in -L*) {
xe_runpath_dir=`echo '' "$arg" | sed -e 's:^ ::' -e 's/^-L//'`
  test "$xe_runpath_dir" != "/lib"     -a \
	"$xe_runpath_dir" != "/usr/lib" -a \
	-n "`ls ${xe_runpath_dir}/*.s[ol] 2>/dev/null`" && \
  eval "$xe_add_unique_runpath_dir"
};; esac
    done
        if test "$opsys $need_motif" = "sol2 yes"; then
      xe_runpath_dir="/opt/SUNWdt/lib";
      eval "$xe_add_unique_runpath_dir";
    fi
  fi 
  if test -n "$runpath"; then
    ld_switch_run="${dash_r}${runpath}"
    
if test "$GCC" = "yes"; then
  set x $ld_switch_run; shift; ld_switch_run=""
  while test -n "$1"; do
    case $1 in
      -L  | -l  | -u               ) ld_switch_run="$ld_switch_run $1 $2"; shift ;;
      -L* | -l* | -u* | -Wl* | -pg ) ld_switch_run="$ld_switch_run $1" ;;
      -Xlinker* ) ;;
      * ) ld_switch_run="$ld_switch_run -Xlinker $1" ;;
    esac
    shift
  done
fi
    test "$extra_verbose" = "yes" && echo "Setting runpath to $runpath"
  fi
fi

fi

for ac_func in cbrt closedir dup2 eaccess fmod fpathconf frexp ftime gethostname getpagesize gettimeofday getcwd getwd logb lrand48 matherr mkdir mktime perror poll random rename res_init rint rmdir select setitimer setpgid setlocale setsid sigblock sighold sigprocmask snprintf strcasecmp strerror tzset ulimit usleep utimes waitpid vsnprintf
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:8510: checking for $ac_func" >&5

cat > conftest.$ac_ext <<EOF
#line 8513 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:8536: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_func
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done



case "$opsys" in
  linuxaout* | bsdos3* | freebsd* | decosf4-0* | aix4* ) extra_objs="$extra_objs realpath.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"realpath.o\""
 fi ;;
  * )
    case "$canonical" in
      *-*-sysv4.2uw2* ) extra_objs="$extra_objs realpath.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"realpath.o\""
 fi ;;
      * ) for ac_func in realpath
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:8577: checking for $ac_func" >&5

cat > conftest.$ac_ext <<EOF
#line 8580 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:8603: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_func
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done

	  test "$ac_cv_func_realpath" != "yes" && extra_objs="$extra_objs realpath.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"realpath.o\""
 fi ;;
    esac ;;
esac

echo $ac_n "checking whether netdb declares h_errno""... $ac_c" 1>&6
echo "configure:8637: checking whether netdb declares h_errno" >&5
cat > conftest.$ac_ext <<EOF
#line 8639 "configure"
#include "confdefs.h"
#include <netdb.h>
int main() {
return h_errno;
; return 0; }
EOF
if { (eval echo configure:8646: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
   { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_H_ERRNO
EOF
cat >> confdefs.h <<\EOF
#define HAVE_H_ERRNO 1
EOF
}

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*

echo $ac_n "checking for sigsetjmp""... $ac_c" 1>&6
echo "configure:8666: checking for sigsetjmp" >&5
cat > conftest.$ac_ext <<EOF
#line 8668 "configure"
#include "confdefs.h"
#include <setjmp.h>
int main() {
sigjmp_buf bar; sigsetjmp (bar, 0);
; return 0; }
EOF
if { (eval echo configure:8675: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
   { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_SIGSETJMP
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SIGSETJMP 1
EOF
}

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*

echo $ac_n "checking whether localtime caches TZ""... $ac_c" 1>&6
echo "configure:8695: checking whether localtime caches TZ" >&5

if test "$ac_cv_func_tzset" = "yes"; then
cat > conftest.$ac_ext <<EOF
#line 8699 "configure"
#include "confdefs.h"
#include <time.h>
#if STDC_HEADERS
# include <stdlib.h>
#endif
extern char **environ;
unset_TZ ()
{
  char **from, **to;
  for (to = from = environ; (*to = *from); from++)
    if (! (to[0][0] == 'T' && to[0][1] == 'Z' && to[0][2] == '='))
      to++;
}
char TZ_GMT0[] = "TZ=GMT0";
char TZ_PST8[] = "TZ=PST8";
main()
{
  time_t now = time ((time_t *) 0);
  int hour_GMT0, hour_unset;
  if (putenv (TZ_GMT0) != 0)
    exit (1);
  hour_GMT0 = localtime (&now)->tm_hour;
  unset_TZ ();
  hour_unset = localtime (&now)->tm_hour;
  if (putenv (TZ_PST8) != 0)
    exit (1);
  if (localtime (&now)->tm_hour == hour_GMT0)
    exit (1);
  unset_TZ ();
  if (localtime (&now)->tm_hour != hour_unset)
    exit (1);
  exit (0);
}
EOF
if { (eval echo configure:8734: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  emacs_cv_localtime_cache=no
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  emacs_cv_localtime_cache=yes
fi
rm -fr conftest*
else
	# If we lack tzset, report that localtime does not cache TZ,
	# since we can't invalidate the cache if we don't have tzset.
	emacs_cv_localtime_cache=no
fi
echo "$ac_t""$emacs_cv_localtime_cache" 1>&6
if test $emacs_cv_localtime_cache = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LOCALTIME_CACHE
EOF
cat >> confdefs.h <<\EOF
#define LOCALTIME_CACHE 1
EOF
}

fi

if test "$HAVE_TIMEVAL" = "yes"; then
echo $ac_n "checking whether gettimeofday accepts one or two arguments""... $ac_c" 1>&6
echo "configure:8764: checking whether gettimeofday accepts one or two arguments" >&5
cat > conftest.$ac_ext <<EOF
#line 8766 "configure"
#include "confdefs.h"

#ifdef TIME_WITH_SYS_TIME
#include <sys/time.h>
#include <time.h>
#else
#ifdef HAVE_SYS_TIME_H
#include <sys/time.h>
#else
#include <time.h>
#endif
#endif
  
int main() {

  struct timeval time;
  struct timezone dummy;
  gettimeofday (&time, &dummy);

; return 0; }
EOF
if { (eval echo configure:8788: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  echo "$ac_t""two" 1>&6
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""one" 1>&6
   { test "$extra_verbose" = "yes" && cat << \EOF
    Defining GETTIMEOFDAY_ONE_ARGUMENT
EOF
cat >> confdefs.h <<\EOF
#define GETTIMEOFDAY_ONE_ARGUMENT 1
EOF
}

fi
rm -f conftest*
fi


echo $ac_n "checking for inline""... $ac_c" 1>&6
echo "configure:8810: checking for inline" >&5

ac_cv_c_inline=no
for ac_kw in inline __inline__ __inline; do
  cat > conftest.$ac_ext <<EOF
#line 8815 "configure"
#include "confdefs.h"

int main() {
} $ac_kw foo() {
; return 0; }
EOF
if { (eval echo configure:8822: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_c_inline=$ac_kw; break
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
done


echo "$ac_t""$ac_cv_c_inline" 1>&6
case "$ac_cv_c_inline" in
  inline | yes) ;;
  no) { test "$extra_verbose" = "yes" && cat << \EOF
    Defining inline = 
EOF
cat >> confdefs.h <<\EOF
#define inline 
EOF
}
 ;;
  *)  { test "$extra_verbose" = "yes" && cat << EOF
    Defining inline = $ac_cv_c_inline
EOF
cat >> confdefs.h <<EOF
#define inline $ac_cv_c_inline
EOF
}
 ;;
esac

if test "$ac_cv_c_inline" != "no"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_INLINE
EOF
cat >> confdefs.h <<\EOF
#define HAVE_INLINE 1
EOF
}

  test "$GCC" = "yes" && extra_objs="$extra_objs inline.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"inline.o\""
 fi
fi


# The Ultrix 4.2 mips builtin alloca declared by alloca.h only works
# for constant arguments.  Useless!
echo $ac_n "checking for working alloca.h""... $ac_c" 1>&6
echo "configure:8872: checking for working alloca.h" >&5

cat > conftest.$ac_ext <<EOF
#line 8875 "configure"
#include "confdefs.h"
#include <alloca.h>
int main() {
char *p = alloca(2 * sizeof(int));
; return 0; }
EOF
if { (eval echo configure:8882: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  ac_cv_header_alloca_h=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_alloca_h=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_header_alloca_h" 1>&6
if test $ac_cv_header_alloca_h = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_ALLOCA_H
EOF
cat >> confdefs.h <<\EOF
#define HAVE_ALLOCA_H 1
EOF
}

fi

echo $ac_n "checking for alloca""... $ac_c" 1>&6
echo "configure:8906: checking for alloca" >&5

cat > conftest.$ac_ext <<EOF
#line 8909 "configure"
#include "confdefs.h"

#ifdef __GNUC__
# define alloca __builtin_alloca
#else
# if HAVE_ALLOCA_H
#  include <alloca.h>
# else
#  ifdef _AIX
 #pragma alloca
#  else
#   ifndef alloca /* predefined by HP cc +Olibcalls */
char *alloca ();
#   endif
#  endif
# endif
#endif

int main() {
char *p = (char *) alloca(1);
; return 0; }
EOF
if { (eval echo configure:8932: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  ac_cv_func_alloca_works=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_func_alloca_works=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_func_alloca_works" 1>&6
if test $ac_cv_func_alloca_works = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_ALLOCA
EOF
cat >> confdefs.h <<\EOF
#define HAVE_ALLOCA 1
EOF
}

fi

if test $ac_cv_func_alloca_works = no; then
  # The SVR3 libPW and SVR4 libucb both contain incompatible functions
  # that cause trouble.  Some versions do not even contain alloca or
  # contain a buggy version.  If you still want to use their alloca,
  # use ar to extract alloca.o from them instead of compiling alloca.c.
  ALLOCA=alloca.o
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining C_ALLOCA
EOF
cat >> confdefs.h <<\EOF
#define C_ALLOCA 1
EOF
}


echo $ac_n "checking whether alloca needs Cray hooks""... $ac_c" 1>&6
echo "configure:8971: checking whether alloca needs Cray hooks" >&5

cat > conftest.$ac_ext <<EOF
#line 8974 "configure"
#include "confdefs.h"
#if defined(CRAY) && ! defined(CRAY2)
webecray
#else
wenotbecray
#endif

EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "webecray" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_os_cray=yes
else
  rm -rf conftest*
  ac_cv_os_cray=no
fi
rm -f conftest*


echo "$ac_t""$ac_cv_os_cray" 1>&6
if test $ac_cv_os_cray = yes; then
for ac_func in _getb67 GETB67 getb67; do
  echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:8998: checking for $ac_func" >&5

cat > conftest.$ac_ext <<EOF
#line 9001 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:9024: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining CRAY_STACKSEG_END = $ac_func
EOF
cat >> confdefs.h <<EOF
#define CRAY_STACKSEG_END $ac_func
EOF
}

  break
else
  echo "$ac_t""no" 1>&6
fi

done
fi

echo $ac_n "checking stack direction for C alloca""... $ac_c" 1>&6
echo "configure:9054: checking stack direction for C alloca" >&5

cat > conftest.$ac_ext <<EOF
#line 9057 "configure"
#include "confdefs.h"
find_stack_direction ()
{
  static char *addr = 0;
  auto char dummy;
  if (addr == 0)
    {
      addr = &dummy;
      return find_stack_direction ();
    }
  else
    return (&dummy > addr) ? 1 : -1;
}
main ()
{
  exit (find_stack_direction() < 0);
}
EOF
if { (eval echo configure:9076: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  ac_cv_c_stack_direction=1
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_c_stack_direction=-1
fi
rm -fr conftest*

echo "$ac_t""$ac_cv_c_stack_direction" 1>&6
{ test "$extra_verbose" = "yes" && cat << EOF
    Defining STACK_DIRECTION = $ac_cv_c_stack_direction
EOF
cat >> confdefs.h <<EOF
#define STACK_DIRECTION $ac_cv_c_stack_direction
EOF
}

fi

test -n "$ALLOCA" && extra_objs="$extra_objs $ALLOCA" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"$ALLOCA\""
 fi

ac_safe=`echo "vfork.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for vfork.h""... $ac_c" 1>&6
echo "configure:9105: checking for vfork.h" >&5

cat > conftest.$ac_ext <<EOF
#line 9108 "configure"
#include "confdefs.h"
#include <vfork.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:9113: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_VFORK_H
EOF
cat >> confdefs.h <<\EOF
#define HAVE_VFORK_H 1
EOF
}

else
  echo "$ac_t""no" 1>&6
fi

echo $ac_n "checking for working vfork""... $ac_c" 1>&6
echo "configure:9141: checking for working vfork" >&5

cat > conftest.$ac_ext <<EOF
#line 9144 "configure"
#include "confdefs.h"
/* Thanks to Paul Eggert for this test.  */
#include <stdio.h>
#include <sys/types.h>
#include <sys/stat.h>
#ifdef HAVE_UNISTD_H
#include <unistd.h>
#endif
#ifdef HAVE_VFORK_H
#include <vfork.h>
#endif
/* On some sparc systems, changes by the child to local and incoming
   argument registers are propagated back to the parent.
   The compiler is told about this with #include <vfork.h>,
   but some compilers (e.g. gcc -O) don't grok <vfork.h>.
   Test for this by using a static variable whose address
   is put into a register that is clobbered by the vfork.  */
static
#ifdef __cplusplus
sparc_address_test (int arg)
#else
sparc_address_test (arg) int arg;
#endif
{
  static pid_t child;
  if (!child) {
    child = vfork ();
    if (child < 0) {
      perror ("vfork");
      _exit(2);
    }
    if (!child) {
      arg = getpid();
      write(-1, "", 0);
      _exit (arg);
    }
  }
}
main() {
  pid_t parent = getpid ();
  pid_t child;

  sparc_address_test ();

  child = vfork ();

  if (child == 0) {
    /* Here is another test for sparc vfork register problems.
       This test uses lots of local variables, at least
       as many local variables as main has allocated so far
       including compiler temporaries.  4 locals are enough for
       gcc 1.40.3 on a Solaris 4.1.3 sparc, but we use 8 to be safe.
       A buggy compiler should reuse the register of parent
       for one of the local variables, since it will think that
       parent can't possibly be used any more in this routine.
       Assigning to the local variable will thus munge parent
       in the parent process.  */
    pid_t
      p = getpid(), p1 = getpid(), p2 = getpid(), p3 = getpid(),
      p4 = getpid(), p5 = getpid(), p6 = getpid(), p7 = getpid();
    /* Convince the compiler that p..p7 are live; otherwise, it might
       use the same hardware register for all 8 local variables.  */
    if (p != p1 || p != p2 || p != p3 || p != p4
	|| p != p5 || p != p6 || p != p7)
      _exit(1);

    /* On some systems (e.g. IRIX 3.3),
       vfork doesn't separate parent from child file descriptors.
       If the child closes a descriptor before it execs or exits,
       this munges the parent's descriptor as well.
       Test for this by closing stdout in the child.  */
    _exit(close(fileno(stdout)) != 0);
  } else {
    int status;
    struct stat st;

    while (wait(&status) != child)
      ;
    exit(
	 /* Was there some problem with vforking?  */
	 child < 0

	 /* Did the child fail?  (This shouldn't happen.)  */
	 || status

	 /* Did the vfork/compiler bug occur?  */
	 || parent != getpid()

	 /* Did the file descriptor bug occur?  */
	 || fstat(fileno(stdout), &st) != 0
	 );
  }
}
EOF
if { (eval echo configure:9239: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  ac_cv_func_vfork_works=yes
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_func_vfork_works=no
fi
rm -fr conftest*

echo "$ac_t""$ac_cv_func_vfork_works" 1>&6
if test $ac_cv_func_vfork_works = no; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining vfork = fork
EOF
cat >> confdefs.h <<\EOF
#define vfork fork
EOF
}

fi


echo $ac_n "checking for working strcoll""... $ac_c" 1>&6
echo "configure:9265: checking for working strcoll" >&5

cat > conftest.$ac_ext <<EOF
#line 9268 "configure"
#include "confdefs.h"
#include <string.h>
main ()
{
  exit (strcoll ("abc", "def") >= 0 ||
	strcoll ("ABC", "DEF") >= 0 ||
	strcoll ("123", "456") >= 0);
}
EOF
if { (eval echo configure:9278: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  ac_cv_func_strcoll_works=yes
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_func_strcoll_works=no
fi
rm -fr conftest*

echo "$ac_t""$ac_cv_func_strcoll_works" 1>&6
if test $ac_cv_func_strcoll_works = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_STRCOLL
EOF
cat >> confdefs.h <<\EOF
#define HAVE_STRCOLL 1
EOF
}

fi


for ac_func in getpgrp
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:9306: checking for $ac_func" >&5

cat > conftest.$ac_ext <<EOF
#line 9309 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:9332: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_func
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done

echo $ac_n "checking whether getpgrp takes no argument""... $ac_c" 1>&6
echo "configure:9360: checking whether getpgrp takes no argument" >&5

cat > conftest.$ac_ext <<EOF
#line 9363 "configure"
#include "confdefs.h"

/*
 * If this system has a BSD-style getpgrp(),
 * which takes a pid argument, exit unsuccessfully.
 *
 * Snarfed from Chet Ramey's bash pgrp.c test program
 */
#include <stdio.h>
#include <sys/types.h>

int     pid;
int     pg1, pg2, pg3, pg4;
int     ng, np, s, child;

main()
{
        pid = getpid();
        pg1 = getpgrp(0);
        pg2 = getpgrp();
        pg3 = getpgrp(pid);
        pg4 = getpgrp(1);

        /*
         * If all of these values are the same, it's pretty sure that
         * we're on a system that ignores getpgrp's first argument.
         */
        if (pg2 == pg4 && pg1 == pg3 && pg2 == pg3)
                exit(0);

        child = fork();
        if (child < 0)
                exit(1);
        else if (child == 0) {
                np = getpid();
                /*
                 * If this is Sys V, this will not work; pgrp will be
                 * set to np because setpgrp just changes a pgrp to be
                 * the same as the pid.
                 */
                setpgrp(np, pg1);
                ng = getpgrp(0);        /* Same result for Sys V and BSD */
                if (ng == pg1) {
                        exit(1);
                } else {
                        exit(0);
                }
        } else {
                wait(&s);
                exit(s>>8);
        }
}

EOF
if { (eval echo configure:9418: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  ac_cv_func_getpgrp_void=yes
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_func_getpgrp_void=no
fi
rm -fr conftest*


echo "$ac_t""$ac_cv_func_getpgrp_void" 1>&6
if test $ac_cv_func_getpgrp_void = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining GETPGRP_VOID
EOF
cat >> confdefs.h <<\EOF
#define GETPGRP_VOID 1
EOF
}

fi


echo $ac_n "checking for working mmap""... $ac_c" 1>&6
echo "configure:9445: checking for working mmap" >&5
case "$opsys" in ultrix* ) have_mmap=no ;; *)
cat > conftest.$ac_ext <<EOF
#line 9448 "configure"
#include "confdefs.h"
#include <stdio.h>
#include <unistd.h>
#include <fcntl.h>
#include <sys/mman.h>

#ifndef MAP_VARIABLE
#define MAP_VARIABLE 0
#endif

#ifndef MAP_FAILED
#define MAP_FAILED -1
#endif

int main (int argc, char *argv[])
{
  int fd = -1;
  caddr_t p;
#ifndef MAP_ANONYMOUS
  fd = open ("/dev/zero", O_RDWR);
  if (fd < 0)
    return 1;
#define MAP_ANONYMOUS 0
#endif
  if (mmap(0, 1024, PROT_READ | PROT_WRITE,
	   MAP_PRIVATE | MAP_VARIABLE | MAP_ANONYMOUS,
	   fd, 0) != (void *) MAP_FAILED)
    return 0;
  perror ("conftest: mmap failed");
  return 1;
}
EOF
if { (eval echo configure:9481: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  have_mmap=yes
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  have_mmap=no
fi
rm -fr conftest* ;;
esac
echo "$ac_t""$have_mmap" 1>&6
test "$have_mmap" = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_MMAP
EOF
cat >> confdefs.h <<\EOF
#define HAVE_MMAP 1
EOF
}

for ac_hdr in unistd.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:9506: checking for $ac_hdr" >&5

cat > conftest.$ac_ext <<EOF
#line 9509 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:9514: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_hdr
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done

for ac_func in getpagesize
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:9546: checking for $ac_func" >&5

cat > conftest.$ac_ext <<EOF
#line 9549 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:9572: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_func
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done

echo $ac_n "checking for working mmap""... $ac_c" 1>&6
echo "configure:9600: checking for working mmap" >&5

cat > conftest.$ac_ext <<EOF
#line 9603 "configure"
#include "confdefs.h"

/* Thanks to Mike Haertel and Jim Avera for this test.
   Here is a matrix of mmap possibilities:
	mmap private not fixed
	mmap private fixed at somewhere currently unmapped
	mmap private fixed at somewhere already mapped
	mmap shared not fixed
	mmap shared fixed at somewhere currently unmapped
	mmap shared fixed at somewhere already mapped
   For private mappings, we should verify that changes cannot be read()
   back from the file, nor mmap's back from the file at a different
   address.  (There have been systems where private was not correctly
   implemented like the infamous i386 svr4.0, and systems where the
   VM page cache was not coherent with the filesystem buffer cache
   like early versions of FreeBSD and possibly contemporary NetBSD.)
   For shared mappings, we should conversely verify that changes get
   propogated back to all the places they're supposed to be.

   Grep wants private fixed already mapped.
   The main things grep needs to know about mmap are:
   * does it exist and is it safe to write into the mmap'd area
   * how to use it (BSD variants)  */
#include <sys/types.h>
#include <fcntl.h>
#include <sys/mman.h>

/* This mess was copied from the GNU getpagesize.h.  */
#ifndef HAVE_GETPAGESIZE
# ifdef HAVE_UNISTD_H
#  include <unistd.h>
# endif

/* Assume that all systems that can run configure have sys/param.h.  */
# ifndef HAVE_SYS_PARAM_H
#  define HAVE_SYS_PARAM_H 1
# endif

# ifdef _SC_PAGESIZE
#  define getpagesize() sysconf(_SC_PAGESIZE)
# else /* no _SC_PAGESIZE */
#  ifdef HAVE_SYS_PARAM_H
#   include <sys/param.h>
#   ifdef EXEC_PAGESIZE
#    define getpagesize() EXEC_PAGESIZE
#   else /* no EXEC_PAGESIZE */
#    ifdef NBPG
#     define getpagesize() NBPG * CLSIZE
#     ifndef CLSIZE
#      define CLSIZE 1
#     endif /* no CLSIZE */
#    else /* no NBPG */
#     ifdef NBPC
#      define getpagesize() NBPC
#     else /* no NBPC */
#      ifdef PAGESIZE
#       define getpagesize() PAGESIZE
#      endif /* PAGESIZE */
#     endif /* no NBPC */
#    endif /* no NBPG */
#   endif /* no EXEC_PAGESIZE */
#  else /* no HAVE_SYS_PARAM_H */
#   define getpagesize() 8192	/* punt totally */
#  endif /* no HAVE_SYS_PARAM_H */
# endif /* no _SC_PAGESIZE */

#endif /* no HAVE_GETPAGESIZE */

#ifdef __cplusplus
extern "C" { void *malloc(unsigned); }
#else
char *malloc();
#endif

int
main()
{
	char *data, *data2, *data3;
	int i, pagesize;
	int fd;

	pagesize = getpagesize();

	/*
	 * First, make a file with some known garbage in it.
	 */
	data = malloc(pagesize);
	if (!data)
		exit(1);
	for (i = 0; i < pagesize; ++i)
		*(data + i) = rand();
	umask(0);
	fd = creat("conftestmmap", 0600);
	if (fd < 0)
		exit(1);
	if (write(fd, data, pagesize) != pagesize)
		exit(1);
	close(fd);

	/*
	 * Next, try to mmap the file at a fixed address which
	 * already has something else allocated at it.  If we can,
	 * also make sure that we see the same garbage.
	 */
	fd = open("conftestmmap", O_RDWR);
	if (fd < 0)
		exit(1);
	data2 = malloc(2 * pagesize);
	if (!data2)
		exit(1);
	data2 += (pagesize - ((int) data2 & (pagesize - 1))) & (pagesize - 1);
	if (data2 != mmap(data2, pagesize, PROT_READ | PROT_WRITE,
	    MAP_PRIVATE | MAP_FIXED, fd, 0L))
		exit(1);
	for (i = 0; i < pagesize; ++i)
		if (*(data + i) != *(data2 + i))
			exit(1);

	/*
	 * Finally, make sure that changes to the mapped area
	 * do not percolate back to the file as seen by read().
	 * (This is a bug on some variants of i386 svr4.0.)
	 */
	for (i = 0; i < pagesize; ++i)
		*(data2 + i) = *(data2 + i) + 1;
	data3 = malloc(pagesize);
	if (!data3)
		exit(1);
	if (read(fd, data3, pagesize) != pagesize)
		exit(1);
	for (i = 0; i < pagesize; ++i)
		if (*(data + i) != *(data3 + i))
			exit(1);
	close(fd);
	unlink("conftestmmap");
	exit(0);
}

EOF
if { (eval echo configure:9743: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  ac_cv_func_mmap_fixed_mapped=yes
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_func_mmap_fixed_mapped=no
fi
rm -fr conftest*

echo "$ac_t""$ac_cv_func_mmap_fixed_mapped" 1>&6
if test $ac_cv_func_mmap_fixed_mapped = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_MMAP
EOF
cat >> confdefs.h <<\EOF
#define HAVE_MMAP 1
EOF
}

fi


test "$GNU_MALLOC" != "yes"   -a "$have_mmap" != "yes" && rel_alloc=no
test "$rel_alloc" = "default" -a "$have_mmap"  = "yes" && rel_alloc=yes
test "$rel_alloc" = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining REL_ALLOC
EOF
cat >> confdefs.h <<\EOF
#define REL_ALLOC 1
EOF
}


ac_safe=`echo "termios.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for termios.h""... $ac_c" 1>&6
echo "configure:9781: checking for termios.h" >&5

cat > conftest.$ac_ext <<EOF
#line 9784 "configure"
#include "confdefs.h"
#include <termios.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:9789: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_TERMIOS
EOF
cat >> confdefs.h <<\EOF
#define HAVE_TERMIOS 1
EOF
}

  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining SIGNALS_VIA_CHARACTERS
EOF
cat >> confdefs.h <<\EOF
#define SIGNALS_VIA_CHARACTERS 1
EOF
}

  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining NO_TERMIO
EOF
cat >> confdefs.h <<\EOF
#define NO_TERMIO 1
EOF
}

else
  echo "$ac_t""no" 1>&6
ac_safe=`echo "termio.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for termio.h""... $ac_c" 1>&6
echo "configure:9832: checking for termio.h" >&5

cat > conftest.$ac_ext <<EOF
#line 9835 "configure"
#include "confdefs.h"
#include <termio.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:9840: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_TERMIO
EOF
cat >> confdefs.h <<\EOF
#define HAVE_TERMIO 1
EOF
}

else
  echo "$ac_t""no" 1>&6
fi

fi



echo $ac_n "checking for socket""... $ac_c" 1>&6
echo "configure:9872: checking for socket" >&5

cat > conftest.$ac_ext <<EOF
#line 9875 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char socket(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char socket();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_socket) || defined (__stub___socket)
choke me
#else
socket();
#endif

; return 0; }
EOF
if { (eval echo configure:9898: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_func_socket=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_socket=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'socket`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  ac_safe=`echo "netinet/in.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for netinet/in.h""... $ac_c" 1>&6
echo "configure:9913: checking for netinet/in.h" >&5

cat > conftest.$ac_ext <<EOF
#line 9916 "configure"
#include "confdefs.h"
#include <netinet/in.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:9921: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  ac_safe=`echo "arpa/inet.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for arpa/inet.h""... $ac_c" 1>&6
echo "configure:9938: checking for arpa/inet.h" >&5

cat > conftest.$ac_ext <<EOF
#line 9941 "configure"
#include "confdefs.h"
#include <arpa/inet.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:9946: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_SOCKETS
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SOCKETS 1
EOF
}

      echo $ac_n "checking "for sun_len member in struct sockaddr_un"""... $ac_c" 1>&6
echo "configure:9971: checking "for sun_len member in struct sockaddr_un"" >&5
      cat > conftest.$ac_ext <<EOF
#line 9973 "configure"
#include "confdefs.h"

#include <sys/types.h>
#include <sys/socket.h>
#include <sys/un.h>
      
int main() {
static struct sockaddr_un x; x.sun_len = 1;
; return 0; }
EOF
if { (eval echo configure:9984: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6; { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_SOCKADDR_SUN_LEN
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SOCKADDR_SUN_LEN 1
EOF
}

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*
      echo $ac_n "checking "for ip_mreq struct in netinet/in.h"""... $ac_c" 1>&6
echo "configure:10002: checking "for ip_mreq struct in netinet/in.h"" >&5
      cat > conftest.$ac_ext <<EOF
#line 10004 "configure"
#include "confdefs.h"

#include <sys/types.h>
#include <netinet/in.h>
      
int main() {
static struct ip_mreq x;
; return 0; }
EOF
if { (eval echo configure:10014: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6; { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_MULTICAST
EOF
cat >> confdefs.h <<\EOF
#define HAVE_MULTICAST 1
EOF
}

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*
else
  echo "$ac_t""no" 1>&6
fi

else
  echo "$ac_t""no" 1>&6
fi

else
  echo "$ac_t""no" 1>&6
fi


echo $ac_n "checking for msgget""... $ac_c" 1>&6
echo "configure:10045: checking for msgget" >&5

cat > conftest.$ac_ext <<EOF
#line 10048 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char msgget(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char msgget();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_msgget) || defined (__stub___msgget)
choke me
#else
msgget();
#endif

; return 0; }
EOF
if { (eval echo configure:10071: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_func_msgget=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_msgget=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'msgget`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  ac_safe=`echo "sys/ipc.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for sys/ipc.h""... $ac_c" 1>&6
echo "configure:10086: checking for sys/ipc.h" >&5

cat > conftest.$ac_ext <<EOF
#line 10089 "configure"
#include "confdefs.h"
#include <sys/ipc.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:10094: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  ac_safe=`echo "sys/msg.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for sys/msg.h""... $ac_c" 1>&6
echo "configure:10111: checking for sys/msg.h" >&5

cat > conftest.$ac_ext <<EOF
#line 10114 "configure"
#include "confdefs.h"
#include <sys/msg.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:10119: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_SYSVIPC
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SYSVIPC 1
EOF
}

else
  echo "$ac_t""no" 1>&6
fi

else
  echo "$ac_t""no" 1>&6
fi

else
  echo "$ac_t""no" 1>&6
fi


ac_safe=`echo "dirent.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for dirent.h""... $ac_c" 1>&6
echo "configure:10157: checking for dirent.h" >&5

cat > conftest.$ac_ext <<EOF
#line 10160 "configure"
#include "confdefs.h"
#include <dirent.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:10165: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining SYSV_SYSTEM_DIR
EOF
cat >> confdefs.h <<\EOF
#define SYSV_SYSTEM_DIR 1
EOF
}

else
  echo "$ac_t""no" 1>&6
ac_safe=`echo "sys/dir.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for sys/dir.h""... $ac_c" 1>&6
echo "configure:10192: checking for sys/dir.h" >&5

cat > conftest.$ac_ext <<EOF
#line 10195 "configure"
#include "confdefs.h"
#include <sys/dir.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:10200: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
{ test "$extra_verbose" = "yes" && cat << \EOF
    Defining NONSYSTEM_DIR_LIBRARY
EOF
cat >> confdefs.h <<\EOF
#define NONSYSTEM_DIR_LIBRARY 1
EOF
}

fi

fi


ac_safe=`echo "nlist.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for nlist.h""... $ac_c" 1>&6
echo "configure:10233: checking for nlist.h" >&5

cat > conftest.$ac_ext <<EOF
#line 10236 "configure"
#include "confdefs.h"
#include <nlist.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:10241: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining NLIST_STRUCT
EOF
cat >> confdefs.h <<\EOF
#define NLIST_STRUCT 1
EOF
}

else
  echo "$ac_t""no" 1>&6
fi



echo "checking "for sound support"" 1>&6
echo "configure:10271: checking "for sound support"" >&5
case "$with_sound" in
  native | both ) with_native_sound=yes;;
  nas    | no   ) with_native_sound=no;;
esac
test -z "$with_native_sound" -a -n "$native_sound_lib" && with_native_sound=yes

if test "$with_native_sound" != "no"; then
    if test -n "$native_sound_lib"; then
    ac_safe=`echo "multimedia/audio_device.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for multimedia/audio_device.h""... $ac_c" 1>&6
echo "configure:10282: checking for multimedia/audio_device.h" >&5

cat > conftest.$ac_ext <<EOF
#line 10285 "configure"
#include "confdefs.h"
#include <multimedia/audio_device.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:10290: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  sound_found=yes sound_cflags=""
      extra_objs="$extra_objs sunplay.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"sunplay.o\""
 fi
else
  echo "$ac_t""no" 1>&6
fi

  fi

    if test -z "$sound_found" -a -d "/usr/demo/SOUND"; then
    sound_found=yes
    extra_objs="$extra_objs sunplay.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"sunplay.o\""
 fi
    if test -d "/usr/demo/SOUND/include"
      then sound_cflags="-I/usr/demo/SOUND/include"
      else sound_cflags="-I/usr/demo/SOUND"
    fi
    if test -z "$native_sound_lib" ; then
      if test -r "/usr/demo/SOUND/lib/libaudio.a"
        then native_sound_lib="/usr/demo/SOUND/lib/libaudio.a"
        else native_sound_lib="/usr/demo/SOUND/libaudio.a"
      fi
    fi
  fi

    if test -z "$sound_found"; then
    case "$canonical" in
    *-sgi-* )
      if test -z "$native_sound_lib"; then
        
echo $ac_n "checking for ALopenport in -laudio""... $ac_c" 1>&6
echo "configure:10338: checking for ALopenport in -laudio" >&5
ac_lib_var=`echo audio'_'ALopenport | sed 'y%./+-%__p_%'`

xe_check_libs=" -laudio "
cat > conftest.$ac_ext <<EOF
#line 10343 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char ALopenport();

int main() {
ALopenport()
; return 0; }
EOF
if { (eval echo configure:10354: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  native_sound_lib="-laudio"
else
  echo "$ac_t""no" 1>&6
fi


      fi
      if test -n "$native_sound_lib"; then
        sound_found=yes sound_cflags=""
        extra_objs="$extra_objs sgiplay.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"sgiplay.o\""
 fi
      fi ;;
    hppa*-hp-hpux* )
      if test -z "$native_sound_lib"; then
	
echo $ac_n "checking for AOpenAudio in -lAlib""... $ac_c" 1>&6
echo "configure:10385: checking for AOpenAudio in -lAlib" >&5
ac_lib_var=`echo Alib'_'AOpenAudio | sed 'y%./+-%__p_%'`

xe_check_libs=" -lAlib "
cat > conftest.$ac_ext <<EOF
#line 10390 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char AOpenAudio();

int main() {
AOpenAudio()
; return 0; }
EOF
if { (eval echo configure:10401: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  native_sound_lib="-lAlib"
else
  echo "$ac_t""no" 1>&6
fi


      fi
      if test -n "$native_sound_lib"; then
        sound_found=yes
        extra_objs="$extra_objs hpplay.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"hpplay.o\""
 fi
        if test "$GCC" = "yes" # Kludge city
          then sound_cflags="-Dconst= -Dvolatile= -I/usr/audio/examples"
          else sound_cflags="+e -I/usr/audio/examples"
        fi
      fi ;;
    esac
  fi

    if test -z "$sound_found"; then
    for dir in "machine" "sys" "linux"; do
      ac_safe=`echo "${dir}/soundcard.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for ${dir}/soundcard.h""... $ac_c" 1>&6
echo "configure:10439: checking for ${dir}/soundcard.h" >&5

cat > conftest.$ac_ext <<EOF
#line 10442 "configure"
#include "confdefs.h"
#include <${dir}/soundcard.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:10447: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  sound_found=yes
        extra_objs="$extra_objs linuxplay.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"linuxplay.o\""
 fi
        { test "$extra_verbose" = "yes" && cat << EOF
    Defining SOUNDCARD_H_PATH = "${dir}/soundcard.h"
EOF
cat >> confdefs.h <<EOF
#define SOUNDCARD_H_PATH "${dir}/soundcard.h"
EOF
}

        break
else
  echo "$ac_t""no" 1>&6
fi

    done
  fi

  test "$sound_found" = "yes" && with_native_sound=yes
fi

if test -z "$with_sound"; then
  if test "$with_native_sound" = "yes" -o -n "$native_sound_lib"; then
    with_sound=native
  fi
fi

if test "$with_native_sound" = "yes"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_NATIVE_SOUND
EOF
cat >> confdefs.h <<\EOF
#define HAVE_NATIVE_SOUND 1
EOF
}

  test -n "$native_sound_lib" && LIBS="$native_sound_lib $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"$native_sound_lib\" to \$LIBS"; fi
fi

case "$with_sound" in both | nas )
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_NAS_SOUND
EOF
cat >> confdefs.h <<\EOF
#define HAVE_NAS_SOUND 1
EOF
}

  extra_objs="$extra_objs nas.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"nas.o\""
 fi
  libs_x="-laudio $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-laudio\" to \$libs_x"; fi
      cat > conftest.$ac_ext <<EOF
#line 10517 "configure"
#include "confdefs.h"
#include <audio/Xtutil.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "AuXtErrorJump" >/dev/null 2>&1; then
  :
else
  rm -rf conftest*
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining NAS_NO_ERROR_JUMP
EOF
cat >> confdefs.h <<\EOF
#define NAS_NO_ERROR_JUMP 1
EOF
}

fi
rm -f conftest*

esac


test -z "$with_tty" && with_tty=yes

if test "$with_tty" = "yes"  ; then
  echo "checking for TTY-related features" 1>&6
echo "configure:10544: checking for TTY-related features" >&5
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_TTY
EOF
cat >> confdefs.h <<\EOF
#define HAVE_TTY 1
EOF
}

  extra_objs="$extra_objs console-tty.o device-tty.o event-tty.o frame-tty.o objects-tty.o redisplay-tty.o cm.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"console-tty.o device-tty.o event-tty.o frame-tty.o objects-tty.o redisplay-tty.o cm.o\""
 fi

    if test -z "$with_ncurses"; then
    
echo $ac_n "checking for tgetent in -lncurses""... $ac_c" 1>&6
echo "configure:10560: checking for tgetent in -lncurses" >&5
ac_lib_var=`echo ncurses'_'tgetent | sed 'y%./+-%__p_%'`

xe_check_libs=" -lncurses "
cat > conftest.$ac_ext <<EOF
#line 10565 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char tgetent();

int main() {
tgetent()
; return 0; }
EOF
if { (eval echo configure:10576: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  with_ncurses=yes
else
  echo "$ac_t""no" 1>&6
with_ncurses=no
fi


  fi
  if test "$with_ncurses" = "yes"; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_NCURSES
EOF
cat >> confdefs.h <<\EOF
#define HAVE_NCURSES 1
EOF
}

    ac_safe=`echo "ncurses/curses.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for ncurses/curses.h""... $ac_c" 1>&6
echo "configure:10609: checking for ncurses/curses.h" >&5

cat > conftest.$ac_ext <<EOF
#line 10612 "configure"
#include "confdefs.h"
#include <ncurses/curses.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:10617: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  curses_h_path=ncurses/curses.h
else
  echo "$ac_t""no" 1>&6
fi

    ac_safe=`echo "ncurses/term.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for ncurses/term.h""... $ac_c" 1>&6
echo "configure:10639: checking for ncurses/term.h" >&5

cat > conftest.$ac_ext <<EOF
#line 10642 "configure"
#include "confdefs.h"
#include <ncurses/term.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:10647: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  term_h_path=ncurses/term.h
else
  echo "$ac_t""no" 1>&6
fi

    extra_objs="$extra_objs terminfo.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"terminfo.o\""
 fi
    LIBS="-lncurses $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lncurses\" to \$LIBS"; fi

    if test "$ac_cv_header_ncurses_curses_h" != "yes" ; then
                        save_c_switch_site="$c_switch_site"
      c_switch_site="$c_switch_site -I/usr/include/ncurses"
      ac_safe=`echo "ncurses/curses.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for ncurses/curses.h""... $ac_c" 1>&6
echo "configure:10677: checking for ncurses/curses.h" >&5

cat > conftest.$ac_ext <<EOF
#line 10680 "configure"
#include "confdefs.h"
#include <ncurses/curses.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:10685: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  curses_h_path=ncurses/curses.h
else
  echo "$ac_t""no" 1>&6
fi

      if test "$ac_cv_header_ncurses_curses_h" = "yes"
        then echo "configure: warning: "Your system has the bogus ncurses include bug."" 1>&2
        else c_switch_site="$save_c_switch_site"
      fi
    fi
  else         if test "$have_terminfo" = "yes"; then
      extra_objs="$extra_objs terminfo.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"terminfo.o\""
 fi
      if test -n "$libs_termcap"; then
	LIBS="$libs_termcap $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"$libs_termcap\" to \$LIBS"; fi
      else
	for lib in curses termlib termcap; do
	  
echo $ac_n "checking for tgetent in -l$lib""... $ac_c" 1>&6
echo "configure:10720: checking for tgetent in -l$lib" >&5
ac_lib_var=`echo $lib'_'tgetent | sed 'y%./+-%__p_%'`

xe_check_libs=" -l$lib "
cat > conftest.$ac_ext <<EOF
#line 10725 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char tgetent();

int main() {
tgetent()
; return 0; }
EOF
if { (eval echo configure:10736: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  LIBS="-l${lib} $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-l${lib}\" to \$LIBS"; fi; break
else
  echo "$ac_t""no" 1>&6
fi


	done
      fi
    else       extra_objs="$extra_objs tparam.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"tparam.o\""
 fi
                        case "$opsys" in *-hp-hpux* ) libs_termcap="-ltermcap" ;; esac
      if test -n "$libs_termcap"; then
	LIBS="$libs_termcap $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"$libs_termcap\" to \$LIBS"; fi
      else
	
echo $ac_n "checking for tgetent in -lcurses""... $ac_c" 1>&6
echo "configure:10767: checking for tgetent in -lcurses" >&5
ac_lib_var=`echo curses'_'tgetent | sed 'y%./+-%__p_%'`

xe_check_libs=" -lcurses "
cat > conftest.$ac_ext <<EOF
#line 10772 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char tgetent();

int main() {
tgetent()
; return 0; }
EOF
if { (eval echo configure:10783: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  LIBS="-lcurses $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lcurses\" to \$LIBS"; fi
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for tgetent in -ltermcap""... $ac_c" 1>&6
echo "configure:10801: checking for tgetent in -ltermcap" >&5
ac_lib_var=`echo termcap'_'tgetent | sed 'y%./+-%__p_%'`

xe_check_libs=" -ltermcap "
cat > conftest.$ac_ext <<EOF
#line 10806 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char tgetent();

int main() {
tgetent()
; return 0; }
EOF
if { (eval echo configure:10817: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  LIBS="-ltermcap $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-ltermcap\" to \$LIBS"; fi
else
  echo "$ac_t""no" 1>&6
extra_objs="$extra_objs termcap.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"termcap.o\""
 fi
fi


fi


      fi
    fi
  fi
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining CURSES_H_PATH = "${curses_h_path-curses.h}"
EOF
cat >> confdefs.h <<EOF
#define CURSES_H_PATH "${curses_h_path-curses.h}"
EOF
}

  { test "$extra_verbose" = "yes" && cat << EOF
    Defining TERM_H_PATH = "${term_h_path-term.h}"
EOF
cat >> confdefs.h <<EOF
#define TERM_H_PATH "${term_h_path-term.h}"
EOF
}


    test -z "$with_gpm" && { ac_safe=`echo "gpm.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for gpm.h""... $ac_c" 1>&6
echo "configure:10865: checking for gpm.h" >&5

cat > conftest.$ac_ext <<EOF
#line 10868 "configure"
#include "confdefs.h"
#include <gpm.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:10873: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_gpm=no
fi
 }
  test -z "$with_gpm" && { 
echo $ac_n "checking for Gpm_Open in -lgpm""... $ac_c" 1>&6
echo "configure:10896: checking for Gpm_Open in -lgpm" >&5
ac_lib_var=`echo gpm'_'Gpm_Open | sed 'y%./+-%__p_%'`

xe_check_libs=" -lgpm "
cat > conftest.$ac_ext <<EOF
#line 10901 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char Gpm_Open();

int main() {
Gpm_Open()
; return 0; }
EOF
if { (eval echo configure:10912: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  with_gpm=yes
else
  echo "$ac_t""no" 1>&6
with_gpm=no
fi

 }
  if test "$with_gpm" = "yes"; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_GPM
EOF
cat >> confdefs.h <<\EOF
#define HAVE_GPM 1
EOF
}

    extra_objs="$extra_objs gpmevent.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"gpmevent.o\""
 fi
    LIBS="-lgpm $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lgpm\" to \$LIBS"; fi
  fi

else   for feature in ncurses gpm; do
    if eval "test -n \"\$with_${feature}\" -a \"\$with_${feature}\" != no" ; then
      echo "configure: warning: "--with-${feature} ignored:  Not valid without TTY support"" 1>&2
    fi
    eval "with_${feature}=no"
  done
fi 
test "$with_x11" = "yes" -o "$with_tty" = "yes" && extra_objs="$extra_objs event-unixoid.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"event-unixoid.o\""
 fi


test "$with_database_gnudbm $with_database_dbm $with_database_berkdb" \
  != "no no no" && echo "checking for database support" 1>&6
echo "configure:10962: checking for database support" >&5

if test "$with_database_gnudbm $with_database_dbm" != "no no"; then
  ac_safe=`echo "ndbm.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for ndbm.h""... $ac_c" 1>&6
echo "configure:10967: checking for ndbm.h" >&5

cat > conftest.$ac_ext <<EOF
#line 10970 "configure"
#include "confdefs.h"
#include <ndbm.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:10975: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6

    test "$with_database_gnudbm" = "yes" -o \
         "$with_database_dbm"    = "yes" && \
      { echo "Error:" "Required DBM support cannot be provided." >&2; exit 1; }
    with_database_gnudbm=no with_database_dbm=no
fi

fi

if test "$with_database_gnudbm" != "no"; then
  
echo $ac_n "checking for dbm_open in -lgdbm""... $ac_c" 1>&6
echo "configure:11005: checking for dbm_open in -lgdbm" >&5
ac_lib_var=`echo gdbm'_'dbm_open | sed 'y%./+-%__p_%'`

xe_check_libs=" -lgdbm "
cat > conftest.$ac_ext <<EOF
#line 11010 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dbm_open();

int main() {
dbm_open()
; return 0; }
EOF
if { (eval echo configure:11021: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  with_database_gnudbm=yes with_database_dbm=no libdbm=-lgdbm
else
  echo "$ac_t""no" 1>&6
if test "$with_database_gnudbm" = "yes"; then
     { echo "Error:" "Required GNU DBM support cannot be provided." >&2; exit 1; }
   fi
   with_database_gnudbm=no
fi


fi

if test "$with_database_dbm" != "no"; then
  echo $ac_n "checking for dbm_open""... $ac_c" 1>&6
echo "configure:11049: checking for dbm_open" >&5

cat > conftest.$ac_ext <<EOF
#line 11052 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char dbm_open(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dbm_open();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_dbm_open) || defined (__stub___dbm_open)
choke me
#else
dbm_open();
#endif

; return 0; }
EOF
if { (eval echo configure:11075: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_func_dbm_open=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_dbm_open=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'dbm_open`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  with_database_dbm=yes libdbm=
else
  echo "$ac_t""no" 1>&6

    
echo $ac_n "checking for dbm_open in -ldbm""... $ac_c" 1>&6
echo "configure:11094: checking for dbm_open in -ldbm" >&5
ac_lib_var=`echo dbm'_'dbm_open | sed 'y%./+-%__p_%'`

xe_check_libs=" -ldbm "
cat > conftest.$ac_ext <<EOF
#line 11099 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dbm_open();

int main() {
dbm_open()
; return 0; }
EOF
if { (eval echo configure:11110: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  with_database_dbm=yes libdbm=-ldbm
else
  echo "$ac_t""no" 1>&6
test "$with_database_dbm" = "yes" && \
        { echo "Error:" "Required DBM support cannot be provided." >&2; exit 1; }
      with_database_dbm=no
fi


fi

fi

test -n "$libdbm" && LIBS=""$libdbm" $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \""$libdbm"\" to \$LIBS"; fi
test "$with_database_gnudbm" = "yes" -o \
     "$with_database_dbm"    = "yes" && \
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_DBM
EOF
cat >> confdefs.h <<\EOF
#define HAVE_DBM 1
EOF
}


if test "$with_database_berkdb" != "no"; then
  echo $ac_n "checking for Berkeley db.h""... $ac_c" 1>&6
echo "configure:11151: checking for Berkeley db.h" >&5
  for path in "db/db.h" "db.h"; do
    cat > conftest.$ac_ext <<EOF
#line 11154 "configure"
#include "confdefs.h"
#ifdef HAVE_INTTYPES_H
#define __BIT_TYPES_DEFINED__
#include <inttypes.h>
typedef uint8_t  u_int8_t;
typedef uint16_t u_int16_t;
typedef uint32_t u_int32_t;
#ifdef WE_DONT_NEED_QUADS
typedef uint64_t u_int64_t;
#endif
#endif
#include <$path>

int main() {

; return 0; }
EOF
if { (eval echo configure:11172: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  db_h_path="$path"; break
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
  done
  if test -z "$db_h_path"
  then echo "$ac_t""no" 1>&6; with_database_berkdb=no
  else echo "$ac_t""$db_h_path" 1>&6
  fi

  if test "$with_database_berkdb" != "no"; then
    echo $ac_n "checking for Berkeley DB version""... $ac_c" 1>&6
echo "configure:11188: checking for Berkeley DB version" >&5
    cat > conftest.$ac_ext <<EOF
#line 11190 "configure"
#include "confdefs.h"
#include <$db_h_path>
#if DB_VERSION_MAJOR > 1
yes
#endif

EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  echo "$ac_t""2" 1>&6; dbfunc=db_open
else
  rm -rf conftest*
  echo "$ac_t""1" 1>&6; dbfunc=dbopen
fi
rm -f conftest*

    echo $ac_n "checking for $dbfunc""... $ac_c" 1>&6
echo "configure:11209: checking for $dbfunc" >&5

cat > conftest.$ac_ext <<EOF
#line 11212 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $dbfunc(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $dbfunc();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$dbfunc) || defined (__stub___$dbfunc)
choke me
#else
$dbfunc();
#endif

; return 0; }
EOF
if { (eval echo configure:11235: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_func_$dbfunc=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$dbfunc=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'$dbfunc`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  with_database_berkdb=yes need_libdb=no
else
  echo "$ac_t""no" 1>&6

    
echo $ac_n "checking for $dbfunc in -ldb""... $ac_c" 1>&6
echo "configure:11254: checking for $dbfunc in -ldb" >&5
ac_lib_var=`echo db'_'$dbfunc | sed 'y%./+-%__p_%'`

xe_check_libs=" -ldb "
cat > conftest.$ac_ext <<EOF
#line 11259 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $dbfunc();

int main() {
$dbfunc()
; return 0; }
EOF
if { (eval echo configure:11270: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  with_database_berkdb=yes need_libdb=yes
else
  echo "$ac_t""no" 1>&6
fi


fi

  fi

  if test "$with_database_berkdb" = "yes"; then
    { test "$extra_verbose" = "yes" && cat << EOF
    Defining DB_H_PATH = "$db_h_path"
EOF
cat >> confdefs.h <<EOF
#define DB_H_PATH "$db_h_path"
EOF
}

    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_BERKELEY_DB
EOF
cat >> confdefs.h <<\EOF
#define HAVE_BERKELEY_DB 1
EOF
}

    test "$need_libdb" = "yes" && LIBS="-ldb $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-ldb\" to \$LIBS"; fi
  else with_database_berkdb=no
  fi
fi

if test "$with_database_gnudbm $with_database_dbm $with_database_berkdb" \
     != "no no no"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_DATABASE
EOF
cat >> confdefs.h <<\EOF
#define HAVE_DATABASE 1
EOF
}

  extra_objs="$extra_objs database.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"database.o\""
 fi
fi

if test "$with_socks" = "yes"; then
  
echo $ac_n "checking for SOCKSinit in -lsocks""... $ac_c" 1>&6
echo "configure:11334: checking for SOCKSinit in -lsocks" >&5
ac_lib_var=`echo socks'_'SOCKSinit | sed 'y%./+-%__p_%'`

xe_check_libs=" -lsocks "
cat > conftest.$ac_ext <<EOF
#line 11339 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char SOCKSinit();

int main() {
SOCKSinit()
; return 0; }
EOF
if { (eval echo configure:11350: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo socks | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_lib
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF
}

  LIBS="-lsocks $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lsocks\" to \$LIBS"; fi

else
  echo "$ac_t""no" 1>&6
fi


  test -n "$ac_cv_lib_socks_SOCKSinit" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_SOCKS
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SOCKS 1
EOF
}

fi

if test "$usage_tracking" = "yes"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining USAGE_TRACKING
EOF
cat >> confdefs.h <<\EOF
#define USAGE_TRACKING 1
EOF
}

  LIBS="-Bstatic -lut -Bdynamic $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-Bstatic -lut -Bdynamic\" to \$LIBS"; fi
fi

for ac_hdr in dlfcn.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:11407: checking for $ac_hdr" >&5

cat > conftest.$ac_ext <<EOF
#line 11410 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:11415: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_hdr
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
}
 have_dlfcn=yes
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_DLFCN_H
EOF
cat >> confdefs.h <<\EOF
#define HAVE_DLFCN_H 1
EOF
}

else
  echo "$ac_t""no" 1>&6
fi
done

test -z "$with_shlib" && test ! -z "$have_dlfcn" && { 
echo $ac_n "checking for dlopen in -ldl""... $ac_c" 1>&6
echo "configure:11454: checking for dlopen in -ldl" >&5
ac_lib_var=`echo dl'_'dlopen | sed 'y%./+-%__p_%'`

xe_check_libs=" -ldl "
cat > conftest.$ac_ext <<EOF
#line 11459 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dlopen();

int main() {
dlopen()
; return 0; }
EOF
if { (eval echo configure:11470: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_DLOPEN
EOF
cat >> confdefs.h <<\EOF
#define HAVE_DLOPEN 1
EOF
}
 DLL_LIB=dl;  with_shlib=yes
else
  echo "$ac_t""no" 1>&6
fi

 }
test -z "$with_shlib" && test ! -z "$have_dlfcn" && { 
echo $ac_n "checking for _dlopen in -lc""... $ac_c" 1>&6
echo "configure:11499: checking for _dlopen in -lc" >&5
ac_lib_var=`echo c'_'_dlopen | sed 'y%./+-%__p_%'`

xe_check_libs=" -lc "
cat > conftest.$ac_ext <<EOF
#line 11504 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char _dlopen();

int main() {
_dlopen()
; return 0; }
EOF
if { (eval echo configure:11515: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_DLOPEN
EOF
cat >> confdefs.h <<\EOF
#define HAVE_DLOPEN 1
EOF
}
 DLL_LIB=;   with_shlib=yes
else
  echo "$ac_t""no" 1>&6
fi

 }
test -z "$with_shlib" && test ! -z "$have_dlfcn" && { 
echo $ac_n "checking for dlopen in -lc""... $ac_c" 1>&6
echo "configure:11544: checking for dlopen in -lc" >&5
ac_lib_var=`echo c'_'dlopen | sed 'y%./+-%__p_%'`

xe_check_libs=" -lc "
cat > conftest.$ac_ext <<EOF
#line 11549 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dlopen();

int main() {
dlopen()
; return 0; }
EOF
if { (eval echo configure:11560: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_DLOPEN
EOF
cat >> confdefs.h <<\EOF
#define HAVE_DLOPEN 1
EOF
}
 DLL_LIB=;   with_shlib=yes
else
  echo "$ac_t""no" 1>&6
fi

 }
test -z "$with_shlib" && { 
echo $ac_n "checking for shl_load in -ldld""... $ac_c" 1>&6
echo "configure:11589: checking for shl_load in -ldld" >&5
ac_lib_var=`echo dld'_'shl_load | sed 'y%./+-%__p_%'`

xe_check_libs=" -ldld "
cat > conftest.$ac_ext <<EOF
#line 11594 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char shl_load();

int main() {
shl_load()
; return 0; }
EOF
if { (eval echo configure:11605: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_SHL_LOAD
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SHL_LOAD 1
EOF
}
 DLL_LIB=dld; with_shlib=yes
else
  echo "$ac_t""no" 1>&6
fi

 }
test -z "$with_shlib" && { 
echo $ac_n "checking for dld_init in -ldld""... $ac_c" 1>&6
echo "configure:11634: checking for dld_init in -ldld" >&5
ac_lib_var=`echo dld'_'dld_init | sed 'y%./+-%__p_%'`

xe_check_libs=" -ldld "
cat > conftest.$ac_ext <<EOF
#line 11639 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dld_init();

int main() {
dld_init()
; return 0; }
EOF
if { (eval echo configure:11650: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_DLD_INIT
EOF
cat >> confdefs.h <<\EOF
#define HAVE_DLD_INIT 1
EOF
}
 DLL_LIB=dld; with_shlib=yes
else
  echo "$ac_t""no" 1>&6
fi

 }
if test "$with_shlib" = "yes"; then
  
dll_ld=
dll_ldflags=
dll_cflags=
dll_post=
dll_ldo="-o"
ld_dynamic_link_flags=
xehost=$canonical
xealias=$internal_configuration

echo "checking how to build dynamic libraries for ${xehost}" 1>&6
echo "configure:11689: checking how to build dynamic libraries for ${xehost}" >&5
# Transform *-*-linux* to *-*-linux-gnu*, to support old configure scripts.
case "$xehost" in
*-*-linux-gnu*) ;;
*-*-linux*) xehost=`echo $xehost | sed 's/^\(.*-.*-linux\)\(.*\)$/\1-gnu\2/'`
esac

xehost_cpu=`echo $xehost | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
xehost_vendor=`echo $xehost | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
xehost_os=`echo $xehost | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`

case "$xehost_os" in
aix3*)
  # AIX sometimes has problems with the GCC collect2 program.  For some
  # reason, if we set the COLLECT_NAMES environment variable, the problems
  # vanish in a puff of smoke.
  if test "${COLLECT_NAMES+set}" != set; then
    COLLECT_NAMES=
    export COLLECT_NAMES
  fi
  ;;
esac

# Now see if the compiler is really GCC.
if test "$GCC" = "yes"; then
  XEGCC=yes
else
  echo $ac_n "checking checking whether we are using GNU C""... $ac_c" 1>&6
echo "configure:11717: checking checking whether we are using GNU C" >&5
  cat > conftest.$ac_ext <<EOF
#line 11719 "configure"
#include "confdefs.h"

#ifdef __GNUC__
  yes;
#endif

EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  XEGCC=yes
else
  rm -rf conftest*
  XEGCC=no
fi
rm -f conftest*

  echo "$ac_t""${XEGCC}" 1>&6
fi

echo $ac_n "checking how to produce PIC code""... $ac_c" 1>&6
echo "configure:11741: checking how to produce PIC code" >&5
wl=

can_build_shared=yes
if test "$XEGCC" = yes; then
  wl='-Wl,'

  case "$xehost_os" in
  aix3* | aix4* | irix5* | irix6* | osf3* | osf4*)
    # PIC is the default for these OSes.
    ;;

  os2*)
    # We can build DLLs from non-PIC.
    ;;
  amigaos*)
    # FIXME: we need at least 68020 code to build shared libraries, but
    # adding the `-m68020' flag to GCC prevents building anything better,
    # like `-m68040'.
    dll_cflags='-m68020 -resident32 -malways-restore-a4'
    ;;
  *)
    dll_cflags='-fPIC'
    ;;
  esac
else
  # PORTME Check for PIC flags for the system compiler.
  case "$xehost_os" in
  hpux9* | hpux10*)
    # Is there a better link_static_flag that works with the bundled CC?
    wl='-Wl,'
    dll_cflags='+Z'
    ;;

  irix5* | irix6*)
    wl='-Wl,'
    # PIC (with -KPIC) is the default.
    ;;

  os2*)
    # We can build DLLs from non-PIC.
    ;;

  osf3* | osf4*)
    # All OSF/1 code is PIC.
    wl='-Wl,'
    ;;

  sco3.2v5*)
    dll_cflags='-belf -Kpic'
    wl='-Wl,'
    ;;

  unixware*)
    dll_cflags="-KPIC"
    wl="-Wl,"
    ;;

  sysv4*)
    dll_cflags="-KPIC"
    wl="-Wl,"
    ;;

  sysv5*)
    dll_cflags="-KPIC"
    wl="-Wl,"
    ;;

  solaris2*)
    dll_cflags='-KPIC'
    wl='-Wl,'
    ;;

  sunos4*)
    dll_cflags='-PIC'
    wl='-Qoption ld '
    ;;

  uts4*)
    dll_cflags='-pic'
    ;;

  *)
    can_build_shared=no
    ;;
  esac
fi

if test -n "$dll_cflags"; then
  echo "$ac_t""${dll_cflags}" 1>&6
  
  # Check to make sure the dll_cflags actually works.
  echo $ac_n "checking if PIC flag ${dll_cflags} really works""... $ac_c" 1>&6
echo "configure:11834: checking if PIC flag ${dll_cflags} really works" >&5
  save_CFLAGS="$CFLAGS"
  CFLAGS="$CFLAGS $dll_cflags -DPIC"
  cat > conftest.$ac_ext <<EOF
#line 11838 "configure"
#include "confdefs.h"

int main() {
int x=0;
; return 0; }
EOF
if { (eval echo configure:11845: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
    # On HP-UX, the stripped-down bundled CC doesn't accept +Z, but also
    # reports no error.  So, we need to grep stderr for (Bundled).
    if grep '(Bundled)' config.log >/dev/null; then
      echo "$ac_t""no" 1>&6
      can_build_shared=no
      dll_cflags=
    else
      echo "$ac_t""yes" 1>&6
    fi
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
    can_build_shared=no
    dll_cflags=
fi
rm -f conftest*
  CFLAGS="$save_CFLAGS"
else
  echo "$ac_t""none" 1>&6
fi

if test "$can_build_shared" = "yes"; then
cc_produces_so=no
xldf=
xcldf=
echo $ac_n "checking if C compiler can produce shared libraries""... $ac_c" 1>&6
echo "configure:11876: checking if C compiler can produce shared libraries" >&5
if test "$XEGCC" = yes; then
  xcldf="-shared"
  xldf="-shared"
else # Not using GCC
  case "$xehost_os" in
    aix3* | aix4*)
      xldf="-bE:ELLSONAME.exp -H512 -T512 -bhalt:4 -bM:SRE -bnoentry -lc"
      xcldf="${wl}-bE:ELLSONAME.exp ${wl}-H512 ${wl}-T512 ${wl}-bhalt:4 ${wl}-bM:SRE ${wl}-bnoentry ${wl}-lc"
      ;;

    freebsd2* | netbsd* | openbsd*)
      xldf="-Bshareable"
      xcldf="${wl}-Bshareable"
      ;;

    freebsd3*)
      xcldf="-shared"
      ;;

    hpux*)
      xldf="-b +s"
      xcldf="${wl}-b ${wl}+s"
      ;;

    irix5* | irix6* | osf3* | osf4*)
      xcldf="${wl}-shared"
      xldf="-shared"
      ;;

    sco3.2v5* | unixware* | sysv5* | sysv4* | solaris2* | solaris7* | uts4*)
      xcldf="-G"
      xldf="-G"
      ;;

    sunos4*)
      xcldf="${wl}-assert ${wl}pure-text ${wl}-Bstatic"
      xldf="-assert pure-text -Bstatic"
      ;;
  esac
fi # End if if we are using gcc

if test -n "$xcldf"; then
  save_LDFLAGS=$LDFLAGS
  save_LIBS=$LIBS
  save_xe_libs=$xe_libs
  LDFLAGS="$xcldf $LDFLAGS"
  LIBS=
  xe_libs=
  ac_link='${CC-cc} -o conftest $CFLAGS '"$xe_cppflags $xe_ldflags"' conftest.$ac_ext '"$xe_libs"' 1>&5'
  cat > conftest.$ac_ext <<EOF
#line 11927 "configure"
#include "confdefs.h"

int main() {
int x=0;
; return 0; }
EOF
if { (eval echo configure:11934: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  cc_produces_so=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  cc_produces_so=no
fi
rm -f conftest*
  LDFLAGS=$save_LDFLAGS
  LIBS=$save_LIBS
  xe_libs=$save_xe_libs
  ac_link='${CC-cc} -o conftest $CFLAGS '"$xe_cppflags $xe_ldflags"' conftest.$ac_ext '"$xe_libs"' 1>&5'
else
  cc_produces_so=no
fi
echo "$ac_t""${cc_produces_so}" 1>&6

LTLD=$LD
if test -z "$LTLD"; then
  ac_prog=ld
  if test "$XEGCC" = yes; then
    # Check if gcc -print-prog-name=ld gives a path.
    echo $ac_n "checking for ld used by GCC""... $ac_c" 1>&6
echo "configure:11959: checking for ld used by GCC" >&5
    ac_prog=`($CC -print-prog-name=ld) 2>&5`
    case "$ac_prog" in
    # Accept absolute paths.
    /*)
      if test -z "$LTLD"; then
        case "$ac_prog" in
          *gcc-lib*) LTLD="$CC"
                     ;;
          *)         LTLD="$ac_prog"
                     ;;
        esac
      fi
      ;;
    "")
      # If it fails, then pretend we aren't using GCC.
      ac_prog=ld
      ;;
    *)
      # If it is relative, then search for the first ld in PATH.
      with_gnu_ld=unknown
      ;;
    esac
  else
    echo $ac_n "checking for GNU ld""... $ac_c" 1>&6
echo "configure:11984: checking for GNU ld" >&5
  fi

  if test -z "$LTLD"; then
    IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
    for ac_dir in $PATH; do
      test -z "$ac_dir" && ac_dir=.
      if test -f "$ac_dir/$ac_prog"; then
        LTLD="$ac_dir/$ac_prog"
        # Check to see if the program is GNU ld.  I'd rather use --version,
        # but apparently some GNU ld's only accept -v.
        # Break only if it was the GNU/non-GNU ld that we prefer.
        if "$LTLD" -v 2>&1 < /dev/null | egrep '(GNU|with BFD)' > /dev/null; then
          xe_gnu_ld=yes
        else
          xe_gnu_ld=no
        fi
      fi
    done
    IFS="$ac_save_ifs"
  fi

  if test -n "$LTLD"; then
    echo "$ac_t""${LTLD}" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

  if test -z "$LTLD" -a "$cc_produces_so" = no; then
    { echo "configure: error: no acceptable linker found in \$PATH" 1>&2; exit 1; }
    exit 1
  fi
fi

ld_dynamic_link_flags=

# Check to see if it really is or isn't GNU ld.
echo $ac_n "checking if the linker is GNU ld""... $ac_c" 1>&6
echo "configure:12022: checking if the linker is GNU ld" >&5
# I'd rather use --version here, but apparently some GNU ld's only accept -v.
if $LTLD -v 2>&1 </dev/null | egrep '(GNU|with BFD)' 1>&5; then
  xe_gnu_ld=yes
else
  xe_gnu_ld=no
fi
echo "$ac_t""${xe_gnu_ld}" 1>&6

case "$xehost_os" in
  amigaos* | sunos4*)
    # On these operating systems, we should treat GNU ld like the system ld.
    gnu_ld_acts_native=yes
    ;;
  *)
    gnu_ld_acts_native=no
    ;;
esac

if test "$cc_produces_so" = "yes"; then
  dll_ld=$CC
  dll_ldflags=$xcldf
  can_build_shared=yes
else
  # OK - only NOW do we futz about with ld.
  # See if the linker supports building shared libraries.
  echo $ac_n "checking whether the linker supports shared libraries""... $ac_c" 1>&6
echo "configure:12049: checking whether the linker supports shared libraries" >&5
  dll_ld=$CC
  dll_ldflags=$LDFLAGS
  ld_shlibs=yes
  can_build_shared=yes
  if test "$xe_gnu_ld" = yes && test "$gnu_ld_acts_native" != yes; then
    # See if GNU ld supports shared libraries.
    if $LTLD --help 2>&1 | egrep ': supported targets:.* elf' > /dev/null; then
      dll_ld=$CC
      dll_ldflags="-shared"
      ld_shlibs=yes
    else
      ld_shlibs=no
    fi
  else
    # PORTME fill in a description of your system's linker (not GNU ld)
    case "$xehost_os" in
    aix3*)
      dll_ld=$LTLD
      dll_ldflags=$xldf
      ;;

    aix4*)
      dll_ldflags=$xcldf
      ;;

    # FreeBSD 2.2.[012] allows us to include c++rt0.o to get C++ constructor
    # support.  Future versions do this automatically, but an explicit c++rt0.o
    # doesn't break anything, and helps significantly (at the cost of a little
    # extra space).
    freebsd2.2*)
      dll_ld=$LTLD
      dll_ldflags=$xldf
      dll_post="/usr/lib/c++rt0.o"
      ;;

    # Unfortunately, older versions of FreeBSD 2 don't have this feature.
    freebsd2*)
      dll_ld=$LTLD
      dll_ldflags="-Bshareable"
      ;;

    # FreeBSD 3, at last, uses gcc -shared to do shared libraries.
    freebsd3*)
      dll_ldflags="-shared"
      ;;

    hpux*)
      dll_ld=$LTLD
      dll_ldflags=$xldf
      ;;

    irix5* | irix6*)
      dll_ld=$LTLD
      dll_ldflags=$xldf
      ;;

    netbsd*)
      # Tested with NetBSD 1.2 ld
      dll_ld=$LTLD
      dll_ldflags=$xldf
      ;;

    openbsd*)
      dll_ld=$LTLD
      dll_ldflags=$xldf
      ;;

    osf3* | osf4*)
      dll_ld=$LTLD
      dll_ldflags=$xldf
      ;;

    # For both SCO and Solaris we MAY want to have LDFLAGS include -z text
    sco3.2v5* | unixware* | sysv5* | sysv4* | solaris2* | solaris7*)
      dll_ld=$LTLD
      case "$dll_ld" in
        *gcc*) dll_ldflags="-shared"
               dll_ld=$CC
               ;;
        *)     dll_ldflags="-G"
               ;;
      esac
      ;;

    sunos4*)
      if test "$XEGCC" = yes; then
        dll_ld=$CC
      else
        dll_ld=$LTLD
      fi
      dll_ldflags=$xldf
      ;;

    uts4*)
      dll_ld=$LTLD
      dll_ldflags="-G"
      ;;

    bsdi*)
      dll_ldflags="-r"
      dll_ld="shlicc2"
      ;;

    *)
      ld_shlibs=no
      can_build_shared=no
      ;;
    esac
  fi
  echo "$ac_t""${ld_shlibs}" 1>&6
  if test "$ld_shlibs" = "no"; then
    can_build_shared=no
  fi
fi # End of if cc_produces_so = no


if test "$xe_gnu_ld" = yes; then
  if test "$ld_shlibs" = yes; then
    ld_dynamic_link_flags="${wl}-export-dynamic"
  fi
fi

if test -z "$ld_dynamic_link_flags"; then
  case "$xehost_os" in
  aix3*)
    ld_dynamic_link_flags=
    ;;

  aix4*)
    ld_dynamic_link_flags=
    ;;

  freebsd2.2*)
    ld_dynamic_link_flags=
    ;;

  freebsd2*)
    ld_dynamic_link_flags=
    ;;

  freebsd3*)
    ld_dynamic_link_flags=
    ;;

  hpux*)
    ld_dynamic_link_flags="${wl}-E"
    ;;

  irix5* | irix6*)
    ld_dynamic_link_flags=
    ;;

  netbsd*)
    ld_dynamic_link_flags=
    ;;

  openbsd*)
    ld_dynamic_link_flags=
    ;;

  osf3* | osf4*)
    ld_dynamic_link_flags=
    ;;

  sco3.2v5* | unixware* | sysv5* | sysv4* | solaris2* | solaris7*)
    ld_dynamic_link_flags="${wl}-Bexport"
    ;;

  sunos4*)
    ld_dynamic_link_flags=
    ;;

  uts4*)
    ld_dynamic_link_flags=
    ;;

  bsdi*)
    ld_dynamic_link_flags=
    ;;

  esac
fi # End of if -z ld_dynamic_link_flags
fi # End of if test "$can_build_shared" = "yes"








  if test "$can_build_shared" = "yes"; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_SHLIB
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SHLIB 1
EOF
}

    extra_objs="$extra_objs sysdll.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"sysdll.o\""
 fi
    extra_objs="$extra_objs emodules.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"emodules.o\""
 fi
    INSTALL_ARCH_DEP_SUBDIR="$INSTALL_ARCH_DEP_SUBDIR src" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"src\" to \$INSTALL_ARCH_DEP_SUBDIR"; fi
    test ! -z "$DLL_LIB" && LIBS="-l${DLL_LIB} $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-l${DLL_LIB}\" to \$LIBS"; fi
    for ac_func in dlerror _dlerror
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:12261: checking for $ac_func" >&5

cat > conftest.$ac_ext <<EOF
#line 12264 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:12287: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_func
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done

  else
    echo "configure: warning: disabling shared library support" 1>&2
    with_shlib=no
  fi
fi

cat > conftest.$ac_ext <<EOF
#line 12321 "configure"
#include "confdefs.h"
int main(int c,char *v[]){return 0;}
EOF
if { (eval echo configure:12325: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  :
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  echo ""
  echo "*** PANIC *** The C compiler can no longer build working executables."
  echo "*** PANIC *** Please examine the tail of config.log for runtime errors."
  echo "*** PANIC *** The most likely reason for this problem is that configure"
  echo "*** PANIC *** links with shared libraries, but those libraries cannot be"
  echo "*** PANIC *** found at run time."
  echo "*** PANIC ***"
  echo "*** PANIC *** On a Linux system, edit /etc/ld.so.conf and re-run ldconfig."
  echo "*** PANIC *** On other systems, try telling configure where to find the"
  echo "*** PANIC *** shared libraries using the --site-runtime-libraries option"
  echo "*** PANIC ***"
  echo "*** PANIC *** Another way to shoot yourself in the foot is to specify"
  echo "*** PANIC *** --with-FEATURE when FEATURE is not actually installed"
  echo "*** PANIC *** on your system.  Don't do that."
  exit 1
fi
rm -fr conftest*


{ test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_UNIX_PROCESSES
EOF
cat >> confdefs.h <<\EOF
#define HAVE_UNIX_PROCESSES 1
EOF
}

extra_objs="$extra_objs process-unix.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"process-unix.o\""
 fi



T=""
for W in $CFLAGS; do if test -z "$T"; then T="$W"; else T="$T $W"; fi; done
CFLAGS="$T"


T=""
for W in $extra_objs; do if test -z "$T"; then T="$W"; else T="$T $W"; fi; done
extra_objs="$T"


T=""
for W in -DHAVE_CONFIG_H $c_switch_site $c_switch_machine $c_switch_system; do if test -z "$T"; then T="$W"; else T="$T $W"; fi; done
c_switch_general="$T"


T=""
for W in $c_switch_x_site $X_CFLAGS; do if test -z "$T"; then T="$W"; else T="$T $W"; fi; done
c_switch_window_system="$T"


T=""
for W in $c_switch_general $c_switch_window_system; do if test -z "$T"; then T="$W"; else T="$T $W"; fi; done
c_switch_all="$T"


T=""
for W in $ld_switch_site $ld_switch_machine $ld_switch_system $ld_switch_run; do if test -z "$T"; then T="$W"; else T="$T $W"; fi; done
ld_switch_general="$T"


T=""
for W in $ld_switch_x_site; do if test -z "$T"; then T="$W"; else T="$T $W"; fi; done
ld_switch_window_system="$T"


T=""
for W in $ld_switch_general $ld_switch_window_system; do if test -z "$T"; then T="$W"; else T="$T $W"; fi; done
ld_switch_all="$T"


T=""
for W in $LIBS $libs_machine $libs_system $libs_standard; do if test -z "$T"; then T="$W"; else T="$T $W"; fi; done
ld_libs_general="$T"


T=""
for W in $X_EXTRA_LIBS $libs_x $X_PRE_LIBS; do if test -z "$T"; then T="$W"; else T="$T $W"; fi; done
ld_libs_window_system="$T"


T=""
for W in $ld_libs_window_system $ld_libs_general; do if test -z "$T"; then T="$W"; else T="$T $W"; fi; done
ld_libs_all="$T"



MAKE_SUBDIR="$MAKE_SUBDIR src" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"src\" to \$MAKE_SUBDIR"; fi
internal_makefile_list="Makefile.in"
SUBDIR_MAKEFILES=''
test -d lock || mkdir lock
for dir in $MAKE_SUBDIR; do
  case "$dir" in */* )     ( for d in `echo $dir | sed 's:/: :g'` ; do
        test -d "$d" || mkdir "$d"; cd "$d"
      done ) ;;
   * ) test -d "$dir" || mkdir "$dir" ;;
  esac
  
T=""
for W in $SUBDIR_MAKEFILES $dir/Makefile $dir/GNUmakefile; do if test -z "$T"; then T="$W"; else T="$T $W"; fi; done
SUBDIR_MAKEFILES="$T"

  
T=""
for W in $internal_makefile_list $dir/Makefile.in; do if test -z "$T"; then T="$W"; else T="$T $W"; fi; done
internal_makefile_list="$T"

done




for dir in src/s src/m; do
  if test ! -d "$dir" ; then
    echo Making symbolic link to "$srcdir/$dir"
    ${LN_S} "$srcdir/$dir" "$dir"
  fi
done

if test "$extra_verbose" = "yes"; then
  echo ""
  for var in extra_objs    c_switch_general  c_switch_window_system  c_switch_all   ld_switch_general ld_switch_window_system ld_switch_all     ld_libs_general   ld_libs_window_system   ld_libs_all; do eval "echo \"$var = '\$$var'\""; done
  echo ""
fi

if test -f $srcdir/src/gdbinit -a ! -f src/gdbinit ; then
  echo "creating src/gdbinit"; echo ""
  echo "source $srcdir/src/gdbinit" > src/gdbinit
fi

if test "$__SUNPRO_C" = "yes"; then
  echo "creating .sbinit"; echo ""
  ( echo "# For use with Sun WorkShop's Source browser."
    echo "# See sbquery(1) and sbinit(4) for more information"
    for dir in $MAKE_SUBDIR; do echo "import $dir"; done
  ) > .sbinit
fi

rm -f core
















PREFIX=$prefix
while true; do
  case "$PREFIX" in
    *\$* ) eval "PREFIX=$PREFIX" ;;
    *) break ;;
  esac
done



EXEC_PREFIX=$exec_prefix
while true; do
  case "$EXEC_PREFIX" in
    *\$* ) eval "EXEC_PREFIX=$EXEC_PREFIX" ;;
    *) break ;;
  esac
done




INFODIR=$infodir
while true; do
  case "$INFODIR" in
    *\$* ) eval "INFODIR=$INFODIR" ;;
    *) break ;;
  esac
done




INFOPATH=$infopath
while true; do
  case "$INFOPATH" in
    *\$* ) eval "INFOPATH=$INFOPATH" ;;
    *) break ;;
  esac
done




PACKAGE_PATH=$package_path
while true; do
  case "$PACKAGE_PATH" in
    *\$* ) eval "PACKAGE_PATH=$PACKAGE_PATH" ;;
    *) break ;;
  esac
done




LISPDIR=$lispdir
while true; do
  case "$LISPDIR" in
    *\$* ) eval "LISPDIR=$LISPDIR" ;;
    *) break ;;
  esac
done




MODULEDIR=$moduledir
while true; do
  case "$MODULEDIR" in
    *\$* ) eval "MODULEDIR=$MODULEDIR" ;;
    *) break ;;
  esac
done




SITELISPDIR=$sitelispdir
while true; do
  case "$SITELISPDIR" in
    *\$* ) eval "SITELISPDIR=$SITELISPDIR" ;;
    *) break ;;
  esac
done




SITEMODULEDIR=$sitemoduledir
while true; do
  case "$SITEMODULEDIR" in
    *\$* ) eval "SITEMODULEDIR=$SITEMODULEDIR" ;;
    *) break ;;
  esac
done




ETCDIR=$etcdir
while true; do
  case "$ETCDIR" in
    *\$* ) eval "ETCDIR=$ETCDIR" ;;
    *) break ;;
  esac
done




LOCKDIR=$lockdir
while true; do
  case "$LOCKDIR" in
    *\$* ) eval "LOCKDIR=$LOCKDIR" ;;
    *) break ;;
  esac
done




ARCHLIBDIR=$archlibdir
while true; do
  case "$ARCHLIBDIR" in
    *\$* ) eval "ARCHLIBDIR=$ARCHLIBDIR" ;;
    *) break ;;
  esac
done




















RECURSIVE_MAKE="\$(MAKE) \$(MFLAGS) CC='\$(CC)' CFLAGS='\$(CFLAGS)' LDFLAGS='\$(LDFLAGS)' CPPFLAGS='\$(CPPFLAGS)'"







: ${XEMACS_CC:=$CC}



if test "$with_site_lisp" = "no"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining INHIBIT_SITE_LISP
EOF
cat >> confdefs.h <<\EOF
#define INHIBIT_SITE_LISP 1
EOF
}

fi
if test "$with_site_modules" = "no"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining INHIBIT_SITE_MODULES
EOF
cat >> confdefs.h <<\EOF
#define INHIBIT_SITE_MODULES 1
EOF
}

fi


T=""
for W in $ac_configure_args; do if test -z "$T"; then T="$W"; else T="$T $W"; fi; done
ac_configure_args="$T"

{ test "$extra_verbose" = "yes" && cat << EOF
    Defining EMACS_CONFIGURATION = "$canonical"
EOF
cat >> confdefs.h <<EOF
#define EMACS_CONFIGURATION "$canonical"
EOF
}

{ test "$extra_verbose" = "yes" && cat << EOF
    Defining EMACS_CONFIG_OPTIONS = "$ac_configure_args"
EOF
cat >> confdefs.h <<EOF
#define EMACS_CONFIG_OPTIONS "$ac_configure_args"
EOF
}

{ test "$extra_verbose" = "yes" && cat << EOF
    Defining config_machfile = "$machfile"
EOF
cat >> confdefs.h <<EOF
#define config_machfile "$machfile"
EOF
}

{ test "$extra_verbose" = "yes" && cat << EOF
    Defining config_opsysfile = "$opsysfile"
EOF
cat >> confdefs.h <<EOF
#define config_opsysfile "$opsysfile"
EOF
}



null_string=""
{ test "$extra_verbose" = "yes" && cat << EOF
    Defining LD_SWITCH_X_SITE = $null_string
EOF
cat >> confdefs.h <<EOF
#define LD_SWITCH_X_SITE $null_string
EOF
}

{ test "$extra_verbose" = "yes" && cat << EOF
    Defining LD_SWITCH_X_SITE_AUX = $null_string
EOF
cat >> confdefs.h <<EOF
#define LD_SWITCH_X_SITE_AUX $null_string
EOF
}

{ test "$extra_verbose" = "yes" && cat << EOF
    Defining C_SWITCH_X_SITE = $null_string
EOF
cat >> confdefs.h <<EOF
#define C_SWITCH_X_SITE $null_string
EOF
}

{ test "$extra_verbose" = "yes" && cat << EOF
    Defining LD_SWITCH_SITE = $null_string
EOF
cat >> confdefs.h <<EOF
#define LD_SWITCH_SITE $null_string
EOF
}

{ test "$extra_verbose" = "yes" && cat << EOF
    Defining C_SWITCH_SITE = $null_string
EOF
cat >> confdefs.h <<EOF
#define C_SWITCH_SITE $null_string
EOF
}



test -n "$puresize" && { test "$extra_verbose" = "yes" && cat << EOF
    Defining RAW_PURESIZE = $puresize
EOF
cat >> confdefs.h <<EOF
#define RAW_PURESIZE $puresize
EOF
}


if   test "$GNU_MALLOC"         = "yes"; then { test "$extra_verbose" = "yes" && cat << \EOF
    Defining GNU_MALLOC
EOF
cat >> confdefs.h <<\EOF
#define GNU_MALLOC 1
EOF
}

elif test "$with_system_malloc" = "yes"; then { test "$extra_verbose" = "yes" && cat << \EOF
    Defining USE_SYSTEM_MALLOC
EOF
cat >> confdefs.h <<\EOF
#define USE_SYSTEM_MALLOC 1
EOF
}

elif test "$with_debug_malloc"  = "yes"; then { test "$extra_verbose" = "yes" && cat << \EOF
    Defining USE_DEBUG_MALLOC
EOF
cat >> confdefs.h <<\EOF
#define USE_DEBUG_MALLOC 1
EOF
}

					      { test "$extra_verbose" = "yes" && cat << \EOF
    Defining USE_SYSTEM_MALLOC
EOF
cat >> confdefs.h <<\EOF
#define USE_SYSTEM_MALLOC 1
EOF
}

fi
test "$with_i18n3"         = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining I18N3
EOF
cat >> confdefs.h <<\EOF
#define I18N3 1
EOF
}

test "$GCC"                = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining USE_GCC
EOF
cat >> confdefs.h <<\EOF
#define USE_GCC 1
EOF
}

test "$external_widget"    = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining EXTERNAL_WIDGET
EOF
cat >> confdefs.h <<\EOF
#define EXTERNAL_WIDGET 1
EOF
}

test "$no_doc_file"        = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining NO_DOC_FILE
EOF
cat >> confdefs.h <<\EOF
#define NO_DOC_FILE 1
EOF
}

test "$with_purify"        = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining PURIFY
EOF
cat >> confdefs.h <<\EOF
#define PURIFY 1
EOF
}

test "$with_quantify"      = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining QUANTIFY
EOF
cat >> confdefs.h <<\EOF
#define QUANTIFY 1
EOF
}

test "$with_pop"           = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining MAIL_USE_POP
EOF
cat >> confdefs.h <<\EOF
#define MAIL_USE_POP 1
EOF
}

test "$with_kerberos"      = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining KERBEROS
EOF
cat >> confdefs.h <<\EOF
#define KERBEROS 1
EOF
}

test "$with_hesiod"        = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HESIOD
EOF
cat >> confdefs.h <<\EOF
#define HESIOD 1
EOF
}

test "$use_union_type"     = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining USE_UNION_TYPE
EOF
cat >> confdefs.h <<\EOF
#define USE_UNION_TYPE 1
EOF
}



(
if test -f /etc/osversion; then   echo "osversion: `cat /etc/osversion`"
else
  echo "uname -a: `uname -a`"
fi
echo ""
echo "$0 $quoted_arguments"
) > Installation

xemacs_betaname=""
test ! -z "${emacs_beta_version}" && xemacs_betaname="-b${emacs_beta_version}"

(
echo "

XEmacs ${emacs_major_version}.${emacs_minor_version}${xemacs_betaname} \"$xemacs_codename\" configured for \`$canonical'.

  Where should the build process find the source code?    $srcdir
  What installation prefix should install use?		  $prefix
  What operating system and machine description files should XEmacs use?
        \`$opsysfile' and \`$machfile'
  What compiler should XEmacs be built with?              $CC $CFLAGS
  Should XEmacs use the GNU version of malloc?            ${GNU_MALLOC}${GNU_MALLOC_reason}
  Should XEmacs use the relocating allocator for buffers? $rel_alloc
  What window system should XEmacs use?                   ${window_system}"
if test "$with_x11" = "yes"; then
  echo "  Where do we find X Windows header files?                $x_includes"
  echo "  Where do we find X Windows libraries?                   $x_libraries"
fi
if test -n "$site_includes"; then
  echo "  Additional header files:                                $site_includes"
fi
if test -n "$site_libraries"; then
  echo "  Additional libraries:                                   $site_libraries"
fi
if test -n "$site_prefixes"; then
  echo "  Additional prefixes:                                    $site_prefixes"
fi
if test -n "$runpath"; then
  echo "  Runtime library search path:                            $runpath"
fi
test "$with_dnet"  = yes && echo "  Compiling in support for DNET."
test "$with_socks" = yes && echo "  Compiling in support for SOCKS."
test "$with_xauth" = yes && echo "  Compiling in support for XAUTH."
if test "$with_xmu" != yes -a "$with_x11" = yes; then
  echo "  No Xmu; substituting equivalent routines."
fi

if test "$with_xpm" = yes; then
  echo "  Compiling in support for XPM images."
elif test "$with_x11" = yes; then
  echo "  --------------------------------------------------------------------"
  echo "  WARNING: Compiling without XPM support."
  if test "$xpm_problem" != ""; then
    echo "  Reason: $xpm_problem"
  fi
  echo "  WARNING: You should strongly consider installing XPM."
  echo "  WARNING: Otherwise toolbars and other graphics will look suboptimal."
  echo "  WARNING: (a copy may be found in ftp://ftp.xemacs.org/pub/xemacs/aux)"
  echo "  --------------------------------------------------------------------"
fi
if test "$with_png" = yes; then
  echo "  Compiling in support for PNG image handling."
elif test "$window_system" != "none"; then
  echo "  --------------------------------------------------------------------"
  echo "  WARNING: Compiling without PNG image support."
  if test "$png_problem" != ""; then
    echo "  Reason: $png_problem"
  fi
  echo "  WARNING: You should strongly consider installing the PNG libraries."
  echo "  WARNING: Otherwise certain images and glyphs may not display."
  echo "  WARNING: (a copy may be found in ftp://ftp.xemacs.org/pub/xemacs/aux)"
  echo "  --------------------------------------------------------------------"
fi
test "$with_gif"   = yes && echo "  Compiling in support for (builtin) GIF image handling."
test "$with_jpeg"  = yes && echo "  Compiling in support for JPEG image handling."
test "$with_tiff"  = yes && echo "  Compiling in support for TIFF image handling."
test "$with_xface" = yes && echo "  Compiling in support for X-Face message headers."
case "$with_sound" in
  nas    ) echo "  Compiling in network sound (NAS) support." ;;
  native ) echo "  Compiling in native sound support." ;;
  both   ) echo "  Compiling in both network and native sound support." ;;
esac
test "$old_nas" = yes && echo "        nas library lacks error trapping, will play synchronously."

test "$with_database_berkdb" = yes && echo "  Compiling in support for Berkeley DB."
test "$with_database_dbm"    = yes && echo "  Compiling in support for DBM."
test "$with_database_gnudbm" = yes && echo "  Compiling in support for GNU DBM."

test "$with_umich_ldap"	     = yes && echo "  Compiling in support for LDAP (UMich libs)."
test "$with_ns_ldap"	     = yes && echo "  Compiling in support for LDAP (Netscape SDK)."
test "$with_ldap" = yes -a "$with_umich_ldap" = no -a "$with_ns_ldap" = no && echo "  Compiling in support for LDAP (Generic)."

test "$with_ncurses"  = yes && echo "  Compiling in support for ncurses."
test "$with_gpm"      = yes && echo "  Compiling in support for GPM (General Purpose Mouse)."

test "$with_mule"     = yes && echo "  Compiling in Mule (multi-lingual) support."
test "$with_file_coding"     = yes && echo "  Compiling in File coding support."
test "$with_xim"      != no && echo "  Compiling in XIM (X11R5+ I18N input method) support."
test "$with_xim" = motif    && echo "    Using Motif to provide XIM support."
test "$with_xim" = xlib     && echo "    Using raw Xlib to provide XIM support."
test "$with_xfs" = yes      && echo "    Using XFontSet to provide bilingual menubar."
test "$with_canna"    = yes && echo "  Compiling in support for Canna on Mule."
if test "$with_wnn" = yes; then
  echo "  Compiling in support for the WNN input method on Mule."
  test "$with_wnn6" = yes && echo "    Using WNN version 6."
fi
test "$with_i18n3"    = yes && echo "  Compiling in I18N support, level 3 (doesn't currently work)."

test "$with_cde"      = yes && echo "  Compiling in support for CDE."
test "$with_tooltalk" = yes && echo "  Compiling in support for ToolTalk."
test "$with_offix"    = yes && echo "  Compiling in support for OffiX."
test "$with_dragndrop" = yes && echo "  Compiling in EXPERIMENTAL support for Drag'n'Drop ($dragndrop_proto )."
test "$with_workshop" = yes && echo "  Compiling in support for Sun WorkShop."
test "$with_session"  != no && echo "  Compiling in support for proper session-management."
case "$with_menubars" in
  lucid ) echo "  Using Lucid menubars." ;;
  motif ) echo "  Using Motif menubars."
          echo "  *WARNING*  The Motif menubar implementation is currently buggy."
          echo "             We recommend using the Lucid menubar instead."
          echo "             Re-run configure with --with-menubars='lucid'." ;;
esac
case "$with_scrollbars" in
  lucid    ) echo "  Using Lucid scrollbars."     ;;
  motif    ) echo "  Using Motif scrollbars."     ;;
  athena   ) echo "  Using Athena scrollbars."    ;;
  athena3d ) echo "  Using Athena-3d scrollbars." ;;
esac
case "$with_dialogs" in
  motif    ) echo "  Using Motif dialog boxes."     ;;
  athena   ) echo "  Using Athena dialog boxes."    ;;
  athena3d ) echo "  Using Athena-3d dialog boxes." ;;
esac
test "$with_shlib" = "yes" && echo "  Compiling in DLL support."
test "$with_clash_detection" = yes && \
  echo "  Clash detection will use \"$lockdir\" for locking files."
echo "  movemail will use \"$mail_locking\" for locking mail spool files."
test "$with_pop"	= yes && echo "  Using POP for mail access."
test "$with_kerberos"	= yes && echo "  Using Kerberos for POP authentication."
test "$with_hesiod"	= yes && echo "  Using Hesiod to get POP server host."
test "$use_union_type"  = yes && echo "  Using the union type for Lisp_Objects."
test "$use_minimal_tagbits" = yes && echo "  Using Lisp_Objects with minimal tagbits."
test "$use_indexed_lrecord_implementation" = yes && echo "  Using indexed lrecord implementation."
test "$debug"              = yes && echo "  Compiling in extra code for debugging."
test "$memory_usage_stats" = yes && echo "  Compiling in code for checking XEmacs memory usage."
test "$usage_tracking"     = yes && echo "  Compiling with usage tracking active (Sun internal)."
if test "$error_check_extents $error_check_typecheck $error_check_bufpos $error_check_gc $error_check_malloc" \
  != "no no no no no"; then
  echo "  WARNING: ---------------------------------------------------------"
  echo "  WARNING: Compiling in support for runtime error checking."
  echo "  WARNING: XEmacs will run noticeably more slowly as a result."
  echo "  WARNING: Error checking is on by default for XEmacs beta releases."
  echo "  WARNING: ---------------------------------------------------------"
fi
echo ""
) | tee -a Installation
echo ""

echo '(setq Installation-string "' > Installation.el
sed 's/"/\\"/g' Installation >> Installation.el
echo '")' >> Installation.el


# Remove any trailing slashes in these variables.
test -n "$prefix" &&
  prefix=`echo '' "$prefix" | sed -e 's:^ ::' -e 's,\([^/]\)/*$,\1,'`
test -n "$exec_prefix" &&
  exec_prefix=`echo '' "$exec_prefix" | sed -e 's:^ ::' -e 's,\([^/]\)/*$,\1,'`


for file in $internal_makefile_list; do
  test "$file" = src/Makefile.in && \
    file="src/Makefile.in:src/Makefile.in.in:src/depend"
  ac_output_files="${ac_output_files+$ac_output_files }$file"
done
ac_output_files="$ac_output_files src/paths.h lib-src/config.values"
if test "$with_shlib" = "yes"; then
  ac_output_files="$ac_output_files lib-src/ellcc.h"
fi

trap '' 1 2 15

trap 'rm -fr conftest* confdefs* core core.* *.core $ac_clean_files; exit 1' 1 2 15

test "x$prefix" = xNONE && prefix=$ac_default_prefix
# Let make expand exec_prefix.
test "x$exec_prefix" = xNONE && exec_prefix='${prefix}'

# Any assignment to VPATH causes Sun make to only execute
# the first set of double-colon rules, so remove it if not needed.
# If there is a colon in the path, we need to keep it.
if test "x$srcdir" = x.; then
  ac_vpsub='/^[ 	]*VPATH[ 	]*=[^:]*$/d'
fi

trap 'rm -f $CONFIG_STATUS conftest*; exit 1' 1 2 15

DEFS=-DHAVE_CONFIG_H

# Without the "./", some shells look in PATH for config.status.
: ${CONFIG_STATUS=./config.status}

echo creating $CONFIG_STATUS
rm -f $CONFIG_STATUS
cat > $CONFIG_STATUS <<EOF
#! /bin/sh
# Generated automatically by configure.
# Run this file to recreate the current configuration.
# This directory was configured as follows,
# on host `(hostname || uname -n) 2>/dev/null | sed 1q`:
#
# $0 $ac_configure_args
#
# Compiler output produced by configure, useful for debugging
# configure, is in ./config.log if it exists.

ac_cs_usage="Usage: $CONFIG_STATUS [--recheck] [--version] [--help]"
for ac_option
do
  case "\$ac_option" in
  -recheck | --recheck | --rechec | --reche | --rech | --rec | --re | --r)
    echo "running \${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion"
    exec \${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion ;;
  -version | --version | --versio | --versi | --vers | --ver | --ve | --v)
    echo "$CONFIG_STATUS generated by autoconf version 2.12"
    exit 0 ;;
  -help | --help | --hel | --he | --h)
    echo "\$ac_cs_usage"; exit 0 ;;
  *) echo "\$ac_cs_usage"; exit 1 ;;
  esac
done

ac_given_srcdir=$srcdir
ac_given_INSTALL="$INSTALL"

trap 'rm -fr `echo "$ac_output_files src/config.h lwlib/config.h" | sed "s/:[^ ]*//g"` conftest*; exit 1' 1 2 15
EOF
cat >> $CONFIG_STATUS <<EOF

# Protect against being on the right side of a sed subst in config.status.
sed 's/%@/@@/; s/@%/@@/; s/%g\$/@g/; /@g\$/s/[\\\\&%]/\\\\&/g;
 s/@@/%@/; s/@@/@%/; s/@g\$/%g/' > conftest.subs <<\\CEOF
$ac_vpsub
$extrasub
s%@CFLAGS@%$CFLAGS%g
s%@CPPFLAGS@%$CPPFLAGS%g
s%@CXXFLAGS@%$CXXFLAGS%g
s%@DEFS@%$DEFS%g
s%@LDFLAGS@%$LDFLAGS%g
s%@LIBS@%$LIBS%g
s%@exec_prefix@%$exec_prefix%g
s%@prefix@%$prefix%g
s%@program_transform_name@%$program_transform_name%g
s%@bindir@%$bindir%g
s%@sbindir@%$sbindir%g
s%@libexecdir@%$libexecdir%g
s%@datadir@%$datadir%g
s%@sysconfdir@%$sysconfdir%g
s%@sharedstatedir@%$sharedstatedir%g
s%@localstatedir@%$localstatedir%g
s%@libdir@%$libdir%g
s%@includedir@%$includedir%g
s%@oldincludedir@%$oldincludedir%g
s%@infodir@%$infodir%g
s%@mandir@%$mandir%g
s%@LN_S@%$LN_S%g
s%@blddir@%$blddir%g
s%@CC@%$CC%g
s%@CPP@%$CPP%g
s%@start_flags@%$start_flags%g
s%@ld_switch_shared@%$ld_switch_shared%g
s%@start_files@%$start_files%g
s%@ld@%$ld%g
s%@lib_gcc@%$lib_gcc%g
s%@RANLIB@%$RANLIB%g
s%@INSTALL_PROGRAM@%$INSTALL_PROGRAM%g
s%@INSTALL_DATA@%$INSTALL_DATA%g
s%@YACC@%$YACC%g
s%@SET_MAKE@%$SET_MAKE%g
s%@X_CFLAGS@%$X_CFLAGS%g
s%@X_PRE_LIBS@%$X_PRE_LIBS%g
s%@X_LIBS@%$X_LIBS%g
s%@X_EXTRA_LIBS@%$X_EXTRA_LIBS%g
s%@install_pp@%$install_pp%g
s%@libs_xauth@%$libs_xauth%g
s%@dnd_objs@%$dnd_objs%g
s%@lwlib_objs@%$lwlib_objs%g
s%@ALLOCA@%$ALLOCA%g
s%@dll_ld@%$dll_ld%g
s%@dll_cflags@%$dll_cflags%g
s%@dll_ldflags@%$dll_ldflags%g
s%@dll_post@%$dll_post%g
s%@dll_ldo@%$dll_ldo%g
s%@ld_dynamic_link_flags@%$ld_dynamic_link_flags%g
s%@SRC_SUBDIR_DEPS@%$SRC_SUBDIR_DEPS%g
s%@INSTALL_ARCH_DEP_SUBDIR@%$INSTALL_ARCH_DEP_SUBDIR%g
s%@MAKE_SUBDIR@%$MAKE_SUBDIR%g
s%@SUBDIR_MAKEFILES@%$SUBDIR_MAKEFILES%g
s%@PROGNAME@%$PROGNAME%g
s%@version@%$version%g
s%@configuration@%$configuration%g
s%@canonical@%$canonical%g
s%@srcdir@%$srcdir%g
s%@pkgdir@%$pkgdir%g
s%@statedir@%$statedir%g
s%@PREFIX@%$PREFIX%g
s%@EXEC_PREFIX@%$EXEC_PREFIX%g
s%@INFODIR_USER_DEFINED@%$INFODIR_USER_DEFINED%g
s%@INFODIR@%$INFODIR%g
s%@infopath@%$infopath%g
s%@INFOPATH_USER_DEFINED@%$INFOPATH_USER_DEFINED%g
s%@INFOPATH@%$INFOPATH%g
s%@package_path@%$package_path%g
s%@PACKAGE_PATH_USER_DEFINED@%$PACKAGE_PATH_USER_DEFINED%g
s%@PACKAGE_PATH@%$PACKAGE_PATH%g
s%@lispdir@%$lispdir%g
s%@LISPDIR_USER_DEFINED@%$LISPDIR_USER_DEFINED%g
s%@LISPDIR@%$LISPDIR%g
s%@moduledir@%$moduledir%g
s%@MODULEDIR_USER_DEFINED@%$MODULEDIR_USER_DEFINED%g
s%@MODULEDIR@%$MODULEDIR%g
s%@sitelispdir@%$sitelispdir%g
s%@SITELISPDIR_USER_DEFINED@%$SITELISPDIR_USER_DEFINED%g
s%@SITELISPDIR@%$SITELISPDIR%g
s%@sitemoduledir@%$sitemoduledir%g
s%@SITEMODULEDIR_USER_DEFINED@%$SITEMODULEDIR_USER_DEFINED%g
s%@SITEMODULEDIR@%$SITEMODULEDIR%g
s%@etcdir@%$etcdir%g
s%@ETCDIR_USER_DEFINED@%$ETCDIR_USER_DEFINED%g
s%@ETCDIR@%$ETCDIR%g
s%@lockdir@%$lockdir%g
s%@LOCKDIR_USER_DEFINED@%$LOCKDIR_USER_DEFINED%g
s%@LOCKDIR@%$LOCKDIR%g
s%@archlibdir@%$archlibdir%g
s%@ARCHLIBDIR_USER_DEFINED@%$ARCHLIBDIR_USER_DEFINED%g
s%@ARCHLIBDIR@%$ARCHLIBDIR%g
s%@docdir@%$docdir%g
s%@bitmapdir@%$bitmapdir%g
s%@extra_objs@%$extra_objs%g
s%@machfile@%$machfile%g
s%@opsysfile@%$opsysfile%g
s%@c_switch_general@%$c_switch_general%g
s%@c_switch_window_system@%$c_switch_window_system%g
s%@c_switch_all@%$c_switch_all%g
s%@ld_switch_general@%$ld_switch_general%g
s%@ld_switch_window_system@%$ld_switch_window_system%g
s%@ld_switch_all@%$ld_switch_all%g
s%@ld_libs_general@%$ld_libs_general%g
s%@ld_libs_window_system@%$ld_libs_window_system%g
s%@ld_libs_all@%$ld_libs_all%g
s%@RECURSIVE_MAKE@%$RECURSIVE_MAKE%g
s%@native_sound_lib@%$native_sound_lib%g
s%@sound_cflags@%$sound_cflags%g
s%@dynodump_arch@%$dynodump_arch%g
s%@XEMACS_CC@%$XEMACS_CC%g
s%@internal_makefile_list@%$internal_makefile_list%g

CEOF
EOF

cat >> $CONFIG_STATUS <<\EOF

# Split the substitutions into bite-sized pieces for seds with
# small command number limits, like on Digital OSF/1 and HP-UX.
ac_max_sed_cmds=90 # Maximum number of lines to put in a sed script.
ac_file=1 # Number of current file.
ac_beg=1 # First line for current file.
ac_end=$ac_max_sed_cmds # Line after last line for current file.
ac_more_lines=:
ac_sed_cmds=""
while $ac_more_lines; do
  if test $ac_beg -gt 1; then
    sed "1,${ac_beg}d; ${ac_end}q" conftest.subs > conftest.s$ac_file
  else
    sed "${ac_end}q" conftest.subs > conftest.s$ac_file
  fi
  if test ! -s conftest.s$ac_file; then
    ac_more_lines=false
    rm -f conftest.s$ac_file
  else
    if test -z "$ac_sed_cmds"; then
      ac_sed_cmds="sed -f conftest.s$ac_file"
    else
      ac_sed_cmds="$ac_sed_cmds | sed -f conftest.s$ac_file"
    fi
    ac_file=`expr $ac_file + 1`
    ac_beg=$ac_end
    ac_end=`expr $ac_end + $ac_max_sed_cmds`
  fi
done
if test -z "$ac_sed_cmds"; then
  ac_sed_cmds=cat
fi
EOF

cat >> $CONFIG_STATUS <<EOF

CONFIG_FILES=\${CONFIG_FILES-"$ac_output_files"}
EOF
cat >> $CONFIG_STATUS <<\EOF
for ac_file in .. $CONFIG_FILES; do if test "x$ac_file" != x..; then
  # Support "outfile[:infile[:infile...]]", defaulting infile="outfile.in".
  case "$ac_file" in
  *:*) ac_file_in=`echo "$ac_file"|sed 's%[^:]*:%%'`
       ac_file=`echo "$ac_file"|sed 's%:.*%%'` ;;
  *) ac_file_in="${ac_file}.in" ;;
  esac

  # Adjust a relative srcdir, top_srcdir, and INSTALL for subdirectories.

  # Remove last slash and all that follows it.  Not all systems have dirname.
  ac_dir=`echo $ac_file|sed 's%/[^/][^/]*$%%'`
  if test "$ac_dir" != "$ac_file" && test "$ac_dir" != .; then
    # The file is in a subdirectory.
    test ! -d "$ac_dir" && mkdir "$ac_dir"
    ac_dir_suffix="/`echo $ac_dir|sed 's%^\./%%'`"
    # A "../" for each directory in $ac_dir_suffix.
    ac_dots=`echo $ac_dir_suffix|sed 's%/[^/]*%../%g'`
  else
    ac_dir_suffix= ac_dots=
  fi

  case "$ac_given_srcdir" in
  .)  srcdir=.
      if test -z "$ac_dots"; then top_srcdir=.
      else top_srcdir=`echo $ac_dots|sed 's%/$%%'`; fi ;;
  /*) srcdir="$ac_given_srcdir$ac_dir_suffix"; top_srcdir="$ac_given_srcdir" ;;
  *) # Relative path.
    srcdir="$ac_dots$ac_given_srcdir$ac_dir_suffix"
    top_srcdir="$ac_dots$ac_given_srcdir" ;;
  esac

  case "$ac_given_INSTALL" in
  [/$]*) INSTALL="$ac_given_INSTALL" ;;
  *) INSTALL="$ac_dots$ac_given_INSTALL" ;;
  esac

  echo creating "$ac_file"
  rm -f "$ac_file"
  configure_input="Generated automatically from `echo $ac_file_in|sed 's%.*/%%'` by configure."
  case "$ac_file" in
  *Makefile*) ac_comsub="1i\\
# $configure_input" ;;
  *) ac_comsub= ;;
  esac

  ac_file_inputs=`echo $ac_file_in|sed -e "s%^%$ac_given_srcdir/%" -e "s%:% $ac_given_srcdir/%g"`
  sed -e "$ac_comsub
s%@configure_input@%$configure_input%g
s%@srcdir@%$srcdir%g
s%@top_srcdir@%$top_srcdir%g
s%@INSTALL@%$INSTALL%g
" $ac_file_inputs | (eval "$ac_sed_cmds") > $ac_file
fi; done
rm -f conftest.s*

# These sed commands are passed to sed as "A NAME B NAME C VALUE D", where
# NAME is the cpp macro being defined and VALUE is the value it is being given.
#
# ac_d sets the value in "#define NAME VALUE" lines.
ac_dA='s%^\([ 	]*\)#\([ 	]*define[ 	][ 	]*\)'
ac_dB='\([ 	][ 	]*\)[^ 	]*%\1#\2'
ac_dC='\3'
ac_dD='%g'
# ac_u turns "#undef NAME" with trailing blanks into "#define NAME VALUE".
ac_uA='s%^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
ac_uB='\([ 	]\)%\1#\2define\3'
ac_uC=' '
ac_uD='\4%g'
# ac_e turns "#undef NAME" without trailing blanks into "#define NAME VALUE".
ac_eA='s%^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
ac_eB='$%\1#\2define\3'
ac_eC=' '
ac_eD='%g'

if test "${CONFIG_HEADERS+set}" != set; then
EOF
cat >> $CONFIG_STATUS <<EOF
  CONFIG_HEADERS="src/config.h lwlib/config.h"
EOF
cat >> $CONFIG_STATUS <<\EOF
fi
for ac_file in .. $CONFIG_HEADERS; do if test "x$ac_file" != x..; then
  # Support "outfile[:infile[:infile...]]", defaulting infile="outfile.in".
  case "$ac_file" in
  *:*) ac_file_in=`echo "$ac_file"|sed 's%[^:]*:%%'`
       ac_file=`echo "$ac_file"|sed 's%:.*%%'` ;;
  *) ac_file_in="${ac_file}.in" ;;
  esac

  echo creating $ac_file

  rm -f conftest.frag conftest.in conftest.out
  ac_file_inputs=`echo $ac_file_in|sed -e "s%^%$ac_given_srcdir/%" -e "s%:% $ac_given_srcdir/%g"`
  cat $ac_file_inputs > conftest.in

EOF

# Transform confdefs.h into a sed script conftest.vals that substitutes
# the proper values into config.h.in to produce config.h.  And first:
# Protect against being on the right side of a sed subst in config.status.
# Protect against being in an unquoted here document in config.status.
rm -f conftest.vals
cat > conftest.hdr <<\EOF
s/[\\&%]/\\&/g
s%[\\$`]%\\&%g
s%#define \([A-Za-z_][A-Za-z0-9_]*\) *\(.*\)%${ac_dA}\1${ac_dB}\1${ac_dC}\2${ac_dD}%gp
s%ac_d%ac_u%gp
s%ac_u%ac_e%gp
EOF
sed -n -f conftest.hdr confdefs.h > conftest.vals
rm -f conftest.hdr

# This sed command replaces #undef with comments.  This is necessary, for
# example, in the case of _POSIX_SOURCE, which is predefined and required
# on some systems where configure will not decide to define it.
cat >> conftest.vals <<\EOF
s%^[ 	]*#[ 	]*undef[ 	][ 	]*[a-zA-Z_][a-zA-Z_0-9]*%/* & */%
EOF

# Break up conftest.vals because some shells have a limit on
# the size of here documents, and old seds have small limits too.

rm -f conftest.tail
while :
do
  ac_lines=`grep -c . conftest.vals`
  # grep -c gives empty output for an empty file on some AIX systems.
  if test -z "$ac_lines" || test "$ac_lines" -eq 0; then break; fi
  # Write a limited-size here document to conftest.frag.
  echo '  cat > conftest.frag <<CEOF' >> $CONFIG_STATUS
  sed ${ac_max_here_lines}q conftest.vals >> $CONFIG_STATUS
  echo 'CEOF
  sed -f conftest.frag conftest.in > conftest.out
  rm -f conftest.in
  mv conftest.out conftest.in
' >> $CONFIG_STATUS
  sed 1,${ac_max_here_lines}d conftest.vals > conftest.tail
  rm -f conftest.vals
  mv conftest.tail conftest.vals
done
rm -f conftest.vals

cat >> $CONFIG_STATUS <<\EOF
  rm -f conftest.frag conftest.h
  echo "/* $ac_file.  Generated automatically by configure.  */" > conftest.h
  cat conftest.in >> conftest.h
  rm -f conftest.in
  if cmp -s $ac_file conftest.h 2>/dev/null; then
    echo "$ac_file is unchanged"
    rm -f conftest.h
  else
    # Remove last slash and all that follows it.  Not all systems have dirname.
      ac_dir=`echo $ac_file|sed 's%/[^/][^/]*$%%'`
      if test "$ac_dir" != "$ac_file" && test "$ac_dir" != .; then
      # The file is in a subdirectory.
      test ! -d "$ac_dir" && mkdir "$ac_dir"
    fi
    rm -f $ac_file
    mv conftest.h $ac_file
  fi
fi; done

EOF
cat >> $CONFIG_STATUS <<EOF
CPP="$CPP"
 top_srcdir="$srcdir"
 MAKE_SUBDIR="$MAKE_SUBDIR"

EOF
cat >> $CONFIG_STATUS <<\EOF
for dir in . $MAKE_SUBDIR; do
  (
    cd $dir
    rm -f junk.c
    < Makefile.in \
      sed -e '/^# Generated/d' \
          -e 's%/\*\*/#.*%%' \
          -e 's/^ *# */#/' \
          -e '/^##/d' \
          -e '/^#/ {
p
d
}'        \
	  -e '/./ {
s/\([\"]\)/\\\1/g
s/^/"/
s/$/"/
}'  > junk.c;



    echo creating $dir/Makefile
$CPP -I. -I${top_srcdir}/src  junk.c \
  | sed -e 's/^\#.*//'		\
	-e 's/^[ 	][ 	]*$//'\
	-e 's/^ /	/'		\
  | sed -n -e '/^..*$/p'	\
  | sed '/^\"/ {
	s/\\\([\"]\)/\1/g
	s/^[ 	]*\"//
	s/\"[ 	]*$//
}' > Makefile.new
    chmod 444 Makefile.new
    mv -f Makefile.new Makefile

    echo creating $dir/GNUmakefile
$CPP -I. -I${top_srcdir}/src -DUSE_GNU_MAKE junk.c \
  | sed -e 's/^\#.*//'		\
	-e 's/^[ 	][ 	]*$//'\
	-e 's/^ /	/'		\
  | sed -n -e '/^..*$/p'	\
  | sed '/^\"/ {
	s/\\\([\"]\)/\1/g
	s/^[ 	]*\"//
	s/\"[ 	]*$//
}' > Makefile.new
    chmod 444 Makefile.new
    mv -f Makefile.new GNUmakefile

    rm -f junk.c
  )
done

sed < config.status >> lib-src/config.values \
  -e '/{ac_dA}.*{ac_dB}.*{ac_dC}.*{ac_dD}$/!d' \
  -e 's/\${ac_dA}\(.*\)\${ac_dB}.*\${ac_dC}\(.*\)\${ac_dD}/\1 \2/' \
  -e 's/^\([^ ]*\) $/\1 ""/' \
  -e 's/ 1$/ t/'


exit 0
EOF
chmod +x $CONFIG_STATUS
rm -fr confdefs* $ac_clean_files
test "$no_create" = yes || ${CONFIG_SHELL-/bin/sh} $CONFIG_STATUS || exit 1
